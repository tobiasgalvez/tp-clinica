var lM=Object.defineProperty,dM=Object.defineProperties;var hM=Object.getOwnPropertyDescriptors;var aw=Object.getOwnPropertySymbols,fM=Object.getPrototypeOf,pM=Object.prototype.hasOwnProperty,gM=Object.prototype.propertyIsEnumerable,mM=Reflect.get;var cw=(t,e,n)=>e in t?lM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||={})pM.call(e,n)&&cw(t,n,e[n]);if(aw)for(var n of aw(e))gM.call(e,n)&&cw(t,n,e[n]);return t},te=(t,e)=>dM(t,hM(e));var pr=(t,e,n)=>mM(fM(t),n,e);var m=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});function uw(t,e){return Object.is(t,e)}var Ue=null,Hc=!1,qc=1,gr=Symbol("SIGNAL");function pe(t){let e=Ue;return Ue=t,e}function lw(){return Ue}var Bs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function of(t){if(Hc)throw new Error("");if(Ue===null)return;Ue.consumerOnSignalRead(t);let e=Ue.nextProducerIndex++;if(Kc(Ue),e<Ue.producerNode.length&&Ue.producerNode[e]!==t&&Us(Ue)){let n=Ue.producerNode[e];Wc(n,Ue.producerIndexOfThis[e])}Ue.producerNode[e]!==t&&(Ue.producerNode[e]=t,Ue.producerIndexOfThis[e]=Us(Ue)?pw(t,Ue,e):0),Ue.producerLastReadVersion[e]=t.version}function yM(){qc++}function dw(t){if(!(Us(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===qc)){if(!t.producerMustRecompute(t)&&!af(t)){t.dirty=!1,t.lastCleanEpoch=qc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=qc}}function hw(t){if(t.liveConsumerNode===void 0)return;let e=Hc;Hc=!0;try{for(let n of t.liveConsumerNode)n.dirty||vM(n)}finally{Hc=e}}function fw(){return Ue?.consumerAllowSignalWrites!==!1}function vM(t){t.dirty=!0,hw(t),t.consumerMarkedDirty?.(t)}function Gc(t){return t&&(t.nextProducerIndex=0),pe(t)}function sf(t,e){if(pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Us(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Wc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function af(t){Kc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(dw(n),r!==n.version))return!0}return!1}function cf(t){if(Kc(t),Us(t))for(let e=0;e<t.producerNode.length;e++)Wc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function pw(t,e,n){if(gw(t),t.liveConsumerNode.length===0&&mw(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=pw(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Wc(t,e){if(gw(t),t.liveConsumerNode.length===1&&mw(t))for(let r=0;r<t.producerNode.length;r++)Wc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Kc(i),i.producerIndexOfThis[r]=e}}function Us(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Kc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function gw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function mw(t){return t.producerNode!==void 0}function yw(t){let e=Object.create(_M);e.computation=t;let n=()=>{if(dw(e),of(e),e.value===zc)throw e.error;return e.value};return n[gr]=e,n}var nf=Symbol("UNSET"),rf=Symbol("COMPUTING"),zc=Symbol("ERRORED"),_M=te(O({},Bs),{value:nf,dirty:!0,error:null,equal:uw,producerMustRecompute(t){return t.value===nf||t.value===rf},producerRecomputeValue(t){if(t.value===rf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=rf;let n=Gc(t),r;try{r=t.computation()}catch(i){r=zc,t.error=i}finally{sf(t,n)}if(e!==nf&&e!==zc&&r!==zc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function IM(){throw new Error}var vw=IM;function _w(){vw()}function Iw(t){vw=t}var wM=null;function ww(t){let e=Object.create(Dw);e.value=t;let n=()=>(of(e),e.value);return n[gr]=e,n}function uf(t,e){fw()||_w(),t.equal(t.value,e)||(t.value=e,EM(t))}function Ew(t,e){fw()||_w(),uf(t,e(t.value))}var Dw=te(O({},Bs),{equal:uw,value:void 0});function EM(t){t.version++,yM(),hw(t),wM?.()}function Y(t){return typeof t=="function"}function Gi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qc=Gi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Yr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof Qc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{bw(o)}catch(s){e=e??[],s instanceof Qc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Qc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)bw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Yr(n,e)}remove(e){let{_finalizers:n}=this;n&&Yr(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var lf=Re.EMPTY;function Yc(t){return t instanceof Re||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function bw(t){Y(t)?t():t.unsubscribe()}var qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wi={setTimeout(t,e,...n){let{delegate:r}=Wi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Wi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Zc(t){Wi.setTimeout(()=>{let{onUnhandledError:e}=qt;if(e)e(t);else throw t})}function $s(){}var Cw=df("C",void 0,void 0);function Tw(t){return df("E",void 0,t)}function Sw(t){return df("N",t,void 0)}function df(t,e,n){return{kind:t,value:e,error:n}}var Zr=null;function Ki(t){if(qt.useDeprecatedSynchronousErrorHandling){let e=!Zr;if(e&&(Zr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Zr;if(Zr=null,n)throw r}}else t()}function Aw(t){qt.useDeprecatedSynchronousErrorHandling&&Zr&&(Zr.errorThrown=!0,Zr.error=t)}var Jr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yc(e)&&e.add(this)):this.destination=CM}static create(e,n,r){return new Qi(e,n,r)}next(e){this.isStopped?ff(Sw(e),this):this._next(e)}error(e){this.isStopped?ff(Tw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ff(Cw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DM=Function.prototype.bind;function hf(t,e){return DM.call(t,e)}var pf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Jc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Jc(r)}else Jc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Jc(n)}}},Qi=class extends Jr{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&qt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hf(e.next,o),error:e.error&&hf(e.error,o),complete:e.complete&&hf(e.complete,o)}):i=e}this.destination=new pf(i)}};function Jc(t){qt.useDeprecatedSynchronousErrorHandling?Aw(t):Zc(t)}function bM(t){throw t}function ff(t,e){let{onStoppedNotification:n}=qt;n&&Wi.setTimeout(()=>n(t,e))}var CM={closed:!0,next:$s,error:bM,complete:$s};var Yi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function gf(...t){return mf(t)}function mf(t){return t.length===0?Dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var de=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=SM(n)?n:new Qi(n,r,i);return Ki(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Rw(r),new r((i,o)=>{let s=new Qi({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Yi](){return this}pipe(...n){return mf(n)(this)}toPromise(n){return n=Rw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Rw(t){var e;return(e=t??qt.Promise)!==null&&e!==void 0?e:Promise}function TM(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function SM(t){return t&&t instanceof Jr||TM(t)&&Yc(t)}function yf(t){return Y(t?.lift)}function he(t){return e=>{if(yf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new vf(t,e,n,r,i)}var vf=class extends Jr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Zi(){return he((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ji=class extends de{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,yf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return Zi()(this)}};var Mw=Gi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qe=(()=>{class t extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Xc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Mw}next(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?lf:(this.currentObservers=null,o.push(n),new Re(()=>{this.currentObservers=null,Yr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new de;return n.source=this,n}}return t.create=(e,n)=>new Xc(e,n),t})(),Xc=class extends Qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:lf}};var Ye=class extends Qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _f={now(){return(_f.delegate||Date).now()},delegate:void 0};var eu=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Hs={setInterval(t,e,...n){let{delegate:r}=Hs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Hs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Xi=class extends eu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Hs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Hs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Yr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var eo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};eo.now=_f.now;var to=class extends eo{constructor(e,n=eo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var If=new to(Xi);var tu=class extends Xi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var nu=class extends to{};var wf=new nu(tu);var bt=new de(t=>t.complete());function Nw(t){return t&&Y(t.schedule)}function xw(t){return t[t.length-1]}function ru(t){return Y(xw(t))?t.pop():void 0}function mr(t){return Nw(xw(t))?t.pop():void 0}function Ef(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ow(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function Pw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xr(t){return this instanceof Xr?(this.v=t,this):new Xr(t)}function kw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(S){return Promise.resolve(S).then(w,p)}}function c(w,S){r[w]&&(i[w]=function(M){return new Promise(function(R,F){o.push([w,M,R,F])>1||u(w,M)})},S&&(i[w]=S(i[w])))}function u(w,S){try{l(r[w](S))}catch(M){v(o[0][3],M)}}function l(w){w.value instanceof Xr?Promise.resolve(w.value.v).then(h,p):v(o[0][2],w)}function h(w){u("next",w)}function p(w){u("throw",w)}function v(w,S){w(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Fw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pw=="function"?Pw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var iu=t=>t&&typeof t.length=="number"&&typeof t!="function";function ou(t){return Y(t?.then)}function su(t){return Y(t[Yi])}function au(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function cu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var uu=AM();function lu(t){return Y(t?.[uu])}function du(t){return kw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Xr(n.read());if(i)return yield Xr(void 0);yield yield Xr(r)}}finally{n.releaseLock()}})}function hu(t){return Y(t?.getReader)}function ke(t){if(t instanceof de)return t;if(t!=null){if(su(t))return RM(t);if(iu(t))return MM(t);if(ou(t))return NM(t);if(au(t))return Vw(t);if(lu(t))return xM(t);if(hu(t))return PM(t)}throw cu(t)}function RM(t){return new de(e=>{let n=t[Yi]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MM(t){return new de(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function NM(t){return new de(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Zc)})}function xM(t){return new de(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Vw(t){return new de(e=>{OM(t,e).catch(n=>e.error(n))})}function PM(t){return Vw(du(t))}function OM(t,e){var n,r,i,o;return Ow(this,void 0,void 0,function*(){try{for(n=Fw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function It(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function yr(t,e=0){return he((n,r)=>{n.subscribe(ae(r,i=>It(r,t,()=>r.next(i),e),()=>It(r,t,()=>r.complete(),e),i=>It(r,t,()=>r.error(i),e)))})}function vr(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Lw(t,e){return ke(t).pipe(vr(e),yr(e))}function jw(t,e){return ke(t).pipe(vr(e),yr(e))}function Uw(t,e){return new de(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Bw(t,e){return new de(n=>{let r;return It(n,e,()=>{r=t[uu](),It(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function fu(t,e){if(!t)throw new Error("Iterable cannot be null");return new de(n=>{It(n,e,()=>{let r=t[Symbol.asyncIterator]();It(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function $w(t,e){return fu(du(t),e)}function Hw(t,e){if(t!=null){if(su(t))return Lw(t,e);if(iu(t))return Uw(t,e);if(ou(t))return jw(t,e);if(au(t))return fu(t,e);if(lu(t))return Bw(t,e);if(hu(t))return $w(t,e)}throw cu(t)}function Pe(t,e){return e?Hw(t,e):ke(t)}function Z(...t){let e=mr(t);return Pe(t,e)}function no(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new de(e?i=>e.schedule(r,0,i):r)}function Df(t){return!!t&&(t instanceof de||Y(t.lift)&&Y(t.subscribe))}var Mn=Gi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return he((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:kM}=Array;function FM(t,e){return kM(e)?t(...e):t(e)}function pu(t){return ie(e=>FM(t,e))}var{isArray:VM}=Array,{getPrototypeOf:LM,prototype:jM,keys:UM}=Object;function gu(t){if(t.length===1){let e=t[0];if(VM(e))return{args:e,keys:null};if(BM(e)){let n=UM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function BM(t){return t&&typeof t=="object"&&LM(t)===jM}function mu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function yu(...t){let e=mr(t),n=ru(t),{args:r,keys:i}=gu(t);if(r.length===0)return Pe([],e);let o=new de($M(r,e,i?s=>mu(i,s):Dt));return n?o.pipe(pu(n)):o}function $M(t,e,n=Dt){return r=>{qw(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)qw(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(ae(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qw(t,e,n){t?It(n,t,e):e()}function zw(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,v=()=>{p&&!u.length&&!l&&e.complete()},w=M=>l<r?S(M):u.push(M),S=M=>{o&&e.next(M),l++;let R=!1;ke(n(M,h++)).subscribe(ae(e,F=>{i?.(F),o?w(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let F=u.shift();s?It(e,s,()=>S(F)):S(F)}v()}catch(F){e.error(F)}}))};return t.subscribe(ae(e,w,()=>{p=!0,v()})),()=>{c?.()}}function Be(t,e,n=1/0){return Y(e)?Be((r,i)=>ie((o,s)=>e(r,o,i,s))(ke(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>zw(r,i,t,n)))}function bf(t=1/0){return Be(Dt,t)}function Gw(){return bf(1)}function ro(...t){return Gw()(Pe(t,mr(t)))}function vu(t){return new de(e=>{ke(t()).subscribe(e)})}function Cf(...t){let e=ru(t),{args:n,keys:r}=gu(t),i=new de(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;ke(n[h]).subscribe(ae(o,v=>{p||(p=!0,l--),c[h]=v},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?mu(r,c):c),o.complete())}))}});return e?i.pipe(pu(e)):i}function zt(t,e){return he((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function _r(t){return he((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ae(n,void 0,void 0,s=>{o=ke(t(s,_r(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ww(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(ae(s,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function io(t,e){return Y(e)?Be(t,e,1):Be(t,1)}function Ir(t){return he((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Nn(t){return t<=0?()=>bt:he((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Tf(t){return ie(()=>t)}function _u(t=HM){return he((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function HM(){return new Mn}function qs(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function on(t,e){let n=arguments.length>=2;return r=>r.pipe(t?zt((i,o)=>t(i,o,r)):Dt,Nn(1),n?Ir(e):_u(()=>new Mn))}function oo(t){return t<=0?()=>bt:he((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Sf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?zt((i,o)=>t(i,o,r)):Dt,oo(1),n?Ir(e):_u(()=>new Mn))}function Af(t,e){return he(Ww(t,e,arguments.length>=2,!0))}function Rf(...t){let e=mr(t);return he((n,r)=>{(e?ro(t,n,e):ro(t,n)).subscribe(r)})}function Gt(t,e){return he((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;ke(t(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Mf(t){return he((e,n)=>{ke(t).subscribe(ae(n,()=>n.complete(),$s)),!n.closed&&e.subscribe(n)})}function $e(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var qM="https://g.co/ng/security#xss",U=class extends Error{constructor(e,n){super(Pp(e,n)),this.code=e}};function Pp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ta(t){return{toString:t}.toString()}var Iu="__parameters__";function zM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function PE(t,e,n){return ta(()=>{let r=zM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(Iu)?u[Iu]:Object.defineProperty(u,Iu,{value:[]})[Iu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function GM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(pt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Kw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var WM=we({__forward_ref__:we});function dn(t){return t.__forward_ref__=dn,t.toString=function(){return pt(this())},t}function ft(t){return OE(t)?t():t}function OE(t){return typeof t=="function"&&t.hasOwnProperty(WM)&&t.__forward_ref__===dn}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ui(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ju(t){return Qw(t,FE)||Qw(t,VE)}function kE(t){return Ju(t)!==null}function Qw(t,e){return t.hasOwnProperty(e)?t[e]:null}function KM(t){let e=t&&(t[FE]||t[VE]);return e||null}function Yw(t){return t&&(t.hasOwnProperty(Zw)||t.hasOwnProperty(QM))?t[Zw]:null}var FE=we({\u0275prov:we}),Zw=we({\u0275inj:we}),VE=we({ngInjectableDef:we}),QM=we({ngInjectorDef:we}),L=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function LE(t){return t&&!!t.\u0275providers}var YM=we({\u0275cmp:we}),ZM=we({\u0275dir:we}),JM=we({\u0275pipe:we}),XM=we({\u0275mod:we}),Ru=we({\u0275fac:we}),Ws=we({__NG_ELEMENT_ID__:we}),Jw=we({__NG_ENV_ID__:we});function Op(t){return typeof t=="string"?t:t==null?"":String(t)}function eN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Op(t)}function tN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new U(-200,t)}function kp(t,e){throw new U(-201,!1)}var ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ne||{}),qf;function jE(){return qf}function Nt(t){let e=qf;return qf=t,e}function UE(t,e,n){let r=Ju(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(e!==void 0)return e;kp(t,"Injector")}var nN={},Ks=nN,zf="__NG_DI_FLAG__",Mu="ngTempTokenPath",rN="ngTokenPath",iN=/\n/gm,oN="\u0275",Xw="__source",uo;function sN(){return uo}function wr(t){let e=uo;return uo=t,e}function aN(t,e=ne.Default){if(uo===void 0)throw new U(-203,!1);return uo===null?UE(t,void 0,e):uo.get(t,e&ne.Optional?null:void 0,e)}function oe(t,e=ne.Default){return(jE()||aN)(ft(t),e)}function k(t,e=ne.Default){return oe(t,Xu(e))}function Xu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gf(t){let e=[];for(let n=0;n<t.length;n++){let r=ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=ne.Default;for(let s=0;s<r.length;s++){let c=r[s],u=cN(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(oe(i,o))}else e.push(oe(r))}return e}function BE(t,e){return t[zf]=e,t.prototype[zf]=e,t}function cN(t){return t[zf]}function uN(t,e,n,r){let i=t[Mu];throw e[Xw]&&i.unshift(e[Xw]),t.message=lN(`
`+t.message,i,n,r),t[rN]=i,t[Mu]=null,t}function lN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==oN?t.slice(2):t;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):pt(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(iN,`
  `)}`}var qe=BE(PE("Optional"),8);var $E=BE(PE("SkipSelf"),4);function ho(t,e){let n=t.hasOwnProperty(Ru);return n?t[Ru]:null}function Fp(t,e){t.forEach(n=>Array.isArray(n)?Fp(n,e):e(n))}function HE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function hN(t,e,n){let r=na(t,e);return r>=0?t[r|1]=n:(r=~r,dN(t,r,e,n)),r}function Nf(t,e){let n=na(t,e);if(n>=0)return t[n|1]}function na(t,e){return fN(t,e,1)}function fN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var fo={},xt=[],po=new L(""),qE=new L("",-1),zE=new L(""),xu=class{get(e,n=Ks){if(n===Ks){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return n}},GE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(GE||{}),cn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(cn||{}),br=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(br||{});function pN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Wf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];mN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function gN(t){return t===3||t===4||t===6}function mN(t){return t.charCodeAt(0)===64}function Qs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?eE(t,n,i,null,e[++r]):eE(t,n,i,null,null))}}return t}function eE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var WE="ng-template";function yN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&pN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Vp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Vp(t){return t.type===4&&t.value!==WE}function vN(t,e,n){let r=t.type===4&&!n?WE:t.value;return e===r}function _N(t,e,n){let r=4,i=t.attrs,o=i!==null?EN(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Wt(r)&&!Wt(u))return!1;if(s&&Wt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!vN(t,u,n)||u===""&&e.length===1){if(Wt(r))return!1;s=!0}}else if(r&8){if(i===null||!yN(t,i,u,n)){if(Wt(r))return!1;s=!0}}else{let l=e[++c],h=IN(u,i,Vp(t),n);if(h===-1){if(Wt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Wt(r))return!1;s=!0}}}}return Wt(r)||s}function Wt(t){return(t&1)===0}function IN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return DN(e,t)}function wN(t,e,n=!1){for(let r=0;r<e.length;r++)if(_N(t,e[r],n))return!0;return!1}function EN(t){for(let e=0;e<t.length;e++){let n=t[e];if(gN(n))return e}return t.length}function DN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function tE(t,e){return t?":not("+e.trim()+")":e}function bN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Wt(s)&&(e+=tE(o,i),i=""),r=s,o=o||!Wt(r);n++}return i!==""&&(e+=tE(o,i)),e}function CN(t){return t.map(bN).join(",")}function TN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Wt(i))break;i=o}r++}return{attrs:e,classes:n}}function hn(t){return ta(()=>{let e=JE(t),n=te(O({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===GE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||cn.Emulated,styles:t.styles||xt,_:null,schemas:t.schemas||null,tView:null,id:""});XE(n);let r=t.dependencies;return n.directiveDefs=rE(r,!1),n.pipeDefs=rE(r,!0),n.id=RN(n),n})}function SN(t){return ti(t)||KE(t)}function AN(t){return t!==null}function li(t){return ta(()=>({type:t.type,bootstrap:t.bootstrap||xt,declarations:t.declarations||xt,imports:t.imports||xt,exports:t.exports||xt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nE(t,e){if(t==null)return fo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c=br.None;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=c!==br.None?[r,c]:r,e[o]=s):n[o]=r}return n}function Oe(t){return ta(()=>{let e=JE(t);return XE(e),e})}function ti(t){return t[YM]||null}function KE(t){return t[ZM]||null}function QE(t){return t[JM]||null}function YE(t){let e=ti(t)||KE(t)||QE(t);return e!==null?e.standalone:!1}function ZE(t,e){let n=t[XM]||null;if(!n&&e===!0)throw new Error(`Type ${pt(t)} does not have '\u0275mod' property.`);return n}function JE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||xt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nE(t.inputs,e),outputs:nE(t.outputs),debugInfo:null}}function XE(t){t.features?.forEach(e=>e(t))}function rE(t,e){if(!t)return null;let n=e?QE:SN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(AN)}function RN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ft(t){return{\u0275providers:t}}function MN(...t){return{\u0275providers:eD(!0,t),\u0275fromNgModule:!0}}function eD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Fp(e,s=>{let c=s;Kf(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&tD(i,o),n}function tD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Lp(i,o=>{e(o,r)})}}function Kf(t,e,n,r){if(t=ft(t),!t)return!1;let i=null,o=Yw(t),s=!o&&ti(t);if(!o&&!s){let u=t.ngModule;if(o=Yw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Kf(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Fp(o.imports,h=>{Kf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&tD(l,e)}if(!c){let l=ho(i)||(()=>new i);e({provide:i,useFactory:l,deps:xt},i),e({provide:zE,useValue:i,multi:!0},i),e({provide:po,useValue:()=>oe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Lp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Lp(t,e){for(let n of t)LE(n)&&(n=n.\u0275providers),Array.isArray(n)?Lp(n,e):e(n)}var NN=we({provide:String,useValue:we});function nD(t){return t!==null&&typeof t=="object"&&NN in t}function xN(t){return!!(t&&t.useExisting)}function PN(t){return!!(t&&t.useFactory)}function go(t){return typeof t=="function"}function ON(t){return!!t.useClass}var el=new L(""),bu={},kN={},xf;function jp(){return xf===void 0&&(xf=new xu),xf}var kt=class{},Ys=class extends kt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yf(e,s=>this.processProvider(s)),this.records.set(qE,so(void 0,this)),i.has("environment")&&this.records.set(kt,so(void 0,this));let o=this.records.get(el);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zE,xt,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=wr(this),r=Nt(void 0),i;try{return e()}finally{wr(n),Nt(r)}}get(e,n=Ks,r=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Jw))return e[Jw](this);r=Xu(r);let i,o=wr(this),s=Nt(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=UN(e)&&Ju(e);l&&this.injectableDefInScope(l)?u=so(Qf(e),bu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&ne.Self?jp():this.parent;return n=r&ne.Optional&&n===Ks?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Mu]=c[Mu]||[]).unshift(pt(e)),o)throw c;return uN(c,e,"R3InjectorError",this.source)}else throw c}finally{Nt(s),wr(o)}}resolveInjectorInitializers(){let e=pe(null),n=wr(this),r=Nt(void 0),i;try{let o=this.get(po,xt,ne.Self);for(let s of o)s()}finally{wr(n),Nt(r),pe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){e=ft(e);let n=go(e)?e:ft(e&&e.provide),r=VN(e);if(!go(e)&&e.multi===!0){let i=this.records.get(n);i||(i=so(void 0,bu,!0),i.factory=()=>Gf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=pe(null);try{return n.value===bu&&(n.value=kN,n.value=n.factory()),typeof n.value=="object"&&n.value&&jN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{pe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qf(t){let e=Ju(t),n=e!==null?e.factory:ho(t);if(n!==null)return n;if(t instanceof L)throw new U(204,!1);if(t instanceof Function)return FN(t);throw new U(204,!1)}function FN(t){if(t.length>0)throw new U(204,!1);let n=KM(t);return n!==null?()=>n.factory(t):()=>new t}function VN(t){if(nD(t))return so(void 0,t.useValue);{let e=rD(t);return so(e,bu)}}function rD(t,e,n){let r;if(go(t)){let i=ft(t);return ho(i)||Qf(i)}else if(nD(t))r=()=>ft(t.useValue);else if(PN(t))r=()=>t.useFactory(...Gf(t.deps||[]));else if(xN(t))r=()=>oe(ft(t.useExisting));else{let i=ft(t&&(t.useClass||t.provide));if(LN(t))r=()=>new i(...Gf(t.deps));else return ho(i)||Qf(i)}return r}function so(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function LN(t){return!!t.deps}function jN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function UN(t){return typeof t=="function"||typeof t=="object"&&t instanceof L}function Yf(t,e){for(let n of t)Array.isArray(n)?Yf(n,e):n&&LE(n)?Yf(n.\u0275providers,e):e(n)}function Vn(t,e){t instanceof Ys&&t.assertNotDestroyed();let n,r=wr(t),i=Nt(void 0);try{return e()}finally{wr(r),Nt(i)}}function BN(){return jE()!==void 0||sN()!=null}function $N(t){return typeof t=="function"}var Ln=0,ce=1,W=2,gt=3,Kt=4,Yt=5,Pu=6,Ou=7,Qt=8,mo=9,xn=10,Ze=11,Zs=12,iE=13,bo=14,un=15,yo=16,ao=17,vo=18,tl=19,iD=20,Er=21,Pf=22,Pt=23,Pn=25,oD=1;var ni=7,ku=8,Fu=9,Ot=10,Vu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Vu||{});function Dr(t){return Array.isArray(t)&&typeof t[oD]=="object"}function jn(t){return Array.isArray(t)&&t[oD]===!0}function sD(t){return(t.flags&4)!==0}function nl(t){return t.componentOffset>-1}function Up(t){return(t.flags&1)===1}function Cr(t){return!!t.template}function Zf(t){return(t[W]&512)!==0}var Jf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function aD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Sr(){return cD}function cD(t){return t.type.prototype.ngOnChanges&&(t.setInput=qN),HN}Sr.ngInherit=!0;function HN(){let t=lD(this),e=t?.current;if(e){let n=t.previous;if(n===fo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qN(t,e,n,r,i){let o=this.declaredInputs[r],s=lD(t)||zN(t,{previous:fo,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Jf(l&&l.currentValue,n,u===fo),aD(t,e,i,n)}var uD="__ngSimpleChanges__";function lD(t){return t[uD]||null}function zN(t,e){return t[uD]=e}var oE=null;var sn=function(t,e,n){oE?.(t,e,n)},GN="svg",WN="math";function ln(t){for(;Array.isArray(t);)t=t[Ln];return t}function dD(t,e){return ln(e[t])}function Vt(t,e){return ln(e[t.index])}function hD(t,e){return t.data[e]}function KN(t,e){return t[e]}function Ar(t,e){let n=e[t];return Dr(n)?n:n[Ln]}function Bp(t){return(t[W]&128)===128}function QN(t){return jn(t[gt])}function Lu(t,e){return e==null?null:t[e]}function fD(t){t[ao]=0}function pD(t){t[W]&1024||(t[W]|=1024,Bp(t)&&il(t))}function YN(t,e){for(;t>0;)e=e[bo],t--;return e}function rl(t){return!!(t[W]&9216||t[Pt]?.dirty)}function Xf(t){t[xn].changeDetectionScheduler?.notify(8),t[W]&64&&(t[W]|=1024),rl(t)&&il(t)}function il(t){t[xn].changeDetectionScheduler?.notify(0);let e=ri(t);for(;e!==null&&!(e[W]&8192||(e[W]|=8192,!Bp(e)));)e=ri(e)}function gD(t,e){if((t[W]&256)===256)throw new U(911,!1);t[Er]===null&&(t[Er]=[]),t[Er].push(e)}function ZN(t,e){if(t[Er]===null)return;let n=t[Er].indexOf(e);n!==-1&&t[Er].splice(n,1)}function ri(t){let e=t[gt];return jn(e)?e[gt]:e}var se={lFrame:bD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mD=!1;function JN(){return se.lFrame.elementDepthCount}function XN(){se.lFrame.elementDepthCount++}function ex(){se.lFrame.elementDepthCount--}function yD(){return se.bindingsEnabled}function tx(){return se.skipHydrationRootTNode!==null}function nx(t){return se.skipHydrationRootTNode===t}function rx(){se.skipHydrationRootTNode=null}function Me(){return se.lFrame.lView}function Zt(){return se.lFrame.tView}function di(t){return se.lFrame.contextLView=t,t[Qt]}function hi(t){return se.lFrame.contextLView=null,t}function Ct(){let t=vD();for(;t!==null&&t.type===64;)t=t.parent;return t}function vD(){return se.lFrame.currentTNode}function ix(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ra(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function _D(){return se.lFrame.isParent}function ox(){se.lFrame.isParent=!1}function sx(){return se.lFrame.contextLView}function ID(){return mD}function sE(t){mD=t}function ax(t){return se.lFrame.bindingIndex=t}function $p(){return se.lFrame.bindingIndex++}function cx(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ux(){return se.lFrame.inI18n}function lx(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,ep(e)}function dx(){return se.lFrame.currentDirectiveIndex}function ep(t){se.lFrame.currentDirectiveIndex=t}function hx(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function wD(t){se.lFrame.currentQueryIndex=t}function fx(t){let e=t[ce];return e.type===2?e.declTNode:e.type===1?t[Yt]:null}function ED(t,e,n){if(n&ne.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ne.Host);)if(i=fx(o),i===null||(o=o[bo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=se.lFrame=DD();return r.currentTNode=e,r.lView=t,!0}function Hp(t){let e=DD(),n=t[ce];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function DD(){let t=se.lFrame,e=t===null?null:t.child;return e===null?bD(t):e}function bD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function CD(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var TD=CD;function qp(){let t=CD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function px(t){return(se.lFrame.contextLView=YN(t,se.lFrame.contextLView))[Qt]}function Co(){return se.lFrame.selectedIndex}function ii(t){se.lFrame.selectedIndex=t}function SD(){let t=se.lFrame;return hD(t.tView,t.selectedIndex)}function gx(){return se.lFrame.currentNamespace}var AD=!0;function zp(){return AD}function Gp(t){AD=t}function mx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Wp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Cu(t,e,n){RD(t,e,3,n)}function Tu(t,e,n,r){(t[W]&3)===n&&RD(t,e,n,r)}function Of(t,e){let n=t[W];(n&3)===e&&(n&=16383,n+=1,t[W]=n)}function RD(t,e,n,r){let i=r!==void 0?t[ao]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[ao]+=65536),(c<o||o==-1)&&(yx(t,n,e,u),t[ao]=(t[ao]&4294901760)+u+2),u++}function aE(t,e){sn(4,t,e);let n=pe(null);try{e.call(t)}finally{pe(n),sn(5,t,e)}}function yx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[W]>>14<t[ao]>>16&&(t[W]&3)===e&&(t[W]+=16384,aE(c,o)):aE(c,o)}var lo=-1,oi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function vx(t){return t instanceof oi}function _x(t){return(t.flags&8)!==0}function Ix(t){return(t.flags&16)!==0}var kf={},tp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Xu(r);let i=this.injector.get(e,kf,r);return i!==kf||n===kf?i:this.parentInjector.get(e,n,r)}};function MD(t){return t!==lo}function ju(t){return t&32767}function wx(t){return t>>16}function Uu(t,e){let n=wx(t),r=e;for(;n>0;)r=r[bo],n--;return r}var np=!0;function cE(t){let e=np;return np=t,e}var Ex=256,ND=Ex-1,xD=5,Dx=0,an={};function bx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ws)&&(r=n[Ws]),r==null&&(r=n[Ws]=Dx++);let i=r&ND,o=1<<i;e.data[t+(i>>xD)]|=o}function Bu(t,e){let n=PD(t,e);if(n!==-1)return n;let r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,Ff(r.data,t),Ff(e,null),Ff(r.blueprint,null));let i=Kp(t,e),o=t.injectorIndex;if(MD(i)){let s=ju(i),c=Uu(i,e),u=c[ce].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Ff(t,e){t.push(0,0,0,0,0,0,0,0,e)}function PD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Kp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=LD(i),r===null)return lo;if(n++,i=i[bo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return lo}function rp(t,e,n){bx(t,e,n)}function OD(t,e,n){if(n&ne.Optional||t!==void 0)return t;kp(e,"NodeInjector")}function kD(t,e,n,r){if(n&ne.Optional&&r===void 0&&(r=null),!(n&(ne.Self|ne.Host))){let i=t[mo],o=Nt(void 0);try{return i?i.get(e,r,n&ne.Optional):UE(e,r,n&ne.Optional)}finally{Nt(o)}}return OD(r,e,n)}function FD(t,e,n,r=ne.Default,i){if(t!==null){if(e[W]&2048&&!(r&ne.Self)){let s=Rx(t,e,n,r,an);if(s!==an)return s}let o=VD(t,e,n,r,an);if(o!==an)return o}return kD(e,n,r,i)}function VD(t,e,n,r,i){let o=Sx(n);if(typeof o=="function"){if(!ED(e,t,r))return r&ne.Host?OD(i,n,r):kD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ne.Optional))kp(n);else return s}finally{TD()}}else if(typeof o=="number"){let s=null,c=PD(t,e),u=lo,l=r&ne.Host?e[un][Yt]:null;for((c===-1||r&ne.SkipSelf)&&(u=c===-1?Kp(t,e):e[c+8],u===lo||!lE(r,!1)?c=-1:(s=e[ce],c=ju(u),e=Uu(u,e)));c!==-1;){let h=e[ce];if(uE(o,c,h.data)){let p=Cx(c,e,n,s,r,l);if(p!==an)return p}u=e[c+8],u!==lo&&lE(r,e[ce].data[c+8]===l)&&uE(o,c,e)?(s=h,c=ju(u),e=Uu(u,e)):c=-1}}return i}function Cx(t,e,n,r,i,o){let s=e[ce],c=s.data[t+8],u=r==null?nl(c)&&np:r!=s&&(c.type&3)!==0,l=i&ne.Host&&o===c,h=Tx(c,s,n,u,l);return h!==null?_o(e,s,h,c):an}function Tx(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,v=i?c+h:l;for(let w=p;w<v;w++){let S=s[w];if(w<u&&n===S||w>=u&&S.type===n)return w}if(i){let w=s[u];if(w&&Cr(w)&&w.type===n)return u}return null}function _o(t,e,n,r){let i=t[n],o=e.data;if(vx(i)){let s=i;s.resolving&&tN(eN(o[n]));let c=cE(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Nt(s.injectImpl):null,h=ED(t,r,ne.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&mx(n,o[n],e)}finally{l!==null&&Nt(l),cE(c),s.resolving=!1,TD()}}return i}function Sx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ws)?t[Ws]:void 0;return typeof e=="number"?e>=0?e&ND:Ax:e}function uE(t,e,n){let r=1<<t;return!!(n[e+(t>>xD)]&r)}function lE(t,e){return!(t&ne.Self)&&!(t&ne.Host&&e)}var ei=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return FD(this._tNode,this._lView,e,Xu(r),n)}};function Ax(){return new ei(Ct(),Me())}function Un(t){return ta(()=>{let e=t.prototype.constructor,n=e[Ru]||ip(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ru]||ip(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ip(t){return OE(t)?()=>{let e=ip(ft(t));return e&&e()}:ho(t)}function Rx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[W]&2048&&!(s[W]&512);){let c=VD(o,s,n,r|ne.Self,an);if(c!==an)return c;let u=o.parent;if(!u){let l=s[iD];if(l){let h=l.get(n,an,r);if(h!==an)return h}u=LD(s),s=s[bo]}o=u}return i}function LD(t){let e=t[ce],n=e.type;return n===2?e.declTNode:n===1?t[Yt]:null}function dE(t,e=null,n=null,r){let i=jD(t,e,n,r);return i.resolveInjectorInitializers(),i}function jD(t,e=null,n=null,r,i=new Set){let o=[n||xt,MN(t)];return r=r||(typeof t=="object"?void 0:pt(t)),new Ys(o,e||jp(),r||null,i)}var at=class t{static{this.THROW_IF_NOT_FOUND=Ks}static{this.NULL=new xu}static create(e,n){if(Array.isArray(e))return dE({name:""},n,e,"");{let r=e.name??"";return dE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:t,providedIn:"any",factory:()=>oe(qE)})}static{this.__NG_ELEMENT_ID__=-1}};var Mx=new L("");Mx.__NG_ELEMENT_ID__=t=>{let e=Ct();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(t&ne.Optional)return null;throw new U(204,!1)};var Nx="ngOriginalError";function Vf(t){return t[Nx]}var UD=!0,BD=(()=>{class t{static{this.__NG_ELEMENT_ID__=xx}static{this.__NG_ENV_ID__=n=>n}}return t})(),op=class extends BD{constructor(e){super(),this._lView=e}onDestroy(e){return gD(this._lView,e),()=>ZN(this._lView,e)}};function xx(){return new op(Me())}var To=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ye(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}}return t})();var sp=class extends Qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,BN()&&(this.destroyRef=k(BD,{optional:!0})??void 0,this.pendingTasks=k(To,{optional:!0})??void 0)}emit(e){let n=pe(null);try{super.next(e)}finally{pe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Fe=sp;function $u(...t){}function $D(t){let e,n;function r(){t=$u;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function hE(t){return queueMicrotask(()=>t()),()=>{t=$u}}var Qp="isAngularZone",Hu=Qp+"_ID",Px=0,ye=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fe(!1),this.onMicrotaskEmpty=new Fe(!1),this.onStable=new Fe(!1),this.onError=new Fe(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=UD}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Fx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Ox,$u,$u);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Ox={};function Yp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){$D(()=>{t.callbackScheduled=!1,ap(t),t.isCheckStableRunning=!0,Yp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),ap(t)}function Fx(t){let e=()=>{kx(t)},n=Px++;t._inner=t._inner.fork({name:"angular",properties:{[Qp]:!0,[Hu]:n,[Hu+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(Vx(u))return r.invokeTask(o,s,c,u);try{return fE(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pE(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return fE(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Lx(u)&&e(),pE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,ap(t),Yp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function ap(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function fE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pE(t){t._nesting--,Yp(t)}var cp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fe,this.onMicrotaskEmpty=new Fe,this.onStable=new Fe,this.onError=new Fe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Vx(t){return HD(t,"__ignore_ng_zone__")}function Lx(t){return HD(t,"__scheduler_tick__")}function HD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var On=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Vf(e);for(;n&&Vf(n);)n=Vf(n);return n||null}},jx=new L("",{providedIn:"root",factory:()=>{let t=k(ye),e=k(On);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function Ux(){return ol(Ct(),Me())}function ol(t,e){return new Bn(Vt(t,e))}var Bn=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=Ux}}return t})();function qD(t){return(t.flags&128)===128}var zD=new Map,Bx=0;function $x(){return Bx++}function Hx(t){zD.set(t[tl],t)}function up(t){zD.delete(t[tl])}var gE="__ngContext__";function si(t,e){Dr(e)?(t[gE]=e[tl],Hx(e)):t[gE]=e}function GD(t){return KD(t[Zs])}function WD(t){return KD(t[Kt])}function KD(t){for(;t!==null&&!jn(t);)t=t[Kt];return t}var lp;function QD(t){lp=t}function qx(){if(lp!==void 0)return lp;if(typeof document<"u")return document;throw new U(210,!1)}var Zp=new L("",{providedIn:"root",factory:()=>zx}),zx="ng",Jp=new L(""),Rr=new L("",{providedIn:"platform",factory:()=>"unknown"});var Xp=new L("",{providedIn:"root",factory:()=>qx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Gx="h",Wx="b";var Kx=()=>null;function eg(t,e,n=!1){return Kx(t,e,n)}var YD=!1,Qx=new L("",{providedIn:"root",factory:()=>YD});var dp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qM})`}};function tg(t){return t instanceof dp?t.changingThisBreaksApplicationSecurity:t}function ZD(t){return t instanceof Function?t():t}var kn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(kn||{}),Yx;function ng(t,e){return Yx(t,e)}function co(t,e,n,r,i){if(r!=null){let o,s=!1;jn(r)?o=r:Dr(r)&&(s=!0,r=r[Ln]);let c=ln(r);t===0&&n!==null?i==null?nb(e,n,c):qu(e,n,c,i||null,!0):t===1&&n!==null?qu(e,n,c,i||null,!0):t===2?dP(e,c,s):t===3&&e.destroyNode(c),o!=null&&fP(e,t,o,n,i)}}function Zx(t,e){return t.createText(e)}function Jx(t,e,n){t.setValue(e,n)}function JD(t,e,n){return t.createElement(e,n)}function Xx(t,e){XD(t,e),e[Ln]=null,e[Yt]=null}function eP(t,e,n,r,i,o){r[Ln]=i,r[Yt]=e,sl(t,r,n,1,i,o)}function XD(t,e){e[xn].changeDetectionScheduler?.notify(9),sl(t,e,e[Ze],2,null,null)}function tP(t){let e=t[Zs];if(!e)return Lf(t[ce],t);for(;e;){let n=null;if(Dr(e))n=e[Zs];else{let r=e[Ot];r&&(n=r)}if(!n){for(;e&&!e[Kt]&&e!==t;)Dr(e)&&Lf(e[ce],e),e=e[gt];e===null&&(e=t),Dr(e)&&Lf(e[ce],e),n=e&&e[Kt]}e=n}}function nP(t,e,n,r){let i=Ot+r,o=n.length;r>0&&(n[i-1][Kt]=e),r<o-Ot?(e[Kt]=n[i],HE(n,Ot+r,e)):(n.push(e),e[Kt]=null),e[gt]=n;let s=e[yo];s!==null&&n!==s&&eb(s,e);let c=e[vo];c!==null&&c.insertView(t),Xf(e),e[W]|=128}function eb(t,e){let n=t[Fu],r=e[gt];if(Dr(r))t[W]|=Vu.HasTransplantedViews;else{let i=r[gt][un];e[un]!==i&&(t[W]|=Vu.HasTransplantedViews)}n===null?t[Fu]=[e]:n.push(e)}function rg(t,e){let n=t[Fu],r=n.indexOf(e);n.splice(r,1)}function hp(t,e){if(t.length<=Ot)return;let n=Ot+e,r=t[n];if(r){let i=r[yo];i!==null&&i!==t&&rg(i,r),e>0&&(t[n-1][Kt]=r[Kt]);let o=Nu(t,Ot+e);Xx(r[ce],r);let s=o[vo];s!==null&&s.detachView(o[ce]),r[gt]=null,r[Kt]=null,r[W]&=-129}return r}function tb(t,e){if(!(e[W]&256)){let n=e[Ze];n.destroyNode&&sl(t,e,n,3,null,null),tP(e)}}function Lf(t,e){if(e[W]&256)return;let n=pe(null);try{e[W]&=-129,e[W]|=256,e[Pt]&&cf(e[Pt]),iP(t,e),rP(t,e),e[ce].type===1&&e[Ze].destroy();let r=e[yo];if(r!==null&&jn(e[gt])){r!==e[gt]&&rg(r,e);let i=e[vo];i!==null&&i.detachView(t)}up(e)}finally{pe(n)}}function rP(t,e){let n=t.cleanup,r=e[Ou];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ou]=null);let i=e[Er];if(i!==null){e[Er]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function iP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof oi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];sn(4,c,u);try{u.call(c)}finally{sn(5,c,u)}}else{sn(4,i,o);try{o.call(i)}finally{sn(5,i,o)}}}}}function oP(t,e,n){return sP(t,e.parent,n)}function sP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ln];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===cn.None||o===cn.Emulated)return null}return Vt(r,n)}}function qu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function nb(t,e,n){t.appendChild(e,n)}function mE(t,e,n,r,i){r!==null?qu(t,e,n,r,i):nb(t,e,n)}function rb(t,e){return t.parentNode(e)}function aP(t,e){return t.nextSibling(e)}function cP(t,e,n){return lP(t,e,n)}function uP(t,e,n){return t.type&40?Vt(t,n):null}var lP=uP,yE;function ig(t,e,n,r){let i=oP(t,r,e),o=e[Ze],s=r.parent||e[Yt],c=cP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)mE(o,i,n[u],c,!1);else mE(o,i,n,c,!1);yE!==void 0&&yE(o,r,e,n,i)}function zs(t,e){if(e!==null){let n=e.type;if(n&3)return Vt(e,t);if(n&4)return fp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return zs(t,r);{let i=t[e.index];return jn(i)?fp(-1,i):ln(i)}}else{if(n&128)return zs(t,e.next);if(n&32)return ng(e,t)()||ln(t[e.index]);{let r=ib(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ri(t[un]);return zs(i,r)}else return zs(t,e.next)}}}return null}function ib(t,e){if(e!==null){let r=t[un][Yt],i=e.projection;return r.projection[i]}return null}function fp(t,e){let n=Ot+t+1;if(n<e.length){let r=e[n],i=r[ce].firstChild;if(i!==null)return zs(r,i)}return e[ni]}function dP(t,e,n){t.removeChild(null,e,n)}function og(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&si(ln(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)og(t,e,n.child,r,i,o,!1),co(e,t,i,c,o);else if(u&32){let l=ng(n,r),h;for(;h=l();)co(e,t,i,h,o);co(e,t,i,c,o)}else u&16?hP(t,e,r,n,i,o):co(e,t,i,c,o);n=s?n.projectionNext:n.next}}function sl(t,e,n,r,i,o){og(n,r,t.firstChild,e,i,o,!1)}function hP(t,e,n,r,i,o){let s=n[un],u=s[Yt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];co(e,t,i,h,o)}else{let l=u,h=s[gt];qD(r)&&(l.flags|=128),og(t,e,l,h,i,o,!0)}}function fP(t,e,n,r,i){let o=n[ni],s=ln(n);o!==s&&co(e,t,r,o,i);for(let c=Ot;c<n.length;c++){let u=n[c];sl(u[ce],u,t,e,r,o)}}function pP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:kn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=kn.Important),t.setStyle(n,r,i,o))}}function gP(t,e,n){t.setAttribute(e,"style",n)}function ob(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function sb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Wf(t,e,r),i!==null&&ob(t,e,i),o!==null&&gP(t,e,o)}var So={};function Lt(t=1){ab(Zt(),Me(),Co()+t,!1)}function ab(t,e,n,r){if(!r)if((e[W]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Cu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Tu(e,o,0,n)}ii(n)}function X(t,e=ne.Default){let n=Me();if(n===null)return oe(t,e);let r=Ct();return FD(r,n,ft(t),e)}function cb(t,e,n,r,i,o){let s=pe(null);try{let c=null;i&br.SignalBased&&(c=e[r][gr]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),i&br.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,r):aD(e,c,r,o)}finally{pe(s)}}function mP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ii(~i);else{let o=i,s=n[++r],c=n[++r];lx(s,o);let u=e[o];c(2,u)}}}finally{ii(-1)}}function al(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[Ln]=i,p[W]=r|4|128|8|64,(l!==null||t&&t[W]&2048)&&(p[W]|=2048),fD(p),p[gt]=p[bo]=t,p[Qt]=n,p[xn]=s||t&&t[xn],p[Ze]=c||t&&t[Ze],p[mo]=u||t&&t[mo]||null,p[Yt]=o,p[tl]=$x(),p[Pu]=h,p[iD]=l,p[un]=e.type==2?t[un]:p,p}function cl(t,e,n,r,i){let o=t.data[e];if(o===null)o=yP(t,e,n,r,i),ux()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ix();o.injectorIndex=s===null?-1:s.injectorIndex}return ra(o,!0),o}function yP(t,e,n,r,i){let o=vD(),s=_D(),c=s?o:o&&o.parent,u=t.data[e]=EP(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function ub(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function lb(t,e,n,r,i){let o=Co(),s=r&2;try{ii(-1),s&&e.length>Pn&&ab(t,e,Pn,!1),sn(s?2:0,i),n(r,i)}finally{ii(o),sn(s?3:1,i)}}function db(t,e,n){if(sD(e)){let r=pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{pe(r)}}}function hb(t,e,n){yD()&&(RP(t,e,n,Vt(n,e)),(n.flags&64)===64&&yb(t,e,n))}function fb(t,e,n=Vt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function pb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sg(t,e,n,r,i,o,s,c,u,l,h){let p=Pn+r,v=p+i,w=vP(p,v),S=typeof l=="function"?l():l;return w[ce]={type:t,blueprint:w,template:n,queries:null,viewQuery:c,declTNode:e,data:w.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function vP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:So);return n}function _P(t,e,n,r){let o=r.get(Qx,YD)||n===cn.ShadowDom,s=t.selectRootElement(e,o);return IP(s),s}function IP(t){wP(t)}var wP=()=>null;function EP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return tx()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vE(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let c,u=br.None;Array.isArray(s)?(c=s[0],u=s[1]):c=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?_E(r,n,l,c,u):_E(r,n,l,c)}return r}function _E(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function DP(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,c=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],v=n?n.get(p):null,w=v?v.inputs:null,S=v?v.outputs:null;u=vE(0,p.inputs,h,u,w),l=vE(1,p.outputs,h,l,S);let M=u!==null&&s!==null&&!Vp(e)?UP(u,h,s):null;c.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function bP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function CP(t,e,n,r,i,o,s,c){let u=Vt(e,n),l=e.inputs,h;!c&&l!=null&&(h=l[r])?(ag(t,n,h,r,i),nl(e)&&TP(n,e.index)):e.type&3?(r=bP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function TP(t,e){let n=Ar(e,t);n[W]&16||(n[W]|=64)}function gb(t,e,n,r){if(yD()){let i=r===null?null:{"":-1},o=NP(t,n),s,c;o===null?s=c=null:[s,c]=o,s!==null&&mb(t,e,n,s,i,c),i&&xP(n,r,i)}n.mergedAttrs=Qs(n.mergedAttrs,n.attrs)}function mb(t,e,n,r,i,o){for(let l=0;l<r.length;l++)rp(Bu(n,e),t,r[l].type);OP(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,c=!1,u=ub(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Qs(n.mergedAttrs,h.hostAttrs),kP(t,n,e,u,h),PP(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}DP(t,n,o)}function SP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;AP(s)!=c&&s.push(c),s.push(n,r,o)}}function AP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function RP(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;nl(n)&&FP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Bu(n,e),si(r,e);let s=n.initialInputs;for(let c=i;c<o;c++){let u=t.data[c],l=_o(e,t,c,n);if(si(l,e),s!==null&&jP(e,c-i,l,u,n,s),Cr(u)){let h=Ar(n.index,e);h[Qt]=_o(e,t,c,n)}}}function yb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=dx();try{ii(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];ep(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&MP(u,l)}}finally{ii(-1),ep(s)}}function MP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function NP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(wN(e,s.selectors,!1))if(r||(r=[]),Cr(s))if(s.findHostDirectiveDefs!==null){let c=[];i=i||new Map,s.findHostDirectiveDefs(s,c,i),r.unshift(...c,s);let u=c.length;pp(t,e,u)}else r.unshift(s),pp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function pp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function xP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}}function PP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Cr(e)&&(n[""]=t)}}function OP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function kP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ho(i.type,!0)),s=new oi(o,Cr(i),X);t.blueprint[r]=s,n[r]=s,SP(t,e,r,ub(t,n,i.hostVars,So),i)}function FP(t,e,n){let r=Vt(e,t),i=pb(n),o=t[xn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let c=ul(t,al(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=c}function VP(t,e,n,r,i,o){let s=Vt(t,e);LP(e[Ze],s,o,t.value,n,r,i)}function LP(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?Op(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function jP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;){let u=s[c++],l=s[c++],h=s[c++],p=s[c++];cb(r,n,u,l,h,p)}}function UP(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let c=0;c<s.length;c+=3)if(s[c]===e){r.push(o,s[c+1],s[c+2],n[i+1]);break}}i+=2}return r}function vb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function _b(t,e){let n=t.contentQueries;if(n!==null){let r=pe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];wD(o),c.contentQueries(2,e[s],s)}}}finally{pe(r)}}}function ul(t,e){return t[Zs]?t[iE][Kt]=e:t[Zs]=e,t[iE]=e,e}function gp(t,e,n){wD(0);let r=pe(null);try{e(t,n)}finally{pe(r)}}function BP(t){return t[Ou]??=[]}function $P(t){return t.cleanup??=[]}function Ib(t,e){let n=t[mo],r=n?n.get(On,null):null;r&&r.handleError(e)}function ag(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],c=n[o++],u=n[o++],l=e[s],h=t.data[s];cb(h,l,r,c,u,i)}}function HP(t,e,n){let r=dD(e,t);Jx(t[Ze],r,n)}function qP(t,e){let n=Ar(e,t),r=n[ce];zP(r,n);let i=n[Ln];i!==null&&n[Pu]===null&&(n[Pu]=eg(i,n[mo])),cg(r,n,n[Qt])}function zP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function cg(t,e,n){Hp(e);try{let r=t.viewQuery;r!==null&&gp(1,r,n);let i=t.template;i!==null&&lb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[vo]?.finishViewCreation(t),t.staticContentQueries&&_b(t,e),t.staticViewQueries&&gp(2,t.viewQuery,n);let o=t.components;o!==null&&GP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[W]&=-5,qp()}}function GP(t,e){for(let n=0;n<e.length;n++)qP(t,e[n])}function WP(t,e,n,r){let i=pe(null);try{let o=e.tView,c=t[W]&4096?4096:16,u=al(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[yo]=l;let h=t[vo];return h!==null&&(u[vo]=h.createEmbeddedView(o)),cg(o,u,n),u}finally{pe(i)}}function IE(t,e){return!e||e.firstChild===null||qD(t)}function KP(t,e,n,r=!0){let i=e[ce];if(nP(i,e,t,n),r){let s=fp(n,t),c=e[Ze],u=rb(c,t[ni]);u!==null&&eP(i,t[Yt],c,e,u,s)}let o=e[Pu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function zu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(ln(o)),jn(o)&&QP(o,r);let s=n.type;if(s&8)zu(t,e,n.child,r);else if(s&32){let c=ng(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=ib(e,n);if(Array.isArray(c))r.push(...c);else{let u=ri(e[un]);zu(u[ce],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function QP(t,e){for(let n=Ot;n<t.length;n++){let r=t[n],i=r[ce].firstChild;i!==null&&zu(r[ce],r,i,e)}t[ni]!==t[Ln]&&e.push(t[ni])}var wb=[];function YP(t){return t[Pt]??ZP(t)}function ZP(t){let e=wb.pop()??Object.create(XP);return e.lView=t,e}function JP(t){t.lView[Pt]!==t&&(t.lView=null,wb.push(t))}var XP=te(O({},Bs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{il(t.lView)},consumerOnSignalRead(){this.lView[Pt]=this}});function eO(t){let e=t[Pt]??Object.create(tO);return e.lView=t,e}var tO=te(O({},Bs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ri(t.lView);for(;e&&!Eb(e[ce]);)e=ri(e);e&&pD(e)},consumerOnSignalRead(){this.lView[Pt]=this}});function Eb(t){return t.type!==2}var nO=100;function Db(t,e=!0,n=0){let r=t[xn],i=r.rendererFactory,o=!1;o||i.begin?.();try{rO(t,n)}catch(s){throw e&&Ib(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function rO(t,e){let n=ID();try{sE(!0),mp(t,e);let r=0;for(;rl(t);){if(r===nO)throw new U(103,!1);r++,mp(t,1)}}finally{sE(n)}}function iO(t,e,n,r){let i=e[W];if((i&256)===256)return;let o=!1,s=!1;!o&&e[xn].inlineEffectRunner?.flush(),Hp(e);let c=!0,u=null,l=null;o||(Eb(t)?(l=YP(e),u=Gc(l)):lw()===null?(c=!1,l=eO(e),u=Gc(l)):e[Pt]&&(cf(e[Pt]),e[Pt]=null));try{fD(e),ax(t.bindingStartIndex),n!==null&&lb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let w=t.preOrderCheckHooks;w!==null&&Cu(e,w,null)}else{let w=t.preOrderHooks;w!==null&&Tu(e,w,0,null),Of(e,0)}if(s||oO(e),bb(e,0),t.contentQueries!==null&&_b(t,e),!o)if(h){let w=t.contentCheckHooks;w!==null&&Cu(e,w)}else{let w=t.contentHooks;w!==null&&Tu(e,w,1),Of(e,1)}mP(t,e);let p=t.components;p!==null&&Tb(e,p,0);let v=t.viewQuery;if(v!==null&&gp(2,v,r),!o)if(h){let w=t.viewCheckHooks;w!==null&&Cu(e,w)}else{let w=t.viewHooks;w!==null&&Tu(e,w,2),Of(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Pf]){for(let w of e[Pf])w();e[Pf]=null}o||(e[W]&=-73)}catch(h){throw o||il(e),h}finally{l!==null&&(sf(l,u),c&&JP(l)),qp()}}function bb(t,e){for(let n=GD(t);n!==null;n=WD(n))for(let r=Ot;r<n.length;r++){let i=n[r];Cb(i,e)}}function oO(t){for(let e=GD(t);e!==null;e=WD(e)){if(!(e[W]&Vu.HasTransplantedViews))continue;let n=e[Fu];for(let r=0;r<n.length;r++){let i=n[r];pD(i)}}}function sO(t,e,n){let r=Ar(e,t);Cb(r,n)}function Cb(t,e){Bp(t)&&mp(t,e)}function mp(t,e){let r=t[ce],i=t[W],o=t[Pt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&af(o)),s||=!1,o&&(o.dirty=!1),t[W]&=-9217,s)iO(r,t,r.template,t[Qt]);else if(i&8192){bb(t,1);let c=r.components;c!==null&&Tb(t,c,1)}}function Tb(t,e,n){for(let r=0;r<e.length;r++)sO(t,e[r],n)}function ug(t,e){let n=ID()?64:1088;for(t[xn].changeDetectionScheduler?.notify(e);t;){t[W]|=n;let r=ri(t);if(Zf(t)&&!r)return t;t=r}return null}var ai=class{get rootNodes(){let e=this._lView,n=e[ce];return zu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qt]}set context(e){this._lView[Qt]=e}get destroyed(){return(this._lView[W]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gt];if(jn(e)){let n=e[ku],r=n?n.indexOf(this):-1;r>-1&&(hp(e,r),Nu(n,r))}this._attachedToViewContainer=!1}tb(this._lView[ce],this._lView)}onDestroy(e){gD(this._lView,e)}markForCheck(){ug(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[W]&=-129}reattach(){Xf(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,Db(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zf(this._lView),n=this._lView[yo];n!==null&&!e&&rg(n,this._lView),XD(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let n=Zf(this._lView),r=this._lView[yo];r!==null&&!n&&eb(r,this._lView),Xf(this._lView)}},ll=(()=>{class t{static{this.__NG_ELEMENT_ID__=uO}}return t})(),aO=ll,cO=class extends aO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=WP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ai(i)}};function uO(){return lO(Ct(),Me())}function lO(t,e){return t.type&4?new cO(e,t,ol(t,e)):null}var G3=new RegExp(`^(\\d+)*(${Wx}|${Gx})*(.*)`);var dO=()=>null;function wE(t,e){return dO(t,e)}var Io=class{},dl=new L("",{providedIn:"root",factory:()=>!1});var Sb=new L(""),Ab=new L(""),yp=class{},Gu=class{};function hO(t){let e=Error(`No component factory found for ${pt(t)}.`);return e[fO]=t,e}var fO="ngComponent";var vp=class{resolveComponentFactory(e){throw hO(e)}},wo=class{static{this.NULL=new vp}},Eo=class{},Mr=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>pO()}}return t})();function pO(){let t=Me(),e=Ct(),n=Ar(e.index,t);return(Dr(n)?n:t)[Ze]}var gO=(()=>{class t{static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>null})}}return t})();function _p(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Kw(i,c);else if(o==2){let u=c,l=e[++s];r=Kw(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Wu=class extends wo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ti(e);return new Js(n,this.ngModule)}};function EE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,c=o?i[1]:br.None;e?n.push({propName:s,templateName:r,isSignal:(c&br.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function mO(t){let e=t.toLowerCase();return e==="svg"?GN:e==="math"?WN:null}var Js=class extends Gu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=EE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return EE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=CN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=pe(null);try{i=i||this.ngModule;let s=i instanceof kt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let c=s?new tp(e,s):e,u=c.get(Eo,null);if(u===null)throw new U(407,!1);let l=c.get(gO,null),h=c.get(Io,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},v=u.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",S=r?_P(v,r,this.componentDef.encapsulation,c):JD(v,w,mO(w)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let R=null;S!==null&&(R=eg(S,c,!0));let F=sg(0,null,null,1,0,null,null,null,null,null,null),$=al(null,F,null,M,null,null,p,v,c,null,R);Hp($);let q,re,Se=null;try{let Q=this.componentDef,D,y=null;Q.findHostDirectiveDefs?(D=[],y=new Map,Q.findHostDirectiveDefs(Q,D,y),D.push(Q)):D=[Q];let _=yO($,S);Se=vO(_,S,Q,D,$,p,v),re=hD(F,Pn),S&&wO(v,Q,S,r),n!==void 0&&EO(re,this.ngContentSelectors,n),q=IO(Se,Q,D,y,$,[DO]),cg(F,$,null)}catch(Q){throw Se!==null&&up(Se),up($),Q}finally{qp()}return new Ip(this.componentType,q,ol(re,$),$,re)}finally{pe(o)}}},Ip=class extends yp{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ai(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ag(o[ce],o,i,e,n),this.previousInputValues.set(e,n);let s=Ar(this._tNode.index,o);ug(s,1)}}get injector(){return new ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yO(t,e){let n=t[ce],r=Pn;return t[r]=e,cl(n,r,2,"#host",null)}function vO(t,e,n,r,i,o,s){let c=i[ce];_O(r,t,e,s);let u=null;e!==null&&(u=eg(e,i[mo]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=al(i,pb(n),null,h,i[t.index],t,o,l,null,null,u);return c.firstCreatePass&&pp(c,t,r.length-1),ul(i,p),i[t.index]=p}function _O(t,e,n,r){for(let i of t)e.mergedAttrs=Qs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_p(e,e.mergedAttrs,!0),n!==null&&sb(r,n,e))}function IO(t,e,n,r,i,o){let s=Ct(),c=i[ce],u=Vt(s,i);mb(c,i,s,n,null,r);for(let h=0;h<n.length;h++){let p=s.directiveStart+h,v=_o(i,c,p,s);si(v,i)}yb(c,i,s),u&&si(u,i);let l=_o(i,c,s.directiveStart+s.componentOffset,s);if(t[Qt]=i[Qt]=l,o!==null)for(let h of o)h(l,e);return db(c,s,i),l}function wO(t,e,n,r){if(r)Wf(t,n,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=TN(e.selectors[0]);i&&Wf(t,n,i),o&&o.length>0&&ob(t,n,o.join(" "))}}function EO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function DO(){let t=Ct();Wp(Me()[ce],t)}var Ao=(()=>{class t{static{this.__NG_ELEMENT_ID__=bO}}return t})();function bO(){let t=Ct();return TO(t,Me())}var CO=Ao,Rb=class extends CO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ol(this._hostTNode,this._hostLView)}get injector(){return new ei(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kp(this._hostTNode,this._hostLView);if(MD(e)){let n=Uu(e,this._hostLView),r=ju(e),i=n[ce].data[r+8];return new ei(i,n)}else return new ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=DE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=wE(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,IE(this._hostTNode,s)),c}createComponent(e,n,r,i,o){let s=e&&!$N(e),c;if(s)c=n;else{let S=n||{};c=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new Js(ti(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(kt,null);M&&(o=M)}let h=ti(u.componentType??{}),p=wE(this._lContainer,h?.id??null),v=p?.firstChild??null,w=u.create(l,i,v,o);return this.insertImpl(w.hostView,c,IE(this._hostTNode,p)),w}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(QN(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[gt],l=new Rb(u,u[Yt],u[gt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return KP(s,i,o,r),e.attachToViewContainerRef(),HE(jf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=DE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=hp(this._lContainer,n);r&&(Nu(jf(this._lContainer),n),tb(r[ce],r))}detach(e){let n=this._adjustIndex(e,-1),r=hp(this._lContainer,n);return r&&Nu(jf(this._lContainer),n)!=null?new ai(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function DE(t){return t[ku]}function jf(t){return t[ku]||(t[ku]=[])}function TO(t,e){let n,r=e[t.index];return jn(r)?n=r:(n=vb(r,e,null,t),e[t.index]=n,ul(e,n)),AO(n,e,t,r),new Rb(n,t,e)}function SO(t,e){let n=t[Ze],r=n.createComment(""),i=Vt(e,t),o=rb(n,i);return qu(n,o,r,aP(n,i),!1),r}var AO=NO,RO=()=>!1;function MO(t,e,n){return RO(t,e,n)}function NO(t,e,n,r){if(t[ni])return;let i;n.type&8?i=ln(r):i=SO(e,n),t[ni]=i}var bE=new Set;function ia(t){bE.has(t)||(bE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function oa(t,e){ia("NgSignals");let n=ww(t),r=n[gr];return e?.equal&&(r.equal=e.equal),n.set=i=>uf(r,i),n.update=i=>Ew(r,i),n.asReadonly=xO.bind(n),n}function xO(){let t=this[gr];if(t.readonlyFn===void 0){let e=()=>this();e[gr]=t,t.readonlyFn=e}return t.readonlyFn}function PO(t){return Object.getPrototypeOf(t.prototype).constructor}function jt(t){let e=PO(t.type),n=!0,r=[t];for(;e;){let i;if(Cr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=wu(t.inputs),s.inputTransforms=wu(t.inputTransforms),s.declaredInputs=wu(t.declaredInputs),s.outputs=wu(t.outputs);let c=i.hostBindings;c&&LO(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&FO(t,u),l&&VO(t,l),OO(t,i),GM(t.outputs,i.outputs),Cr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===jt&&(n=!1)}}e=Object.getPrototypeOf(e)}kO(r)}function OO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function kO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qs(i.hostAttrs,n=Qs(n,i.hostAttrs))}}function wu(t){return t===fo?{}:t===xt?[]:t}function FO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function VO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function LO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Tr=class{},Xs=class{};var wp=class extends Tr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wu(this);let o=ZE(e);this._bootstrapComponents=ZD(o.bootstrap),this._r3Injector=jD(e,n,[{provide:Tr,useValue:this},{provide:wo,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ep=class extends Xs{constructor(e){super(),this.moduleType=e}create(e){return new wp(this.moduleType,e,[])}};var Ku=class extends Tr{constructor(e){super(),this.componentFactoryResolver=new Wu(this),this.instance=null;let n=new Ys([...e.providers,{provide:Tr,useValue:this},{provide:wo,useValue:this.componentFactoryResolver}],e.parent||jp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function lg(t,e,n=null){return new Ku({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Mb(t){return UO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function jO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function UO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function hl(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function BO(t){return(t.flags&32)===32}function $O(t,e,n,r,i,o,s,c,u){let l=e.consts,h=cl(e,t,4,s||null,c||null);gb(e,n,h,Lu(l,u)),Wp(e,h);let p=h.tView=sg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function HO(t,e,n,r,i,o,s,c,u,l){let h=n+Pn,p=e.firstCreatePass?$O(h,e,t,r,i,o,s,c,u):e.data[h];ra(p,!1);let v=qO(e,t,p,n);zp()&&ig(e,t,v,p),si(v,t);let w=vb(v,t,v,p);return t[h]=w,ul(t,w),MO(w,p,t),Up(p)&&hb(e,t,p),u!=null&&fb(t,p,l),p}function Ro(t,e,n,r,i,o,s,c){let u=Me(),l=Zt(),h=Lu(l.consts,o);return HO(u,l,t,e,n,r,i,h,s,c),Ro}var qO=zO;function zO(t,e,n,r){return Gp(!0),e[Ze].createComment("")}var Gs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Gs||{}),GO=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}}return t})(),CE=class t{constructor(){this.ngZone=k(ye),this.scheduler=k(Io),this.errorHandler=k(On,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Gs.EarlyRead,Gs.Write,Gs.MixedReadWrite,Gs.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}};function fl(t,e,n,r){let i=Me(),o=$p();if(hl(i,o,e)){let s=Zt(),c=SD();VP(c,i,t,e,n,r)}return fl}function WO(t,e,n,r){return hl(t,$p(),n)?e+Op(n)+r:So}function Eu(t,e){return t<<17|e<<2}function ci(t){return t>>17&32767}function KO(t){return(t&2)==2}function QO(t,e){return t&131071|e<<17}function Dp(t){return t|2}function Do(t){return(t&131068)>>2}function Uf(t,e){return t&-131069|e<<2}function YO(t){return(t&1)===1}function bp(t){return t|1}function ZO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=ci(s),u=Do(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||na(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let v=ci(t[c+1]);t[r+1]=Eu(v,c),v!==0&&(t[v+1]=Uf(t[v+1],r)),t[c+1]=QO(t[c+1],r)}else t[r+1]=Eu(c,0),c!==0&&(t[c+1]=Uf(t[c+1],r)),c=r;else t[r+1]=Eu(u,0),c===0?c=r:t[u+1]=Uf(t[u+1],r),u=r;l&&(t[r+1]=Dp(t[r+1])),TE(t,h,r,!0),TE(t,h,r,!1),JO(e,h,t,r,o),s=Eu(c,u),o?e.classBindings=s:e.styleBindings=s}function JO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&na(o,e)>=0&&(n[r+1]=bp(n[r+1]))}function TE(t,e,n,r){let i=t[n+1],o=e===null,s=r?ci(i):Do(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];XO(u,e)&&(c=!0,t[s+1]=r?bp(l):Dp(l)),s=r?ci(l):Do(l)}c&&(t[n+1]=r?Dp(i):bp(i))}function XO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?na(t,e)>=0:!1}function Tt(t,e,n){let r=Me(),i=$p();if(hl(r,i,e)){let o=Zt(),s=SD();CP(o,s,r,t,e,r[Ze],n,!1)}return Tt}function SE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";ag(t,n,o[s],s,r)}function pl(t,e){return ek(t,e,null,!0),pl}function ek(t,e,n,r){let i=Me(),o=Zt(),s=cx(2);if(o.firstUpdatePass&&nk(o,t,s,r),e!==So&&hl(i,s,e)){let c=o.data[Co()];ak(o,c,i,i[Ze],t,i[s+1]=ck(e,n),r,s)}}function tk(t,e){return e>=t.expandoStartIndex}function nk(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Co()],s=tk(t,n);uk(o,r)&&e===null&&!s&&(e=!1),e=rk(i,o,e,r),ZO(i,o,e,n,s,r)}}function rk(t,e,n,r){let i=hx(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Bf(null,t,e,n,r),n=ea(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Bf(i,t,e,n,r),o===null){let u=ik(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Bf(null,t,e,u[1],r),u=ea(u,e.attrs,r),ok(t,e,r,u))}else o=sk(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function ik(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Do(r)!==0)return t[ci(r)]}function ok(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ci(i)]=r}function sk(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ea(r,s,n)}return ea(r,e.attrs,n)}function Bf(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=ea(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ea(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),hN(t,s,n?!0:e[++o]))}return t===void 0?null:t}function ak(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=YO(l)?AE(u,e,n,i,Do(l),s):void 0;if(!Qu(h)){Qu(o)||KO(l)&&(o=AE(u,null,n,i,c,s));let p=dD(Co(),n);pP(r,s,p,i,o)}}function AE(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,v=n[i+1];v===So&&(v=p?xt:void 0);let w=p?Nf(v,r):h===r?v:void 0;if(l&&!Qu(w)&&(w=Nf(u,r)),Qu(w)&&(c=w,s))return c;let S=t[i+1];i=s?ci(S):Do(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Nf(u,r))}return c}function Qu(t){return t!==void 0}function ck(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pt(tg(t)))),t}function uk(t,e){return(t.flags&(e?8:16))!==0}function lk(t,e,n,r,i,o){let s=e.consts,c=Lu(s,i),u=cl(e,t,2,r,c);return gb(e,n,u,Lu(s,o)),u.attrs!==null&&_p(u,u.attrs,!1),u.mergedAttrs!==null&&_p(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ee(t,e,n,r){let i=Me(),o=Zt(),s=Pn+t,c=i[Ze],u=o.firstCreatePass?lk(s,o,i,e,n,r):o.data[s],l=dk(o,i,u,c,e,t);i[s]=l;let h=Up(u);return ra(u,!0),sb(c,l,u),!BO(u)&&zp()&&ig(o,i,l,u),JN()===0&&si(l,i),XN(),h&&(hb(o,i,u),db(o,u,i)),r!==null&&fb(i,u),Ee}function Te(){let t=Ct();_D()?ox():(t=t.parent,ra(t,!1));let e=t;nx(e)&&rx(),ex();let n=Zt();return n.firstCreatePass&&(Wp(n,t),sD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&_x(e)&&SE(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ix(e)&&SE(n,e,Me(),e.stylesWithoutHost,!1),Te}function mt(t,e,n,r){return Ee(t,e,n,r),Te(),mt}var dk=(t,e,n,r,i,o)=>(Gp(!0),JD(r,i,gx()));function sa(){return Me()}var Yu="en-US";var hk=Yu;function fk(t){typeof t=="string"&&(hk=t.toLowerCase().replace(/_/g,"-"))}var pk=(t,e,n)=>{};function Je(t,e,n,r){let i=Me(),o=Zt(),s=Ct();return mk(o,i,i[Ze],s,t,e,r),Je}function gk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[Ou],u=i[o+2];return c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function mk(t,e,n,r,i,o,s){let c=Up(r),l=t.firstCreatePass&&$P(t),h=e[Qt],p=BP(e),v=!0;if(r.type&3||s){let M=Vt(r,e),R=s?s(M):M,F=p.length,$=s?re=>s(ln(re[r.index])):r.index,q=null;if(!s&&c&&(q=gk(t,e,i,r.index)),q!==null){let re=q.__ngLastListenerFn__||q;re.__ngNextListenerFn__=o,q.__ngLastListenerFn__=o,v=!1}else{o=ME(r,e,h,o),pk(M,i,o);let re=n.listen(R,i,o);p.push(o,re),l&&l.push(i,$,F,F+1)}}else o=ME(r,e,h,o);let w=r.outputs,S;if(v&&w!==null&&(S=w[i])){let M=S.length;if(M)for(let R=0;R<M;R+=2){let F=S[R],$=S[R+1],Se=e[F][$].subscribe(o),Q=p.length;p.push(o,Se),l&&l.push(i,r.index,Q,-(Q+1))}}}function RE(t,e,n,r){let i=pe(null);try{return sn(6,e,n),n(r)!==!1}catch(o){return Ib(t,o),!1}finally{sn(7,e,n),pe(i)}}function ME(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Ar(t.index,e):e;ug(s,5);let c=RE(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)c=RE(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return c}}function fn(t=1){return px(t)}function Nb(t){let e=sx();return KN(e,Pn+t)}function Xe(t,e=""){let n=Me(),r=Zt(),i=t+Pn,o=r.firstCreatePass?cl(r,i,1,e,null):r.data[i],s=yk(r,n,o,e,t);n[i]=s,zp()&&ig(r,n,s,o),ra(o,!1)}var yk=(t,e,n,r,i)=>(Gp(!0),Zx(e[Ze],r));function gl(t){return ml("",t,""),gl}function ml(t,e,n){let r=Me(),i=WO(r,t,e,n);return i!==So&&HP(r,Co(),i),ml}function vk(t,e,n){let r=Zt();if(r.firstCreatePass){let i=Cr(t);Cp(n,r.data,r.blueprint,i,!0),Cp(e,r.data,r.blueprint,i,!1)}}function Cp(t,e,n,r,i){if(t=ft(t),Array.isArray(t))for(let o=0;o<t.length;o++)Cp(t[o],e,n,r,i);else{let o=Zt(),s=Me(),c=Ct(),u=go(t)?t:ft(t.provide),l=rD(t),h=c.providerIndexes&1048575,p=c.directiveStart,v=c.providerIndexes>>20;if(go(t)||!t.multi){let w=new oi(l,i,X),S=Hf(u,e,i?h:h+v,p);S===-1?(rp(Bu(c,s),o,u),$f(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(w),s.push(w)):(n[S]=w,s[S]=w)}else{let w=Hf(u,e,h+v,p),S=Hf(u,e,h,h+v),M=w>=0&&n[w],R=S>=0&&n[S];if(i&&!R||!i&&!M){rp(Bu(c,s),o,u);let F=wk(i?Ik:_k,n.length,i,r,l);!i&&R&&(n[S].providerFactory=F),$f(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(F),s.push(F)}else{let F=xb(n[i?S:w],l,!i&&r);$f(o,t,w>-1?w:S,F)}!i&&r&&R&&n[S].componentProviders++}}}function $f(t,e,n,r){let i=go(e),o=ON(e);if(i||o){let u=(o?ft(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function xb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Hf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function _k(t,e,n,r){return Tp(this.multi,[])}function Ik(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,c=_o(n,n[ce],this.providerFactory.index,r);o=c.slice(0,s),Tp(i,o);for(let u=s;u<c.length;u++)o.push(c[u])}else o=[],Tp(i,o);return o}function Tp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function wk(t,e,n,r,i){let o=new oi(t,n,X);return o.multi=[],o.index=e,o.componentProviders=0,xb(o,i,r&&!n),o}function Nr(t,e=[]){return n=>{n.providersResolver=(r,i)=>vk(r,i?i(t):t,e)}}var Ek=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=eD(!1,n.type),i=r.length>0?lg([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:t,providedIn:"environment",factory:()=>new t(oe(kt))})}}return t})();function pn(t){ia("NgStandalone"),t.getStandaloneInjector=e=>e.get(Ek).getOrCreateStandaloneInjector(t)}var Fn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Pb=new Fn("18.2.10");var yl=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var Ob=new L("");function fi(t){return!!t&&typeof t.then=="function"}function kb(t){return!!t&&typeof t.subscribe=="function"}var vl=new L(""),Fb=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=k(vl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(fi(o))n.push(o);else if(kb(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),dg=new L("");function Dk(){Iw(()=>{throw new U(600,!1)})}function bk(t){return t.isBoundToModule}var Ck=10;function Tk(t,e,n){try{let r=n();return fi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var pi=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(jx),this.afterRenderManager=k(GO),this.zonelessEnabled=k(dl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Qe,this.afterTick=new Qe,this.componentTypes=[],this.components=[],this.isStable=k(To).hasPendingTasks.pipe(ie(n=>!n)),this._injector=k(kt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Gu;if(!this._injector.get(Fb).done){let v=!i&&YE(n),w=!1;throw new U(405,w)}let s;i?s=n:s=this._injector.get(wo).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let c=bk(s)?void 0:this._injector.get(Tr),u=r||s.selector,l=s.create(at.NULL,[],u,c),h=l.location.nativeElement,p=l.injector.get(Ob,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Su(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new U(101,!1);let n=pe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,pe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Eo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Ck;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Sk(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>rl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Su(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(dg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Su(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Su(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Sk(t,e,n,r){if(!n&&!rl(t))return;Db(t,e,n&&!r?0:1)}var Sp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},hg=(()=>{class t{compileModuleSync(n){return new Ep(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ZE(n),o=ZD(i.declarations).reduce((s,c)=>{let u=ti(c);return u&&s.push(new Js(u)),s},[]);return new Sp(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ak=(()=>{class t{constructor(){this.zone=k(ye),this.changeDetectionScheduler=k(Io),this.applicationRef=k(pi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Rk=new L("",{factory:()=>!1});function Vb({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ye(te(O({},jb()),{scheduleInRootZone:n})),[{provide:ye,useFactory:t},{provide:po,multi:!0,useFactory:()=>{let r=k(Ak,{optional:!0});return()=>r.initialize()}},{provide:po,multi:!0,useFactory:()=>{let r=k(Mk);return()=>{r.initialize()}}},e===!0?{provide:Sb,useValue:!0}:[],{provide:Ab,useValue:n??UD}]}function Lb(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Vb({ngZoneFactory:()=>{let i=jb(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ia("NgZone_CoalesceEvent"),new ye(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ft([{provide:Rk,useValue:!0},{provide:dl,useValue:!1},r])}function jb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Mk=(()=>{class t{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=k(ye),this.pendingTasks=k(To)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nk=(()=>{class t{constructor(){this.appRef=k(pi),this.taskService=k(To),this.ngZone=k(ye),this.zonelessEnabled=k(dl),this.disableScheduling=k(Sb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Re,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Hu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Ab,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?hE:$D;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Hu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function xk(){return typeof $localize<"u"&&$localize.locale||Yu}var fg=new L("",{providedIn:"root",factory:()=>k(fg,ne.Optional|ne.SkipSelf)||xk()});var Ap=new L("");function Du(t){return!t.moduleRef}function Pk(t){let e=Du(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ye);return n.run(()=>{Du(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(On,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Du(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Ap);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Ap);s.add(o),t.moduleRef.onDestroy(()=>{Su(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Tk(r,n,()=>{let o=e.get(Fb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(fg,Yu);if(fk(s||Yu),Du(t)){let c=e.get(pi);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return Ok(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Ok(t,e){let n=t.injector.get(pi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new U(-403,!1);e.push(t)}var Au=null;function kk(t=[],e){return at.create({name:e,providers:[{provide:el,useValue:"platform"},{provide:Ap,useValue:new Set([()=>Au=null])},...t]})}function Fk(t=[]){if(Au)return Au;let e=kk(t);return Au=e,Dk(),Vk(e),e}function Vk(t){t.get(Jp,null)?.forEach(n=>n())}var Mo=(()=>{class t{static{this.__NG_ELEMENT_ID__=Lk}}return t})();function Lk(t){return jk(Ct(),Me(),(t&16)===16)}function jk(t,e,n){if(nl(t)&&!n){let r=Ar(t.index,e);return new ai(r,r)}else if(t.type&175){let r=e[un];return new ai(r,e)}return null}var Rp=class{constructor(){}supports(e){return Mb(e)}create(e){return new Mp(e)}},Uk=(t,e)=>e,Mp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Uk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<NE(r,i,o)?n:r,c=NE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,h=u-i;if(l!=h){for(let v=0;v<l;v++){let w=v<o.length?o[v]:o[v]=0,S=w+v;h<=S&&S<l&&(o[v]=w+1)}let p=s.previousIndex;o[p]=h-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Mb(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,c),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,jO(e,c=>{s=this._trackByFn(i,c),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,c,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,s,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Np(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Np=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Zu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new xp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function NE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function xE(){return new pg([new Rp])}var pg=(()=>{class t{static{this.\u0275prov=z({token:t,providedIn:"root",factory:xE})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||xE()),deps:[[t,new $E,new qe]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new U(901,!1)}}return t})();function Ub(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Fk(r),o=[Vb({}),{provide:Io,useExisting:Nk},...n||[]],s=new Ku({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Pk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function _l(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function aa(t,e){ia("NgSignals");let n=yw(t);return e?.equal&&(n[gr].equal=e.equal),n}function $n(t){let e=pe(null);try{return t()}finally{pe(e)}}var zb=null;function qn(){return zb}function Gb(t){zb??=t}var Il=class{};var Ut=new L(""),Wb=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>k(Hk),providedIn:"platform"})}}return t})();var Hk=(()=>{class t extends Wb{constructor(){super(),this._doc=k(Ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(n){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Kb(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Bb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function gi(t){return t&&t[0]!=="?"?"?"+t:t}var El=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>k(Qb),providedIn:"root"})}}return t})(),qk=new L(""),Qb=(()=>{class t extends El{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Kb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+gi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+gi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+gi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(oe(Wb),oe(qk,8))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ca=(()=>{class t{constructor(n){this._subject=new Fe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Wk(Bb($b(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+gi(r))}normalize(n){return t.stripTrailingSlash(Gk(this._basePath,$b(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=gi}static{this.joinWithSlash=Kb}static{this.stripTrailingSlash=Bb}static{this.\u0275fac=function(r){return new(r||t)(oe(El))}}static{this.\u0275prov=z({token:t,factory:()=>zk(),providedIn:"root"})}}return t})();function zk(){return new ca(oe(El))}function Gk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function $b(t){return t.replace(/\/index.html$/,"")}function Wk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Yb(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var gg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zb=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new gg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),Hb(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Hb(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(X(Ao),X(ll),X(pg))}}static{this.\u0275dir=Oe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function Hb(t,e){t.context.$implicit=e.item}var Jb=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new mg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){qb("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){qb("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(X(Ao),X(ll))}}static{this.\u0275dir=Oe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),mg=class{constructor(){this.$implicit=null,this.ngIf=null}};function qb(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${pt(e)}'.`)}var yg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=li({type:t})}static{this.\u0275inj=ui({})}}return t})(),Xb="browser",Kk="server";function vg(t){return t===Kk}var wl=class{};var wg=class extends Il{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Eg=class t extends wg{static makeCurrent(){Gb(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Yk();return n==null?null:Zk(n)}resetBaseElement(){ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yb(document.cookie,e)}},ua=null;function Yk(){return ua=ua||document.querySelector("base"),ua?ua.getAttribute("href"):null}function Zk(t){return new URL(t,document.baseURI).pathname}var Jk=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),Dg=new L(""),rC=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(oe(Dg),oe(ye))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),Dl=class{constructor(e){this._doc=e}},_g="ng-app-id",iC=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vg(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${_g}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(_g),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(_g,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(oe(Ut),oe(Zp),oe(Xp,8),oe(Rr))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),Ig={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cg=/%COMP%/g,oC="%COMP%",Xk=`_nghost-${oC}`,e1=`_ngcontent-${oC}`,t1=!0,n1=new L("",{providedIn:"root",factory:()=>t1});function r1(t){return e1.replace(Cg,t)}function i1(t){return Xk.replace(Cg,t)}function sC(t,e){return e.map(n=>n.replace(Cg,t))}var eC=(()=>{class t{constructor(n,r,i,o,s,c,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=vg(c),this.defaultRenderer=new la(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cn.ShadowDom&&(r=te(O({},r),{encapsulation:cn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof bl?i.applyToHost(n):i instanceof da&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case cn.Emulated:o=new bl(u,l,r,this.appId,h,s,c,p);break;case cn.ShadowDom:return new bg(u,l,n,r,s,c,this.nonce,p);default:o=new da(u,l,r,h,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(oe(rC),oe(iC),oe(Zp),oe(n1),oe(Ut),oe(Rr),oe(ye),oe(Xp))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),la=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ig[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(tC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(tC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Ig[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ig[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(kn.DashCase|kn.Important)?e.style.setProperty(n,r,i&kn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&kn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function tC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var bg=class extends la{constructor(e,n,r,i,o,s,c,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=sC(i.id,i.styles);for(let h of l){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},da=class extends la{constructor(e,n,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?sC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bl=class extends da{constructor(e,n,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,n,r,o,s,c,u,l),this.contentAttr=r1(l),this.hostAttr=i1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},o1=(()=>{class t extends Dl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(oe(Ut))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})(),nC=["alt","control","meta","shift"],s1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},a1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},c1=(()=>{class t extends Dl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),nC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=s1[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),nC.forEach(s=>{if(s!==i){let c=a1[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(oe(Ut))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac})}}return t})();function aC(t,e){return Ub(O({rootComponent:t},u1(e)))}function u1(t){return{appProviders:[...p1,...t?.providers??[]],platformProviders:f1}}function l1(){Eg.makeCurrent()}function d1(){return new On}function h1(){return QD(document),document}var f1=[{provide:Rr,useValue:Xb},{provide:Jp,useValue:l1,multi:!0},{provide:Ut,useFactory:h1,deps:[]}];var p1=[{provide:el,useValue:"root"},{provide:On,useFactory:d1,deps:[]},{provide:Dg,useClass:o1,multi:!0,deps:[Ut,ye,Rr]},{provide:Dg,useClass:c1,multi:!0,deps:[Ut]},eC,iC,rC,{provide:Eo,useExisting:eC},{provide:wl,useClass:Jk,deps:[]},[]];var cC=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(oe(Ut))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ee="primary",Aa=Symbol("RouteTitle"),Mg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fo(t){return new Mg(t)}function m1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function y1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!gn(t[n],e[n]))return!1;return!0}function gn(t,e){let n=t?Ng(t):void 0,r=e?Ng(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!mC(t[i],e[i]))return!1;return!0}function Ng(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function mC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function yC(t){return t.length>0?t[t.length-1]:null}function xr(t){return Df(t)?t:fi(t)?Pe(Promise.resolve(t)):Z(t)}var v1={exact:_C,subset:IC},vC={exact:_1,subset:I1,ignored:()=>!0};function uC(t,e,n){return v1[n.paths](t.root,e.root,n.matrixParams)&&vC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function _1(t,e){return gn(t,e)}function _C(t,e,n){if(!yi(t.segments,e.segments)||!Sl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!_C(t.children[r],e.children[r],n))return!1;return!0}function I1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>mC(t[n],e[n]))}function IC(t,e,n){return wC(t,e,e.segments,n)}function wC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!yi(i,n)||e.hasChildren()||!Sl(i,n,r))}else if(t.segments.length===n.length){if(!yi(t.segments,n)||!Sl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!IC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!yi(t.segments,i)||!Sl(t.segments,i,r)||!t.children[ee]?!1:wC(t.children[ee],e,o,r)}}function Sl(t,e,n){return e.every((r,i)=>vC[n](t[i].parameters,r.parameters))}var Gn=class{constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fo(this.queryParams),this._queryParamMap}toString(){return D1.serialize(this)}},ve=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Al(this)}},mi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Fo(this.parameters),this._parameterMap}toString(){return DC(this)}};function w1(t,e){return yi(t,e)&&t.every((n,r)=>gn(n.parameters,e[r].parameters))}function yi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function E1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var rm=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>new va,providedIn:"root"})}}return t})(),va=class{parse(e){let n=new Pg(e);return new Gn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ha(e.root,!0)}`,r=T1(e.queryParams),i=typeof e.fragment=="string"?`#${b1(e.fragment)}`:"";return`${n}${r}${i}`}},D1=new va;function Al(t){return t.segments.map(e=>DC(e)).join("/")}function ha(t,e){if(!t.hasChildren())return Al(t);if(e){let n=t.children[ee]?ha(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${ha(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=E1(t,(r,i)=>i===ee?[ha(t.children[ee],!1)]:[`${i}:${ha(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${Al(t)}/${n[0]}`:`${Al(t)}/(${n.join("//")})`}}function EC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cl(t){return EC(t).replace(/%3B/gi,";")}function b1(t){return encodeURI(t)}function xg(t){return EC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rl(t){return decodeURIComponent(t)}function lC(t){return Rl(t.replace(/\+/g,"%20"))}function DC(t){return`${xg(t.path)}${C1(t.parameters)}`}function C1(t){return Object.entries(t).map(([e,n])=>`;${xg(e)}=${xg(n)}`).join("")}function T1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Cl(n)}=${Cl(i)}`).join("&"):`${Cl(n)}=${Cl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var S1=/^[^\/()?;#]+/;function Tg(t){let e=t.match(S1);return e?e[0]:""}var A1=/^[^\/()?;=#]+/;function R1(t){let e=t.match(A1);return e?e[0]:""}var M1=/^[^=?&#]+/;function N1(t){let e=t.match(M1);return e?e[0]:""}var x1=/^[^&#]+/;function P1(t){let e=t.match(x1);return e?e[0]:""}var Pg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new ve(e,n)),r}parseSegment(){let e=Tg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new mi(Rl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=R1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tg(this.remaining);i&&(r=i,this.capture(r))}e[Rl(n)]=Rl(r)}parseQueryParam(e){let n=N1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=P1(this.remaining);s&&(r=s,this.capture(r))}let i=lC(n),o=lC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ee]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function bC(t){return t.segments.length>0?new ve([],{[ee]:t}):t}function CC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=CC(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ve(t.segments,e);return O1(n)}function O1(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new ve(t.segments.concat(e.segments),e.children)}return t}function _a(t){return t instanceof Gn}function k1(t,e,n=null,r=null){let i=TC(t);return SC(i,e,n,r)}function TC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new ve(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=bC(r);return e??i}function SC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Sg(i,i,i,n,r);let o=F1(e);if(o.toRoot())return Sg(i,i,new ve([],{}),n,r);let s=V1(o,i,t),c=s.processChildren?ga(s.segmentGroup,s.index,o.commands):RC(s.segmentGroup,s.index,o.commands);return Sg(i,s.segmentGroup,c,n,r)}function Ml(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ia(t){return typeof t=="object"&&t!=null&&t.outlets}function Sg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=AC(t,e,n);let c=bC(CC(s));return new Gn(c,o,i)}function AC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=AC(o,e,n)}),new ve(t.segments,r)}var Nl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ml(r[0]))throw new U(4003,!1);let i=r.find(Ia);if(i&&i!==yC(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function F1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Nl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Nl(n,e,r)}var Po=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function V1(t,e,n){if(t.isAbsolute)return new Po(e,!0,0);if(!n)return new Po(e,!1,NaN);if(n.parent===null)return new Po(n,!0,0);let r=Ml(t.commands[0])?0:1,i=n.segments.length-1+r;return L1(n,i,t.numberOfDoubleDots)}function L1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Po(r,!1,i-o)}function j1(t){return Ia(t[0])?t[0].outlets:{[ee]:t}}function RC(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return ga(t,e,n);let r=U1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ve(t.segments.slice(0,r.pathIndex),{});return o.children[ee]=new ve(t.segments.slice(r.pathIndex),t.children),ga(o,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?Og(t,e,n):r.match?ga(t,0,i):Og(t,e,n)}function ga(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=j1(n),i={};if(Object.keys(r).some(o=>o!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let o=ga(t.children[ee],e,n);return new ve(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=RC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(t.segments,i)}}function U1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(Ia(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!hC(u,l,s))return o;r+=2}else{if(!hC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Og(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ia(o)){let u=B1(o.outlets);return new ve(r,u)}if(i===0&&Ml(n[0])){let u=t.segments[e];r.push(new mi(u.path,dC(n[0]))),i++;continue}let s=Ia(o)?o.outlets[ee]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&Ml(c)?(r.push(new mi(s,dC(c))),i+=2):(r.push(new mi(s,{})),i++)}return new ve(r,{})}function B1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Og(new ve([],{}),0,r))}),e}function dC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function hC(t,e,n){return t==n.path&&gn(e,n.parameters)}var ma="imperative",et=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(et||{}),Bt=class{constructor(e,n){this.id=e,this.url=n}},wa=class extends Bt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=et.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},vi=class extends Bt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=et.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(At||{}),kg=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(kg||{}),zn=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=et.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_i=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=et.NavigationSkipped}},Ea=class extends Bt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=et.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xl=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vg=class extends Bt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=et.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lg=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jg=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ug=class{constructor(e){this.route=e,this.type=et.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bg=class{constructor(e){this.route=e,this.type=et.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$g=class{constructor(e){this.snapshot=e,this.type=et.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{constructor(e){this.snapshot=e,this.type=et.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qg=class{constructor(e){this.snapshot=e,this.type=et.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zg=class{constructor(e){this.snapshot=e,this.type=et.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Da=class{},Vo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function $1(t,e){return t.providers&&!t._injector&&(t._injector=lg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Jt(t){return t.outlet||ee}function H1(t,e){let n=t.filter(r=>Jt(r)===e);return n.push(...t.filter(r=>Jt(r)!==e)),n}function Ra(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Gg=class{get injector(){return Ra(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new jl(this.rootInjector),this.attachRef=null}},jl=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Gg(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(oe(kt))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Pl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Wg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Wg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Kg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Kg(e,this._root).map(n=>n.value)}};function Wg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Wg(t,n);if(r)return r}return null}function Kg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Kg(t,n);if(r.length)return r.unshift(e),r}return[]}var St=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function xo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ol=class extends Pl{constructor(e,n){super(e),this.snapshot=n,im(this,e)}toString(){return this.snapshot.toString()}};function MC(t){let e=q1(t),n=new Ye([new mi("",{})]),r=new Ye({}),i=new Ye({}),o=new Ye({}),s=new Ye(""),c=new Lo(n,r,o,s,i,ee,t,e.root);return c.snapshot=e.root,new Ol(new St(c,[]),e)}function q1(t){let e={},n={},r={},i="",o=new Oo([],e,r,i,n,ee,t,null,{});return new Fl("",new St(o,[]))}var Lo=class{constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[Aa]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Fo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Fo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),t.params),data:O(O({},e.data),t.data),resolve:O(O(O(O({},t.data),e.data),i?.data),t._resolvedData)}:r={params:O({},t.params),data:O({},t.data),resolve:O(O({},t.data),t._resolvedData??{})},i&&xC(i)&&(r.resolve[Aa]=i.title),r}var Oo=class{get title(){return this.data?.[Aa]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Fl=class extends Pl{constructor(e,n){super(n),this.url=e,im(this,n)}toString(){return NC(this._root)}};function im(t,e){e.value._routerState=t,e.children.forEach(n=>im(t,n))}function NC(t){let e=t.children.length>0?` { ${t.children.map(NC).join(", ")} } `:"";return`${t.value}${e}`}function Ag(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,gn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),gn(e.params,n.params)||t.paramsSubject.next(n.params),y1(e.url,n.url)||t.urlSubject.next(n.url),gn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Qg(t,e){let n=gn(t.params,e.params)&&w1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Qg(t.parent,e.parent))}function xC(t){return typeof t.title=="string"||t.title===null}var Ma=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new Fe,this.deactivateEvents=new Fe,this.attachEvents=new Fe,this.detachEvents=new Fe,this.parentContexts=k(jl),this.location=k(Ao),this.changeDetector=k(Mo),this.inputBinder=k(om,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Yg(n,c,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Oe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sr]})}}return t})(),Yg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Lo?this.route:e===jl?this.childContexts:this.parent.get(e,n)}},om=new L("");function z1(t,e,n){let r=ba(t,e._root,n?n._root:void 0);return new Ol(r,e)}function ba(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=G1(t,e,n);return new St(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>ba(t,c)),s}}let r=W1(e.value),i=e.children.map(o=>ba(t,o));return new St(r,i)}}function G1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ba(t,r,i);return ba(t,r)})}function W1(t){return new Lo(new Ye(t.url),new Ye(t.params),new Ye(t.queryParams),new Ye(t.fragment),new Ye(t.data),t.outlet,t.component,t)}var Ca=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},PC="ngNavigationCancelingError";function Vl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=_a(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=OC(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function OC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[PC]=!0,n.cancellationCode=e,n}function K1(t){return kC(t)&&_a(t.url)}function kC(t){return!!t&&t[PC]}var Q1=(t,e,n,r)=>ie(i=>(new Zg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Zg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ag(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=xo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=xo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=xo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=xo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new zg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Ag(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Ag(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ll=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ko=class{constructor(e,n){this.component=e,this.route=n}};function Y1(t,e,n){let r=t._root,i=e?e._root:null;return fa(r,i,n,[r.value])}function Z1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Uo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!kE(t)?t:e.get(t):r}function fa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=xo(e);return t.children.forEach(s=>{J1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>ya(c,n.getContext(s),i)),i}function J1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=X1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ll(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fa(t,e,c?c.children:null,r,i):fa(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new ko(c.outlet.component,s))}else s&&ya(e,c,i),i.canActivateChecks.push(new Ll(r)),o.component?fa(t,null,c?c.children:null,r,i):fa(t,null,n,r,i);return i}function X1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!yi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!yi(t.url,e.url)||!gn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qg(t,e)||!gn(t.queryParams,e.queryParams);case"paramsChange":default:return!Qg(t,e)}}function ya(t,e,n){let r=xo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ya(s,e.children.getContext(o),n):ya(s,null,n):ya(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ko(e.outlet.component,i)):n.canDeactivateChecks.push(new ko(null,i)):n.canDeactivateChecks.push(new ko(null,i))}function Na(t){return typeof t=="function"}function eF(t){return typeof t=="boolean"}function tF(t){return t&&Na(t.canLoad)}function nF(t){return t&&Na(t.canActivate)}function rF(t){return t&&Na(t.canActivateChild)}function iF(t){return t&&Na(t.canDeactivate)}function oF(t){return t&&Na(t.canMatch)}function FC(t){return t instanceof Mn||t?.name==="EmptyError"}var Tl=Symbol("INITIAL_VALUE");function jo(){return Gt(t=>yu(t.map(e=>e.pipe(Nn(1),Rf(Tl)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===Tl)return Tl;if(n===!1||sF(n))return n}return!0}),zt(e=>e!==Tl),Nn(1)))}function sF(t){return _a(t)||t instanceof Ca}function aF(t,e){return Be(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Z(te(O({},n),{guardsResult:!0})):cF(s,r,i,t).pipe(Be(c=>c&&eF(c)?uF(r,o,t,e):Z(c)),ie(c=>te(O({},n),{guardsResult:c})))})}function cF(t,e,n,r){return Pe(t).pipe(Be(i=>pF(i.component,i.route,n,e,r)),on(i=>i!==!0,!0))}function uF(t,e,n,r){return Pe(e).pipe(io(i=>ro(dF(i.route.parent,r),lF(i.route,r),fF(t,i.path,n),hF(t,i.route,n))),on(i=>i!==!0,!0))}function lF(t,e){return t!==null&&e&&e(new qg(t)),Z(!0)}function dF(t,e){return t!==null&&e&&e(new $g(t)),Z(!0)}function hF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>vu(()=>{let s=Ra(e)??n,c=Uo(o,s),u=nF(c)?c.canActivate(e,t):Vn(s,()=>c(e,t));return xr(u).pipe(on())}));return Z(i).pipe(jo())}function fF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Z1(s)).filter(s=>s!==null).map(s=>vu(()=>{let c=s.guards.map(u=>{let l=Ra(s.node)??n,h=Uo(u,l),p=rF(h)?h.canActivateChild(r,t):Vn(l,()=>h(r,t));return xr(p).pipe(on())});return Z(c).pipe(jo())}));return Z(o).pipe(jo())}function pF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(c=>{let u=Ra(e)??i,l=Uo(c,u),h=iF(l)?l.canDeactivate(t,e,n,r):Vn(u,()=>l(t,e,n,r));return xr(h).pipe(on())});return Z(s).pipe(jo())}function gF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let c=Uo(s,t),u=tF(c)?c.canLoad(e,n):Vn(t,()=>c(e,n));return xr(u)});return Z(o).pipe(jo(),VC(r))}function VC(t){return gf($e(e=>{if(typeof e!="boolean")throw Vl(t,e)}),ie(e=>e===!0))}function mF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let c=Uo(s,t),u=oF(c)?c.canMatch(e,n):Vn(t,()=>c(e,n));return xr(u)});return Z(o).pipe(jo(),VC(r))}var Ta=class{constructor(e){this.segmentGroup=e||null}},Sa=class extends Error{constructor(e){super(),this.urlTree=e}};function No(t){return no(new Ta(t))}function yF(t){return no(new U(4e3,!1))}function vF(t){return no(OC(!1,At.GuardRejected))}var Jg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ee])return yF(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let c=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:v,params:w,data:S,title:M}=i,R=Vn(o,()=>c({params:w,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:v,title:M}));if(R instanceof Gn)throw new Sa(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Sa(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Gn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Xg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _F(t,e,n,r,i){let o=LC(t,e,n);return o.matched?(r=$1(e,r),mF(r,e,n,i).pipe(ie(s=>s===!0?o:O({},Xg)))):Z(o)}function LC(t,e,n){if(e.path==="**")return IF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?O({},Xg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||m1)(n,t,e);if(!i)return O({},Xg);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function IF(t){return{matched:!0,parameters:t.length>0?yC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function fC(t,e,n,r){return n.length>0&&DF(t,n,r)?{segmentGroup:new ve(e,EF(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&bF(t,n,r)?{segmentGroup:new ve(t.segments,wF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function wF(t,e,n,r){let i={};for(let o of n)if(Ul(t,e,o)&&!r[Jt(o)]){let s=new ve([],{});i[Jt(o)]=s}return O(O({},r),i)}function EF(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&Jt(r)!==ee){let i=new ve([],{});n[Jt(r)]=i}return n}function DF(t,e,n){return n.some(r=>Ul(t,e,r)&&Jt(r)!==ee)}function bF(t,e,n){return n.some(r=>Ul(t,e,r))}function Ul(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CF(t,e,n){return e.length===0&&!t.children[n]}var em=class{};function TF(t,e,n,r,i,o,s="emptyOnly"){return new tm(t,e,n,r,i,s,o).recognize()}var SF=31,tm=class{constructor(e,n,r,i,o,s,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Jg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=fC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:n,rootSnapshot:r})=>{let i=new St(r,n),o=new Fl("",i),s=k1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Oo([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,n).pipe(ie(r=>({children:r,rootSnapshot:n})),_r(r=>{if(r instanceof Sa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ta?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ie(s=>s instanceof St?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Pe(o).pipe(io(s=>{let c=r.children[s],u=H1(n,s);return this.processSegmentGroup(e,u,c,s,i)}),Af((s,c)=>(s.push(...c),s)),Ir(null),Sf(),Be(s=>{if(s===null)return No(r);let c=jC(s);return AF(c),Z(c)}))}processSegment(e,n,r,i,o,s,c){return Pe(n).pipe(io(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c).pipe(_r(l=>{if(l instanceof Ta)return Z(null);throw l}))),on(u=>!!u),_r(u=>{if(FC(u))return CF(r,i,o)?Z(new em):No(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,c,u){return Jt(r)!==s&&(s===ee||!Ul(i,o,r))?No(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):No(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:v}=LC(n,i,o);if(!u)return No(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SF&&(this.allowRedirects=!1));let w=new Oo(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,pC(i),Jt(i),i.component??i._loadedComponent??null,i,gC(i)),S=kl(w,c,this.paramsInheritanceStrategy);w.params=Object.freeze(S.params),w.data=Object.freeze(S.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,w,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Be(R=>this.processSegment(e,r,n,R.concat(v),s,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let c=_F(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(Gt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Gt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:v,remainingSegments:w}=u,S=new Oo(v,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,pC(r),Jt(r),r.component??r._loadedComponent??null,r,gC(r)),M=kl(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(M.params),S.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:F}=fC(n,v,w,l);if(F.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(ie(q=>new St(S,q)));if(l.length===0&&F.length===0)return Z(new St(S,[]));let $=Jt(r)===o;return this.processSegment(h,l,R,F,$?ee:o,!0,S).pipe(ie(q=>new St(S,q instanceof St?[q]:[])))}))):No(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):gF(e,n,r,this.urlSerializer).pipe(Be(i=>i?this.configLoader.loadChildren(e,n).pipe($e(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):vF(n))):Z({routes:[],injector:e})}};function AF(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function RF(t){let e=t.value.routeConfig;return e&&e.path===""}function jC(t){let e=[],n=new Set;for(let r of t){if(!RF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=jC(r.children);e.push(new St(r.value,i))}return e.filter(r=>!n.has(r))}function pC(t){return t.data||{}}function gC(t){return t.resolve||{}}function MF(t,e,n,r,i,o){return Be(s=>TF(t,e,n,r,s.extractedUrl,i,o).pipe(ie(({state:c,tree:u})=>te(O({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function NF(t,e){return Be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of UC(u))s.add(l);let c=0;return Pe(s).pipe(io(u=>o.has(u)?xF(u,r,t,e):(u.data=kl(u,u.parent,t).resolve,Z(void 0))),$e(()=>c++),oo(1),Be(u=>c===s.size?Z(n):bt))})}function UC(t){let e=t.children.map(n=>UC(n)).flat();return[t,...e]}function xF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!xC(i)&&(o[Aa]=i.title),PF(o,t,e,r).pipe(ie(s=>(t._resolvedData=s,t.data=kl(t,t.parent,n).resolve,null)))}function PF(t,e,n,r){let i=Ng(t);if(i.length===0)return Z({});let o={};return Pe(i).pipe(Be(s=>OF(t[s],e,n,r).pipe(on(),$e(c=>{if(c instanceof Ca)throw Vl(new va,c);o[s]=c}))),oo(1),Tf(o),_r(s=>FC(s)?bt:no(s)))}function OF(t,e,n,r){let i=Ra(e)??r,o=Uo(t,i),s=o.resolve?o.resolve(e,n):Vn(i,()=>o(e,n));return xr(s)}function Rg(t){return Gt(e=>{let n=t(e);return n?Pe(n).pipe(ie(()=>e)):Z(e)})}var BC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[Aa]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>k(kF),providedIn:"root"})}}return t})(),kF=(()=>{class t extends BC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(oe(cC))}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),sm=new L("",{providedIn:"root",factory:()=>({})}),FF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=hn({type:t,selectors:[["ng-component"]],standalone:!0,features:[pn],decls:1,vars:0,template:function(r,i){r&1&&mt(0,"router-outlet")},dependencies:[Ma],encapsulation:2})}}return t})();function am(t){let e=t.children&&t.children.map(am),n=e?te(O({},t),{children:e}):O({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=FF),n}var cm=new L(""),VF=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(hg)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=xr(n.loadComponent()).pipe(ie($C),$e(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),qs(()=>{this.componentLoaders.delete(n)})),i=new Ji(r,()=>new Qe).pipe(Zi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=LF(r,this.compiler,n,this.onLoadEndListener).pipe(qs(()=>{this.childrenLoaders.delete(r)})),s=new Ji(o,()=>new Qe).pipe(Zi());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function LF(t,e,n,r){return xr(t.loadChildren()).pipe(ie($C),Be(i=>i instanceof Xs||Array.isArray(i)?Z(i):Pe(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(n).injector,s=o.get(cm,[],{optional:!0,self:!0}).flat()),{routes:s.map(am),injector:o}}))}function jF(t){return t&&typeof t=="object"&&"default"in t}function $C(t){return jF(t)?t.default:t}var um=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>k(UF),providedIn:"root"})}}return t})(),UF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),BF=new L("");var $F=new L(""),HF=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Qe,this.transitionAbortSubject=new Qe,this.configLoader=k(VF),this.environmentInjector=k(kt),this.urlSerializer=k(rm),this.rootContexts=k(jl),this.location=k(ca),this.inputBindingEnabled=k(om,{optional:!0})!==null,this.titleStrategy=k(BC),this.options=k(sm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(um),this.createViewTransition=k(BF,{optional:!0}),this.navigationErrorHandler=k($F,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Ug(i)),r=i=>this.events.next(new Bg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(te(O(O({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ye({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ma,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(zt(o=>o.id!==0),ie(o=>te(O({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Gt(o=>{let s=!1,c=!1;return Z(o).pipe(Gt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),bt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?te(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new _i(u.id,this.urlSerializer.serialize(u.rawUrl),p,kg.IgnoredSameUrlNavigation)),u.resolve(!1),bt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(Gt(p=>{let v=this.transitions?.getValue();return this.events.next(new wa(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),v!==this.transitions?.getValue()?bt:Promise.resolve(p)}),MF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),$e(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=te(O({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let v=new xl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:v,source:w,restoredState:S,extras:M}=u,R=new wa(p,this.urlSerializer.serialize(v),w,S);this.events.next(R);let F=MC(this.rootComponentType).snapshot;return this.currentTransition=o=te(O({},u),{targetSnapshot:F,urlAfterRedirects:v,extras:te(O({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,Z(o)}else{let p="";return this.events.next(new _i(u.id,this.urlSerializer.serialize(u.extractedUrl),p,kg.IgnoredByUrlHandlingStrategy)),u.resolve(!1),bt}}),$e(u=>{let l=new Fg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ie(u=>(this.currentTransition=o=te(O({},u),{guards:Y1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),aF(this.environmentInjector,u=>this.events.next(u)),$e(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Vl(this.urlSerializer,u.guardsResult);let l=new Vg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),zt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",At.GuardRejected),!1)),Rg(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe($e(l=>{let h=new Lg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Gt(l=>{let h=!1;return Z(l).pipe(NF(this.paramsInheritanceStrategy,this.environmentInjector),$e({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",At.NoDataFromResolver)}}))}),$e(l=>{let h=new jg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Rg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe($e(v=>{h.component=v}),ie(()=>{})));for(let v of h.children)p.push(...l(v));return p};return yu(l(u.targetSnapshot.root)).pipe(Ir(null),Nn(1))}),Rg(()=>this.afterPreactivation()),Gt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Pe(h).pipe(ie(()=>o)):Z(o)}),ie(u=>{let l=z1(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=te(O({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),$e(()=>{this.events.next(new Da)}),Q1(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Nn(1),$e({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Mf(this.transitionAbortSubject.pipe($e(u=>{throw u}))),qs(()=>{!s&&!c&&this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_r(u=>{if(c=!0,kC(u))this.events.next(new zn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),K1(u)?this.events.next(new Vo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ea(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Vn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ca){let{message:p,cancellationCode:v}=Vl(this.urlSerializer,h);this.events.next(new zn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,v)),this.events.next(new Vo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return bt}))}))}cancelNavigationTransition(n,r,i){let o=new zn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function qF(t){return t!==ma}var zF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>k(GF),providedIn:"root"})}}return t})(),nm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},GF=(()=>{class t extends nm{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Un(t)))(i||t)}})()}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),HC=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:()=>k(WF),providedIn:"root"})}}return t})(),WF=(()=>{class t extends HC{constructor(){super(...arguments),this.location=k(ca),this.urlSerializer=k(rm),this.options=k(sm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(um),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=MC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof wa)this.stateMemento=this.createStateMemento();else if(n instanceof _i)this.rawUrlTree=r.initialUrl;else if(n instanceof xl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Da?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof zn&&(n.code===At.GuardRejected||n.code===At.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ea?this.restoreHistory(r,!0):n instanceof vi&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Gn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=O(O({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=O(O({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Un(t)))(i||t)}})()}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(pa||{});function KF(t,e){t.events.pipe(zt(n=>n instanceof vi||n instanceof zn||n instanceof Ea||n instanceof _i),ie(n=>n instanceof vi||n instanceof _i?pa.COMPLETE:(n instanceof zn?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?pa.REDIRECTING:pa.FAILED),zt(n=>n!==pa.REDIRECTING),Nn(1)).subscribe(()=>{e()})}function QF(t){throw t}var YF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Bl=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(yl),this.stateManager=k(HC),this.options=k(sm,{optional:!0})||{},this.pendingTasks=k(To),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(HF),this.urlSerializer=k(rm),this.location=k(ca),this.urlHandlingStrategy=k(um),this._events=new Qe,this.errorHandler=this.options.errorHandler||QF,this.navigated=!1,this.routeReuseStrategy=k(zF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(cm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(om,{optional:!0}),this.eventsSubscription=new Re,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof zn&&r.code!==At.Redirect&&r.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof vi)this.navigated=!0;else if(r instanceof Vo){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qF(i.source)},s);this.scheduleNavigation(c,ma,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}XF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ma,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(am),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let v=i?i.snapshot:this.routerState.snapshot.root;p=TC(v)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return SC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=_a(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ma,null,r)}navigate(n,r={skipLocationChange:!1}){return JF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=O({},YF):r===!1?i=O({},ZF):i=r,_a(n))return uC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return uC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,v)=>{c=p,u=v});let h=this.pendingTasks.add();return KF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function JF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}function XF(t){return!(t instanceof Da)&&!(t instanceof Vo)}var eV=new L("");function qC(t,...e){return Ft([{provide:cm,multi:!0,useValue:t},[],{provide:Lo,useFactory:tV,deps:[Bl]},{provide:dg,multi:!0,useFactory:nV},e.map(n=>n.\u0275providers)])}function tV(t){return t.routerState.root}function nV(){let t=k(at);return e=>{let n=t.get(pi);if(e!==n.components[0])return;let r=t.get(Bl),i=t.get(rV);t.get(iV)===1&&r.initialNavigation(),t.get(oV,null,ne.Optional)?.setUpPreloading(),t.get(eV,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rV=new L("",{factory:()=>new Qe}),iV=new L("",{providedIn:"root",factory:()=>1});var oV=new L("");var $l=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=hn({type:t,selectors:[["app-home"]],standalone:!0,features:[pn],decls:19,vars:0,consts:[[1,"navbar"],[1,"navbar__container"],[1,"navbar__brand"],[1,"navbar__links"],["routerLink","/login",1,"navbar__link"],["routerLink","/registro",1,"navbar__link"]],template:function(n,r){n&1&&(Ee(0,"header",0)(1,"div",1)(2,"div",2)(3,"h1"),Xe(4,"Cl\xEDnica XYZ"),Te()(),Ee(5,"nav",3)(6,"ul")(7,"li")(8,"a",4),Xe(9,"Login"),Te()(),Ee(10,"li")(11,"a",5),Xe(12,"Registro"),Te()()()()()(),mt(13,"router-outlet"),Ee(14,"main")(15,"h2"),Xe(16,"Bienvenido a la Cl\xEDnica XYZ"),Te(),Ee(17,"p"),Xe(18,"Seleccione una opci\xF3n para comenzar..."),Te()())},dependencies:[Ma],styles:[".navbar[_ngcontent-%COMP%]{background-color:#00796b;color:#fff;padding:1rem}.navbar__container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.navbar__brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.navbar__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;gap:1rem;margin:0;padding:0}.navbar__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .navbar__link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:600;transition:color .3s}.navbar__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .navbar__link[_ngcontent-%COMP%]:hover{color:#b2dfdb}main[_ngcontent-%COMP%]{padding:2rem;text-align:center}main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}"]})};var eT=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(X(Mr),X(Bn))}}static{this.\u0275dir=Oe({type:t})}}return t})(),Xl=(()=>{class t extends eT{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Un(t)))(i||t)}})()}static{this.\u0275dir=Oe({type:t,features:[jt]})}}return t})(),Va=new L("");var aV={provide:Va,useExisting:dn(()=>zo),multi:!0};function cV(){let t=qn()?qn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var uV=new L(""),zo=(()=>{class t extends eT{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!cV())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(X(Mr),X(Bn),X(uV,8))}}static{this.\u0275dir=Oe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Je("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Nr([aV]),jt]})}}return t})();function Pr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function tT(t){return t!=null&&typeof t.length=="number"}var mm=new L(""),nT=new L(""),lV=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ve=class{static min(e){return dV(e)}static max(e){return hV(e)}static required(e){return rT(e)}static requiredTrue(e){return fV(e)}static email(e){return pV(e)}static minLength(e){return gV(e)}static maxLength(e){return mV(e)}static pattern(e){return yV(e)}static nullValidator(e){return zl(e)}static compose(e){return uT(e)}static composeAsync(e){return dT(e)}};function dV(t){return e=>{if(Pr(e.value)||Pr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function hV(t){return e=>{if(Pr(e.value)||Pr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function rT(t){return Pr(t.value)?{required:!0}:null}function fV(t){return t.value===!0?null:{required:!0}}function pV(t){return Pr(t.value)||lV.test(t.value)?null:{email:!0}}function gV(t){return e=>Pr(e.value)||!tT(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function mV(t){return e=>tT(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function yV(t){if(!t)return zl;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Pr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function zl(t){return null}function iT(t){return t!=null}function oT(t){return fi(t)?Pe(t):t}function sT(t){let e={};return t.forEach(n=>{e=n!=null?O(O({},e),n):e}),Object.keys(e).length===0?null:e}function aT(t,e){return e.map(n=>n(t))}function vV(t){return!t.validate}function cT(t){return t.map(e=>vV(e)?e:n=>e.validate(n))}function uT(t){if(!t)return null;let e=t.filter(iT);return e.length==0?null:function(n){return sT(aT(n,e))}}function lT(t){return t!=null?uT(cT(t)):null}function dT(t){if(!t)return null;let e=t.filter(iT);return e.length==0?null:function(n){let r=aT(n,e).map(oT);return Cf(r).pipe(ie(sT))}}function hT(t){return t!=null?dT(cT(t)):null}function zC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function fT(t){return t._rawValidators}function pT(t){return t._rawAsyncValidators}function dm(t){return t?Array.isArray(t)?t:[t]:[]}function Gl(t,e){return Array.isArray(t)?t.includes(e):t===e}function GC(t,e){let n=dm(e);return dm(t).forEach(i=>{Gl(n,i)||n.push(i)}),n}function WC(t,e){return dm(e).filter(n=>!Gl(t,n))}var Wl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ho=class extends Wl{get formDirective(){return null}get path(){return null}},Fa=class extends Wl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Kl=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},_V={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},j5=te(O({},_V),{"[class.ng-submitted]":"isSubmitted"}),ed=(()=>{class t extends Kl{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(X(Fa,2))}}static{this.\u0275dir=Oe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[jt]})}}return t})(),td=(()=>{class t extends Kl{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(X(Ho,10))}}static{this.\u0275dir=Oe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&pl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[jt]})}}return t})();var xa="VALID",Hl="INVALID",Bo="PENDING",Pa="DISABLED",Or=class{},Ql=class extends Or{constructor(e,n){super(),this.value=e,this.source=n}},Oa=class extends Or{constructor(e,n){super(),this.pristine=e,this.source=n}},ka=class extends Or{constructor(e,n){super(),this.touched=e,this.source=n}},$o=class extends Or{constructor(e,n){super(),this.status=e,this.source=n}},hm=class extends Or{constructor(e){super(),this.source=e}},fm=class extends Or{constructor(e){super(),this.source=e}};function ym(t){return(nd(t)?t.validators:t)||null}function IV(t){return Array.isArray(t)?lT(t):t||null}function vm(t,e){return(nd(e)?e.asyncValidators:t)||null}function wV(t){return Array.isArray(t)?hT(t):t||null}function nd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function gT(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new U(1e3,"");if(!r[n])throw new U(1001,"")}function mT(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new U(1002,"")})}var qo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=aa(()=>this.statusReactive()),this.statusReactive=oa(void 0),this._pristine=aa(()=>this.pristineReactive()),this.pristineReactive=oa(!0),this._touched=aa(()=>this.touchedReactive()),this.touchedReactive=oa(!1),this._events=new Qe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return $n(this.statusReactive)}set status(e){$n(()=>this.statusReactive.set(e))}get valid(){return this.status===xa}get invalid(){return this.status===Hl}get pending(){return this.status==Bo}get disabled(){return this.status===Pa}get enabled(){return this.status!==Pa}get pristine(){return $n(this.pristineReactive)}set pristine(e){$n(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return $n(this.touchedReactive)}set touched(e){$n(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(GC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(GC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(WC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(WC(e,this._rawAsyncValidators))}hasValidator(e){return Gl(this._rawValidators,e)}hasAsyncValidator(e){return Gl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ka(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ka(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Oa(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Oa(!0,r))}markAsPending(e={}){this.status=Bo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $o(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(O({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Pa,this.errors=null,this._forEachChild(i=>{i.disable(te(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ql(this.value,r)),this._events.next(new $o(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xa,this._forEachChild(r=>{r.enable(te(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xa||this.status===Bo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ql(this.value,n)),this._events.next(new $o(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(O({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pa:xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Bo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=oT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new $o(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?Pa:this.errors?Hl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bo)?Bo:this._anyControlsHaveStatus(Hl)?Hl:xa}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Oa(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ka(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=IV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=wV(this._rawAsyncValidators)}},Yl=class extends qo{constructor(e,n,r){super(ym(n),vm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){mT(this,!0,e),Object.keys(e).forEach(r=>{gT(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pm=class extends Yl{};var yT=new L("CallSetDisabledState",{providedIn:"root",factory:()=>_m}),_m="always";function EV(t,e){return[...e.path,t]}function KC(t,e,n=_m){Im(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),bV(t,e),TV(t,e),CV(t,e),DV(t,e)}function QC(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Jl(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Zl(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function DV(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Im(t,e){let n=fT(t);e.validator!==null?t.setValidators(zC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=pT(t);e.asyncValidator!==null?t.setAsyncValidators(zC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Zl(e._rawValidators,i),Zl(e._rawAsyncValidators,i)}function Jl(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=fT(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=pT(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Zl(e._rawValidators,r),Zl(e._rawAsyncValidators,r),n}function bV(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&vT(t,e)})}function CV(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&vT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function vT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function TV(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function SV(t,e){t==null,Im(t,e)}function AV(t,e){return Jl(t,e)}function RV(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function MV(t){return Object.getPrototypeOf(t.constructor)===Xl}function NV(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function xV(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===zo?n=o:MV(o)?r=o:i=o}),i||r||n||null}function PV(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function YC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ZC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ql=class extends qo{constructor(e=null,n,r){super(ym(n),vm(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(ZC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ZC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OV=t=>t instanceof ql;var rd=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),kV={provide:Va,useExisting:dn(()=>wm),multi:!0},wm=(()=>{class t extends Xl{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Un(t)))(i||t)}})()}static{this.\u0275dir=Oe({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Je("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Nr([kV]),jt]})}}return t})();var _T=new L("");var FV={provide:Ho,useExisting:dn(()=>La)},La=(()=>{class t extends Ho{get submitted(){return $n(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=aa(()=>this._submittedReactive()),this._submittedReactive=oa(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Fe,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return KC(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){QC(n.control||null,n,!1),PV(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),NV(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new hm(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this._submittedReactive.set(!1),this.form._events.next(new fm(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(QC(r||null,n),OV(i)&&(KC(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);SV(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&AV(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Im(this.form,this),this._oldForm&&Jl(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||t)(X(mm,10),X(nT,10),X(yT,8))}}static{this.\u0275dir=Oe({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Je("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nr([FV]),jt,Sr]})}}return t})();var VV={provide:Fa,useExisting:dn(()=>ja)},ja=(()=>{class t extends Fa{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Fe,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=xV(this,o)}ngOnChanges(n){this._added||this._setUpControl(),RV(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return EV(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||t)(X(Ho,13),X(mm,10),X(nT,10),X(Va,10),X(_T,8))}}static{this.\u0275dir=Oe({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Nr([VV]),jt,Sr]})}}return t})(),LV={provide:Va,useExisting:dn(()=>id),multi:!0};function IT(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function jV(t){return t.split(":")[0]}var id=(()=>{class t extends Xl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=IT(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=jV(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Un(t)))(i||t)}})()}static{this.\u0275dir=Oe({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Je("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Nr([LV]),jt]})}}return t})(),wT=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(IT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(X(Bn),X(Mr),X(id,9))}}static{this.\u0275dir=Oe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})(),UV={provide:Va,useExisting:dn(()=>ET),multi:!0};function JC(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function BV(t){return t.split(":")[0]}var ET=(()=>{class t extends Xl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let u=s[c],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let c=0;c<s.length;c++){let u=s[c];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=BV(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Un(t)))(i||t)}})()}static{this.\u0275dir=Oe({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Je("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Nr([UV]),jt]})}}return t})(),DT=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(JC(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(JC(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(X(Bn),X(Mr),X(ET,9))}}static{this.\u0275dir=Oe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();var $V=(()=>{class t{constructor(){this._validator=zl}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zl,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Oe({type:t,features:[Sr]})}}return t})();var HV={provide:mm,useExisting:dn(()=>Ua),multi:!0};var Ua=(()=>{class t extends $V{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=_l,this.createValidator=n=>rT}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Un(t)))(i||t)}})()}static{this.\u0275dir=Oe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&fl("required",i._enabled?"":null)},inputs:{required:"required"},features:[Nr([HV]),jt]})}}return t})();var qV=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=li({type:t})}static{this.\u0275inj=ui({})}}return t})(),gm=class extends qo{constructor(e,n,r){super(ym(n),vm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){mT(this,!1,e),e.forEach((r,i)=>{gT(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function XC(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var od=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return XC(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Yl(i,o)}record(n,r=null){let i=this._reduceControls(n);return new pm(i,r)}control(n,r,i){let o={};return this.useNonNullable?(XC(r)?o=r:(o.validators=r,o.asyncValidators=i),new ql(n,te(O({},o),{nonNullable:!0}))):new ql(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new gm(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof ql)return n;if(n instanceof qo)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var sd=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:_T,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:yT,useValue:n.callSetDisabledState??_m}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=li({type:t})}static{this.\u0275inj=ui({imports:[qV]})}}return t})();var TT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ST={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,v=(c&15)<<2|l>>6,w=l&63;u||(w=64,s||(v=64)),r.push(n[h],n[p],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Dm;let v=o<<2|c>>4;if(r.push(v),l!==64){let w=c<<4&240|l>>2;if(r.push(w),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Dm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},GV=function(t){let e=TT(t);return ST.encodeByteArray(e,!0)},Ba=function(t){return GV(t).replace(/\./g,"")},Cm=function(t){try{return ST.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var KV=()=>WV().__FIREBASE_DEFAULTS__,QV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Cm(t[1]);return e&&JSON.parse(e)},cd=()=>{try{return KV()||QV()||YV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tm=t=>{var e,n;return(n=(e=cd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AT=t=>{let e=Tm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sm=()=>{var t;return(t=cd())===null||t===void 0?void 0:t.config},Am=t=>{var e;return(e=cd())===null||e===void 0?void 0:e[`_${t}`]};var ad=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function RT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ba(JSON.stringify(n)),Ba(JSON.stringify(s)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function ZV(){var t;let e=(t=cd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OT(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kT(){return!ZV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $a(){try{return typeof indexedDB=="object"}catch{return!1}}function ud(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function FT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var JV="FirebaseError",yt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}},Rt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?XV(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new yt(i,c,r)}};function XV(t,e){return t.replace(eL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var eL=/\{\$([^}]+)}/g;function VT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ii(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(CT(o)&&CT(s)){if(!Ii(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function CT(t){return t!==null&&typeof t=="object"}function Ha(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Go(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Wo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LT(t,e){let n=new bm(t,e);return n.subscribe.bind(n)}var bm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Em),i.error===void 0&&(i.error=Em),i.complete===void 0&&(i.complete=Em);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Em(){}var $5=4*60*60*1e3;function tt(t){return t&&t._delegate?t._delegate:t}var Ge=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var wi="[DEFAULT]";var Rm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ad;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rL(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nL(t){return t===wi?void 0:t}function rL(t){return t.instantiationMode==="EAGER"}var ld=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Rm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var iL=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),oL={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},sL=ue.INFO,aL={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},cL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=aL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},kr=class{constructor(e){this.name=e,this._logLevel=sL,this._logHandler=cL,this._userLogHandler=null,iL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var uL=(t,e)=>e.some(n=>t instanceof n),jT,UT;function lL(){return jT||(jT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dL(){return UT||(UT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var BT=new WeakMap,Nm=new WeakMap,$T=new WeakMap,Mm=new WeakMap,Pm=new WeakMap;function hL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Xt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&BT.set(n,t)}).catch(()=>{}),Pm.set(e,t),e}function fL(t){if(Nm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Nm.set(t,e)}var xm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$T.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HT(t){xm=t(xm)}function pL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(dd(this),e,...n);return $T.set(r,e.sort?e.sort():[e]),Xt(r)}:dL().includes(t)?function(...e){return t.apply(dd(this),e),Xt(BT.get(this))}:function(...e){return Xt(t.apply(dd(this),e))}}function gL(t){return typeof t=="function"?pL(t):(t instanceof IDBTransaction&&fL(t),uL(t,lL())?new Proxy(t,xm):t)}function Xt(t){if(t instanceof IDBRequest)return hL(t);if(Mm.has(t))return Mm.get(t);let e=gL(t);return e!==t&&(Mm.set(t,e),Pm.set(e,t)),e}var dd=t=>Pm.get(t);function Ei(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=Xt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Xt(s.result),u.oldVersion,u.newVersion,Xt(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}function hd(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Xt(n).then(()=>{})}var mL=["get","getKey","getAll","getAllKeys","count"],yL=["put","add","delete","clear"],Om=new Map;function qT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=yL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mL.includes(n)))return;let o=function(s,...c){return m(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Om.set(e,o),o}HT(t=>te(O({},t),{get:(e,n,r)=>qT(e,n)||t.get(e,n,r),has:(e,n)=>!!qT(e,n)||t.has(e,n)}));var Fm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function vL(t){let e=t.getComponent();return e?.type==="VERSION"}var Vm="@firebase/app",zT="0.10.13";var Wn=new kr("@firebase/app"),_L="@firebase/app-compat",IL="@firebase/analytics-compat",wL="@firebase/analytics",EL="@firebase/app-check-compat",DL="@firebase/app-check",bL="@firebase/auth",CL="@firebase/auth-compat",TL="@firebase/database",SL="@firebase/data-connect",AL="@firebase/database-compat",RL="@firebase/functions",ML="@firebase/functions-compat",NL="@firebase/installations",xL="@firebase/installations-compat",PL="@firebase/messaging",OL="@firebase/messaging-compat",kL="@firebase/performance",FL="@firebase/performance-compat",VL="@firebase/remote-config",LL="@firebase/remote-config-compat",jL="@firebase/storage",UL="@firebase/storage-compat",BL="@firebase/firestore",$L="@firebase/vertexai-preview",HL="@firebase/firestore-compat",qL="firebase",zL="10.14.1";var Lm="[DEFAULT]",GL={[Vm]:"fire-core",[_L]:"fire-core-compat",[wL]:"fire-analytics",[IL]:"fire-analytics-compat",[DL]:"fire-app-check",[EL]:"fire-app-check-compat",[bL]:"fire-auth",[CL]:"fire-auth-compat",[TL]:"fire-rtdb",[SL]:"fire-data-connect",[AL]:"fire-rtdb-compat",[RL]:"fire-fn",[ML]:"fire-fn-compat",[NL]:"fire-iid",[xL]:"fire-iid-compat",[PL]:"fire-fcm",[OL]:"fire-fcm-compat",[kL]:"fire-perf",[FL]:"fire-perf-compat",[VL]:"fire-rc",[LL]:"fire-rc-compat",[jL]:"fire-gcs",[UL]:"fire-gcs-compat",[BL]:"fire-fst",[HL]:"fire-fst-compat",[$L]:"fire-vertex","fire-js":"fire-js",[qL]:"fire-js-all"};var qa=new Map,WL=new Map,jm=new Map;function GT(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wt(t){let e=t.name;if(jm.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,t);for(let n of qa.values())GT(n,t);for(let n of WL.values())GT(n,t);return!0}function mn(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t.settings!==void 0}var KL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new Rt("app","Firebase",KL);var Um=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}};var Vr=zL;function Hm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Lm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(n||(n=Sm()),!n)throw Fr.create("no-options");let o=qa.get(i);if(o){if(Ii(n,o.options)&&Ii(r,o.config))return o;throw Fr.create("duplicate-app",{appName:i})}let s=new ld(i);for(let u of jm.values())s.addComponent(u);let c=new Um(n,r,s);return qa.set(i,c),c}function Kn(t=Lm){let e=qa.get(t);if(!e&&t===Lm&&Sm())return Hm();if(!e)throw Fr.create("no-app",{appName:t});return e}function fd(){return Array.from(qa.values())}function De(t,e,n){var r;let i=(r=GL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(c.join(" "));return}wt(new Ge(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var QL="firebase-heartbeat-database",YL=1,za="firebase-heartbeat-store",km=null;function YT(){return km||(km=Ei(QL,YL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),km}function ZL(t){return m(this,null,function*(){try{let n=(yield YT()).transaction(za),r=yield n.objectStore(za).get(ZT(t));return yield n.done,r}catch(e){if(e instanceof yt)Wn.warn(e.message);else{let n=Fr.create("idb-get",{originalErrorMessage:e?.message});Wn.warn(n.message)}}})}function WT(t,e){return m(this,null,function*(){try{let r=(yield YT()).transaction(za,"readwrite");yield r.objectStore(za).put(e,ZT(t)),yield r.done}catch(n){if(n instanceof yt)Wn.warn(n.message);else{let r=Fr.create("idb-set",{originalErrorMessage:n?.message});Wn.warn(r.message)}}})}function ZT(t){return`${t.name}!${t.options.appId}`}var JL=1024,XL=30*24*60*60*1e3,Bm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new $m(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=KT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let c=new Date(s.date).valueOf();return Date.now()-c<=XL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wn.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=KT(),{heartbeatsToSend:r,unsentEntries:i}=ej(this._heartbeatsCache.heartbeats),o=Ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Wn.warn(n),""}})}};function KT(){return new Date().toISOString().substring(0,10)}function ej(t,e=JL){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),QT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var $m=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return $a()?ud().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ZL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function QT(t){return Ba(JSON.stringify({version:2,heartbeats:t})).length}function tj(t){wt(new Ge("platform-logger",e=>new Fm(e),"PRIVATE")),wt(new Ge("heartbeat",e=>new Bm(e),"PRIVATE")),De(Vm,zT,t),De(Vm,zT,"esm2017"),De("fire-js","")}tj("");var nj="firebase",rj="10.14.1";De(nj,rj,"app");var Qn=new Fn("ANGULARFIRE2_VERSION"),JT=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function Yo(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var bi=(t,e)=>{let n=e?[e]:fd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Qo=class{constructor(){return bi(ij)}},ij="app-check";function Ko(){}var pd=class{zone;delegate;constructor(e,n=wf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},qm=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),n.pipe($e({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Lr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new pd(Zone.current)),this.insideAngular=n.run(()=>new pd(Zone.current,If)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(oe(ye))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function oj(t){return gd().ngZone.runOutsideAngular(()=>t())}function Di(t){return gd().ngZone.run(()=>t())}function sj(t){return aj(gd())(t)}function aj(t){return function(n){return n=n.lift(new qm(t.ngZone)),n.pipe(vr(t.outsideAngular),yr(t.insideAngular))}}var cj=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Di(()=>t.apply(void 0,r))},vt=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Di(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko))),r[o]=cj(r[o],n));let i=oj(()=>t.apply(this,r));if(!e)if(i instanceof de){let o=gd();return i.pipe(vr(o.outsideAngular),yr(o.insideAngular))}else return Di(()=>i);return i instanceof de?i.pipe(sj):i instanceof Promise?Di(()=>new Promise((o,s)=>i.then(c=>Di(()=>o(c)),c=>Di(()=>s(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Di(()=>i)};var tn=class{constructor(e){return e}},Yn=class{constructor(){return fd()}};function uj(t){return t&&t.length===1?t[0]:new tn(Kn())}var zm=new L("angularfire2._apps"),lj={provide:tn,useFactory:uj,deps:[[new qe,zm]]},dj={provide:Yn,deps:[[new qe,zm]]};function hj(t){return(e,n)=>{let r=n.get(Rr);De("angularfire",Qn.full,"core"),De("angularfire",Qn.full,"app"),De("angular",Pb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new tn(i)}}function XT(t,...e){return Ft([lj,dj,{provide:zm,useFactory:hj(t),multi:!0,deps:[ye,at,Lr,...e]}])}var e0=vt(Hm,!0);function y0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var v0=y0,_0=new Rt("auth","Firebase",y0());var wd=new kr("@firebase/auth");function fj(t,...e){wd.logLevel<=ue.WARN&&wd.warn(`Auth (${Vr}): ${t}`,...e)}function yd(t,...e){wd.logLevel<=ue.ERROR&&wd.error(`Auth (${Vr}): ${t}`,...e)}function vn(t,...e){throw py(t,...e)}function Ci(t,...e){return py(t,...e)}function I0(t,e,n){let r=Object.assign(Object.assign({},v0()),{[e]:n});return new Rt("auth","Firebase",r).create(e,{appName:t.name})}function Xn(t){return I0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function py(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _0.create(t,...e)}function B(t,e,...n){if(!t)throw py(e,...n)}function Zn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw yd(e),new Error(e)}function Ur(t,e){t||Zn(e)}function Qm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pj(){return t0()==="http:"||t0()==="https:"}function t0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function gj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pj()||xT()||"connection"in navigator)?navigator.onLine:!0}function mj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ti=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=MT()||PT()}get(){return gj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gy(t,e){Ur(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ed=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var yj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vj=new Ti(3e4,6e4);function er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function tr(o,s,c,u){return m(this,arguments,function*(t,e,n,r,i={}){return w0(t,i,()=>m(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ha(Object.assign({key:t.config.apiKey},h)).slice(1),v=yield t._getAdditionalHeaders();v["Content-Type"]="application/json",t.languageCode&&(v["X-Firebase-Locale"]=t.languageCode);let w=Object.assign({method:e,headers:v},l);return NT()||(w.referrerPolicy="no-referrer"),Ed.fetch()(E0(t,t.config.apiHost,n,p),w)}))})}function w0(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},yj),e);try{let i=new Ym(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw md(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw md(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw md(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw md(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw I0(t,h,l);vn(t,h)}}catch(i){if(i instanceof yt)throw i;vn(t,"network-request-failed",{message:String(i)})}})}function Xa(o,s,c,u){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield tr(t,e,n,r,i);return"mfaPendingCredential"in l&&vn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function E0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?gy(t.config,i):`${t.config.apiScheme}://${i}`}function _j(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ym=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ci(this.auth,"network-request-failed")),vj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function md(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ci(t,e,r);return i.customData._tokenResponse=n,i}function n0(t){return t!==void 0&&t.enterprise!==void 0}var Zm=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _j(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Ij(t,e){return m(this,null,function*(){return tr(t,"GET","/v2/recaptchaConfig",er(t,e))})}function wj(t,e){return m(this,null,function*(){return tr(t,"POST","/v1/accounts:delete",e)})}function D0(t,e){return m(this,null,function*(){return tr(t,"POST","/v1/accounts:lookup",e)})}function Ga(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function my(t,e=!1){return m(this,null,function*(){let n=tt(t),r=yield n.getIdToken(e),i=yy(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ga(Gm(i.auth_time)),issuedAtTime:Ga(Gm(i.iat)),expirationTime:Ga(Gm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Gm(t){return Number(t)*1e3}function yy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cm(n);return i?JSON.parse(i):(yd("Failed to decode base64 JWT payload"),null)}catch(i){return yd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function r0(t){let e=yy(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ka(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof yt&&Ej(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Ej({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Jm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Qa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ga(this.lastLoginAt),this.creationTime=Ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Dd(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ka(t,D0(n,{idToken:r}));B(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?b0(o.providerUserInfo):[],c=Dj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Qa(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function vy(t){return m(this,null,function*(){let e=tt(t);yield Dd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Dj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function b0(t){return t.map(e=>{var{providerId:n}=e,r=Ef(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function bj(t,e){return m(this,null,function*(){let n=yield w0(t,{},()=>m(this,null,function*(){let r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=E0(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ed.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Cj(t,e){return m(this,null,function*(){return tr(t,"POST","/v2/accounts:revokeToken",er(t,e))})}var Wa=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");let n=r0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield bj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(B(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(B(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Zn("not implemented")}};function jr(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Zo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ef(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Qa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield Ka(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return my(this,e)}reload(){return vy(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Dd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(en(this.auth.app))return Promise.reject(Xn(this.auth));let e=yield this.getIdToken();return yield Ka(this,wj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,w=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,M=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:q,emailVerified:re,isAnonymous:Se,providerData:Q,stsTokenManager:D}=n;B(q&&D,e,"internal-error");let y=Wa.fromJSON(this.name,D);B(typeof q=="string",e,"internal-error"),jr(p,e.name),jr(v,e.name),B(typeof re=="boolean",e,"internal-error"),B(typeof Se=="boolean",e,"internal-error"),jr(w,e.name),jr(S,e.name),jr(M,e.name),jr(R,e.name),jr(F,e.name),jr($,e.name);let _=new t({uid:q,auth:e,email:v,emailVerified:re,displayName:p,isAnonymous:Se,photoURL:S,phoneNumber:w,tenantId:M,stsTokenManager:y,createdAt:F,lastLoginAt:$});return Q&&Array.isArray(Q)&&(_.providerData=Q.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new Wa;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Dd(o),o})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];B(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?b0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Wa;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var i0=new Map;function Jn(t){Ur(t instanceof Function,"Expected a class definition");let e=i0.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i0.set(t,e),e)}var Tj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Xm=Tj;function vd(t,e,n){return`firebase:${t}:${e}:${n}`}var bd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=vd(this.userKey,i.apiKey,o),this.fullPersistenceKey=vd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Zo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(Jn(Xm),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Jn(Xm),s=vd(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(s);if(h){let p=Zo._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function o0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M0(e))return"Blackberry";if(N0(e))return"Webos";if(T0(e))return"Safari";if((e.includes("chrome/")||S0(e))&&!e.includes("edge/"))return"Chrome";if(R0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function C0(t=ze()){return/firefox\//i.test(t)}function T0(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S0(t=ze()){return/crios\//i.test(t)}function A0(t=ze()){return/iemobile/i.test(t)}function R0(t=ze()){return/android/i.test(t)}function M0(t=ze()){return/blackberry/i.test(t)}function N0(t=ze()){return/webos/i.test(t)}function _y(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Sj(t=ze()){var e;return _y(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Aj(){return OT()&&document.documentMode===10}function x0(t=ze()){return _y(t)||R0(t)||N0(t)||M0(t)||/windows phone/i.test(t)||A0(t)}function P0(t,e=[]){let n;switch(t){case"Browser":n=o0(ze());break;case"Worker":n=`${o0(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${r}`}var ey=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Rj(n){return m(this,arguments,function*(t,e={}){return tr(t,"GET","/v2/passwordPolicy",er(t,e))})}var Mj=6,ty=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Mj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var ny=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cd(this),this.idTokenSubscription=new Cd(this),this.beforeStateQueue=new ey(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield bd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield D0(this,{idToken:e}),r=yield Zo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(en(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Dd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=mj()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(en(this.app))return Promise.reject(Xn(this));let n=e?tt(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return en(this.app)?Promise.reject(Xn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return en(this.app)?Promise.reject(Xn(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Jn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield Rj(this),n=new ty(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Cj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Jn(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=yield bd.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&fj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ai(t){return tt(t)}var Cd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=LT(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xd={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nj(t){xd=t}function O0(t){return xd.loadJS(t)}function xj(){return xd.recaptchaEnterpriseScript}function Pj(){return xd.gapiScript}function k0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Oj="recaptcha-enterprise",kj="NO_RECAPTCHA",ry=class{constructor(e){this.type=Oj,this.auth=Ai(e)}verify(e="verify",n=!1){return m(this,null,function*(){function r(o){return m(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>m(this,null,function*(){Ij(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new Zm(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{c(u)})}))})}function i(o,s,c){let u=window.grecaptcha;n0(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(kj)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(c=>{if(!n&&n0(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xj();u.length!==0&&(u+=c),O0(u).then(()=>{i(c,o,s)}).catch(l=>{s(l)})}}).catch(c=>{s(c)})})})}};function s0(t,e,n,r=!1){return m(this,null,function*(){let i=new ry(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function iy(t,e,n,r){return m(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield s0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>m(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield s0(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function Iy(t,e){let n=mn(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Ii(o,e??{}))return i;vn(i,"already-initialized")}return n.initialize({options:e})}function Fj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Jn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function wy(t,e,n){let r=Ai(t);B(r._canInitEmulator,r,"emulator-config-failed"),B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=F0(e),{host:s,port:c}=Vj(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Lj()}function F0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Vj(t){let e=F0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:a0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:a0(s)}}}function a0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Lj(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ya=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}};function jj(t,e){return m(this,null,function*(){return tr(t,"POST","/v1/accounts:signUp",e)})}function Uj(t,e){return m(this,null,function*(){return Xa(t,"POST","/v1/accounts:signInWithPassword",er(t,e))})}function Bj(t,e){return m(this,null,function*(){return tr(t,"POST","/v1/accounts:sendOobCode",er(t,e))})}function $j(t,e){return m(this,null,function*(){return Bj(t,e)})}function Hj(t,e){return m(this,null,function*(){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))})}function qj(t,e){return m(this,null,function*(){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))})}var Za=class t extends Ya{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iy(e,n,"signInWithPassword",Uj);case"emailLink":return Hj(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_linkToIdToken(e,n){return m(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iy(e,r,"signUpPassword",jj);case"emailLink":return qj(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Wm(t,e){return m(this,null,function*(){return Xa(t,"POST","/v1/accounts:signInWithIdp",er(t,e))})}function zj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gj(t){let e=Go(Wo(t)).link,n=e?Go(Wo(e)).deep_link_id:null,r=Go(Wo(t)).deep_link_id;return(r?Go(Wo(r)).link:null)||r||n||e||t}var Td=class t{constructor(e){var n,r,i,o,s,c;let u=Go(Wo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=zj((i=u.mode)!==null&&i!==void 0?i:null);B(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let n=Gj(e);try{return new t(n)}catch{return null}}};var V0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Za._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Td.parseLink(r);return B(i,"argument-error"),Za._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Sd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var oy=class extends Sd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Wj(t,e){return m(this,null,function*(){return Xa(t,"POST","/v1/accounts:signUp",er(t,e))})}var Jo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let o=yield Zo._fromIdTokenResponse(e,r,i),s=c0(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=c0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function c0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var sy=class t extends yt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function L0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sy._fromErrorAndOperation(t,o,e,r):o})}function Kj(t,e,n=!1){return m(this,null,function*(){let r=yield Ka(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Jo._forOperation(t,"link",r)})}function Qj(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(en(r.app))return Promise.reject(Xn(r));let i="reauthenticate";try{let o=yield Ka(t,L0(r,i,e,t),n);B(o.idToken,r,"internal-error");let s=yy(o.idToken);B(s,r,"internal-error");let{sub:c}=s;return B(t.uid===c,r,"user-mismatch"),Jo._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&vn(r,"user-mismatch"),o}})}function j0(t,e,n=!1){return m(this,null,function*(){if(en(t.app))return Promise.reject(Xn(t));let r="signIn",i=yield L0(t,r,e),o=yield Jo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Ey(t,e){return m(this,null,function*(){return j0(Ai(t),e)})}function Yj(t,e,n){var r;B(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),B(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(B(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(B(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function U0(t){return m(this,null,function*(){let e=Ai(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Dy(t,e,n){return m(this,null,function*(){if(en(t.app))return Promise.reject(Xn(t));let r=Ai(t),s=yield iy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wj).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&U0(t),u}),c=yield Jo._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(c.user),c})}function by(t,e,n){return en(t.app)?Promise.reject(Xn(t)):Ey(tt(t),V0.credential(e,n)).catch(r=>m(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&U0(t),r}))}function Cy(t,e){return m(this,null,function*(){let n=tt(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&Yj(n.auth,i,e);let{email:o}=yield $j(n.auth,i);o!==t.email&&(yield t.reload())})}function Ty(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function Sy(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}var Ad="__sak";var Rd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Zj=1e3,Jj=10,Xj=(()=>{class t extends Rd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);Aj()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,Jj):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return m(this,null,function*(){yield pr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return m(this,null,function*(){let r=yield pr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return m(this,null,function*(){yield pr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),B0=Xj;var eU=(()=>{class t extends Rd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Ay=eU;function tU(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var nU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>m(this,null,function*(){return h(r.origin,s)})),l=yield tU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function $0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ay=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=$0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let v=p;if(v.data.eventId===l)switch(v.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function yn(){return window}function rU(t){yn().location.href=t}function H0(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}function iU(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function oU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sU(){return H0()?self:null}var q0="firebaseLocalStorageDb",aU=1,Md="firebaseLocalStorage",z0="fbase_key",Si=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Pd(t,e){return t.transaction([Md],e?"readwrite":"readonly").objectStore(Md)}function cU(){let t=indexedDB.deleteDatabase(q0);return new Si(t).toPromise()}function cy(){let t=indexedDB.open(q0,aU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Md,{keyPath:z0})}catch(i){n(i)}}),t.addEventListener("success",()=>m(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Md)?e(r):(r.close(),yield cU(),e(yield cy()))}))})}function u0(t,e,n){return m(this,null,function*(){let r=Pd(t,!0).put({[z0]:e,value:n});return new Si(r).toPromise()})}function uU(t,e){return m(this,null,function*(){let n=Pd(t,!1).get(e),r=yield new Si(n).toPromise();return r===void 0?null:r.value})}function l0(t,e){let n=Pd(t,!0).delete(e);return new Si(n).toPromise()}var lU=800,dU=3,hU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield cy(),this.db)})}_withRetries(n){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>dU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return H0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=nU._getInstance(sU()),this.receiver._subscribe("keyChanged",(n,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,r;if(this.activeServiceWorker=yield iU(),!this.activeServiceWorker)return;this.sender=new ay(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||oU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield cy();return yield u0(n,Ad,"1"),yield l0(n,Ad),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>u0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let r=yield this._withRetries(i=>uU(i,n));return this.localCache[n]=r,r})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>l0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(o=>{let s=Pd(o,!1).getAll();return new Si(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),lU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),G0=hU;var k8=k0("rcb"),F8=new Ti(3e4,6e4);function fU(t,e){return e?Jn(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ja=class extends Ya{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wm(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function pU(t){return j0(t.auth,new Ja(t),t.bypassAuthState)}function gU(t){let{auth:e,user:n}=t;return B(n,e,"internal-error"),Qj(n,new Ja(t),t.bypassAuthState)}function mU(t){return m(this,null,function*(){let{auth:e,user:n}=t;return B(n,e,"internal-error"),Kj(n,new Ja(t),t.bypassAuthState)})}var uy=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pU;case"linkViaPopup":case"linkViaRedirect":return mU;case"reauthViaPopup":case"reauthViaRedirect":return gU;default:vn(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var V8=new Ti(2e3,1e4);var yU="pendingRedirect",_d=new Map,ly=class t extends uy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=_d.get(this.auth._key());if(!e){try{let r=(yield vU(this.resolver,this.auth))?yield pr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return pr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function vU(t,e){return m(this,null,function*(){let n=wU(e),r=IU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function _U(t,e){_d.set(t._key(),e)}function IU(t){return Jn(t._redirectPersistence)}function wU(t){return vd(yU,t.config.apiKey,t.name)}function EU(t,e,n=!1){return m(this,null,function*(){if(en(t.app))return Promise.reject(Xn(t));let r=Ai(t),i=fU(r,e),s=yield new ly(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var DU=10*60*1e3,dy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!W0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ci(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DU&&this.cachedEventUids.clear(),this.cachedEventUids.has(d0(e))}saveEventToCache(e){this.cachedEventUids.add(d0(e)),this.lastProcessedEventTime=Date.now()}};function d0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function W0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function bU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W0(t);default:return!1}}function CU(n){return m(this,arguments,function*(t,e={}){return tr(t,"GET","/v1/projects",e)})}var TU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SU=/^https?/;function AU(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield CU(t);for(let n of e)try{if(RU(n))return}catch{}vn(t,"unauthorized-domain")})}function RU(t){let e=Qm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!SU.test(n))return!1;if(TU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var MU=new Ti(3e4,6e4);function h0(){let t=yn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NU(t){return new Promise((e,n)=>{var r,i,o;function s(){h0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h0(),n(Ci(t,"network-request-failed"))},timeout:MU.get()})}if(!((i=(r=yn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=yn().gapi)===null||o===void 0)&&o.load)s();else{let c=k0("iframefcb");return yn()[c]=()=>{gapi.load?s():n(Ci(t,"network-request-failed"))},O0(`${Pj()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Id=null,e})}var Id=null;function xU(t){return Id=Id||NU(t),Id}var PU=new Ti(5e3,15e3),OU="__/auth/iframe",kU="emulator/auth/iframe",FU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LU(t){let e=t.config;B(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?gy(e,kU):`https://${t.config.authDomain}/${OU}`,r={apiKey:e.apiKey,appName:t.name,v:Vr},i=VU.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ha(r).slice(1)}`}function jU(t){return m(this,null,function*(){let e=yield xU(t),n=yn().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:LU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FU,dontclear:!0},r=>new Promise((i,o)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ci(t,"network-request-failed"),c=yn().setTimeout(()=>{o(s)},PU.get());function u(){yn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var UU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BU=500,$U=600,HU="_blank",qU="http://localhost",Nd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function zU(t,e,n,r=BU,i=$U){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},UU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ze().toLowerCase();n&&(c=S0(l)?HU:n),C0(l)&&(e=e||qU,u.scrollbars="yes");let h=Object.entries(u).reduce((v,[w,S])=>`${v}${w}=${S},`,"");if(Sj(l)&&c!=="_self")return GU(e||"",c),new Nd(null);let p=window.open(e||"",c,h);B(p,t,"popup-blocked");try{p.focus()}catch{}return new Nd(p)}function GU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var WU="__/auth/handler",KU="emulator/auth/handler",QU=encodeURIComponent("fac");function f0(t,e,n,r,i,o){return m(this,null,function*(){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vr,eventId:i};if(e instanceof Sd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",VT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof oy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield t._getAppCheckToken(),l=u?`#${QU}=${encodeURIComponent(u)}`:"";return`${YU(t)}?${Ha(c).slice(1)}${l}`})}function YU({config:t}){return t.emulator?gy(t,KU):`https://${t.authDomain}/${WU}`}var Km="webStorageSupport",hy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ay,this._completeRedirectFn=EU,this._overrideRedirectResult=_U}_openPopup(e,n,r,i){return m(this,null,function*(){var o;Ur((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield f0(e,n,r,Qm(),i);return zU(e,s,$0())})}_openRedirect(e,n,r,i){return m(this,null,function*(){yield this._originValidation(e);let o=yield f0(e,n,r,Qm(),i);return rU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ur(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return m(this,null,function*(){let n=yield jU(e),r=new dy(e);return n.register("authEvent",i=>(B(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Km,{type:Km},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Km];s!==void 0&&n(!!s),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x0()||T0()||_y()}},K0=hy;var p0="@firebase/auth",g0="1.7.9";var fy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ZU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JU(t){wt(new Ge("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;B(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P0(t)},l=new ny(r,i,o,u);return Fj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wt(new Ge("auth-internal",e=>{let n=Ai(e.getProvider("auth").getImmediate());return(r=>new fy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(p0,g0,ZU(t)),De(p0,g0,"esm2017")}var XU=5*60,e2=Am("authIdTokenMaxAge")||XU,m0=null,t2=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e2)return;let i=n?.token;m0!==i&&(m0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ry(t=Kn()){let e=mn(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Iy(t,{popupRedirectResolver:K0,persistence:[G0,B0,Ay]}),r=Am("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=t2(o.toString());Sy(n,s,()=>s(n.currentUser)),Ty(n,c=>s(c))}}let i=Tm("auth");return i&&wy(n,`http://${i}`),n}function n2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Nj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Ci("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",n2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JU("Browser");var Q0="auth",nr=class{constructor(e){return e}},ec=class{constructor(){return bi(Q0)}};var My=new L("angularfire2.auth-instances");function G2(t,e){let n=Yo(Q0,t,e);return n&&new nr(n)}function W2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new nr(r)}}var K2={provide:ec,deps:[[new qe,My]]},Q2={provide:nr,useFactory:G2,deps:[[new qe,My],tn]};function Y0(t,...e){return De("angularfire",Qn.full,"auth"),Ft([Q2,K2,{provide:My,useFactory:W2(t),multi:!0,deps:[ye,at,Lr,Yn,[new qe,Qo],...e]}])}var Z0=vt(Dy,!0);var Od=vt(Ry,!0);var J0=vt(Cy,!0);var X0=vt(by,!0);var tS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nS={};var Br,Ny;(function(){var t;function e(D,y){function _(){}_.prototype=y.prototype,D.D=y.prototype,D.prototype=new _,D.prototype.constructor=D,D.C=function(E,b,T){for(var I=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)I[Sn-2]=arguments[Sn];return y.prototype[b].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)E[b]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(b=0;16>b;++b)E[b]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=D.g[0],_=D.g[1],b=D.g[2];var T=D.g[3],I=y+(T^_&(b^T))+E[0]+3614090360&4294967295;y=_+(I<<7&4294967295|I>>>25),I=T+(b^y&(_^b))+E[1]+3905402710&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(_^T&(y^_))+E[2]+606105819&4294967295,b=T+(I<<17&4294967295|I>>>15),I=_+(y^b&(T^y))+E[3]+3250441966&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(T^_&(b^T))+E[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(b^y&(_^b))+E[5]+1200080426&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(_^T&(y^_))+E[6]+2821735955&4294967295,b=T+(I<<17&4294967295|I>>>15),I=_+(y^b&(T^y))+E[7]+4249261313&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(T^_&(b^T))+E[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(b^y&(_^b))+E[9]+2336552879&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(_^T&(y^_))+E[10]+4294925233&4294967295,b=T+(I<<17&4294967295|I>>>15),I=_+(y^b&(T^y))+E[11]+2304563134&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(T^_&(b^T))+E[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(b^y&(_^b))+E[13]+4254626195&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(_^T&(y^_))+E[14]+2792965006&4294967295,b=T+(I<<17&4294967295|I>>>15),I=_+(y^b&(T^y))+E[15]+1236535329&4294967295,_=b+(I<<22&4294967295|I>>>10),I=y+(b^T&(_^b))+E[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^b&(y^_))+E[6]+3225465664&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(T^y))+E[11]+643717713&4294967295,b=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(b^T))+E[0]+3921069994&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(b^T&(_^b))+E[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^b&(y^_))+E[10]+38016083&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(T^y))+E[15]+3634488961&4294967295,b=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(b^T))+E[4]+3889429448&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(b^T&(_^b))+E[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^b&(y^_))+E[14]+3275163606&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(T^y))+E[3]+4107603335&4294967295,b=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(b^T))+E[8]+1163531501&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(b^T&(_^b))+E[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^b&(y^_))+E[2]+4243563512&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^_&(T^y))+E[7]+1735328473&4294967295,b=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(b^T))+E[12]+2368359562&4294967295,_=b+(I<<20&4294967295|I>>>12),I=y+(_^b^T)+E[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^b)+E[8]+2272392833&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^_)+E[11]+1839030562&4294967295,b=T+(I<<16&4294967295|I>>>16),I=_+(b^T^y)+E[14]+4259657740&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(_^b^T)+E[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^b)+E[4]+1272893353&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^_)+E[7]+4139469664&4294967295,b=T+(I<<16&4294967295|I>>>16),I=_+(b^T^y)+E[10]+3200236656&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(_^b^T)+E[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^b)+E[0]+3936430074&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^_)+E[3]+3572445317&4294967295,b=T+(I<<16&4294967295|I>>>16),I=_+(b^T^y)+E[6]+76029189&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(_^b^T)+E[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^b)+E[12]+3873151461&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^_)+E[15]+530742520&4294967295,b=T+(I<<16&4294967295|I>>>16),I=_+(b^T^y)+E[2]+3299628645&4294967295,_=b+(I<<23&4294967295|I>>>9),I=y+(b^(_|~T))+E[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~b))+E[7]+1126891415&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~_))+E[14]+2878612391&4294967295,b=T+(I<<15&4294967295|I>>>17),I=_+(T^(b|~y))+E[5]+4237533241&4294967295,_=b+(I<<21&4294967295|I>>>11),I=y+(b^(_|~T))+E[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~b))+E[3]+2399980690&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~_))+E[10]+4293915773&4294967295,b=T+(I<<15&4294967295|I>>>17),I=_+(T^(b|~y))+E[1]+2240044497&4294967295,_=b+(I<<21&4294967295|I>>>11),I=y+(b^(_|~T))+E[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~b))+E[15]+4264355552&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~_))+E[6]+2734768916&4294967295,b=T+(I<<15&4294967295|I>>>17),I=_+(T^(b|~y))+E[13]+1309151649&4294967295,_=b+(I<<21&4294967295|I>>>11),I=y+(b^(_|~T))+E[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~b))+E[11]+3174756917&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~_))+E[2]+718787259&4294967295,b=T+(I<<15&4294967295|I>>>17),I=_+(T^(b|~y))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var _=y-this.blockSize,E=this.B,b=this.h,T=0;T<y;){if(b==0)for(;T<=_;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<y;)if(E[b++]=D.charCodeAt(T++),b==this.blockSize){i(this,E),b=0;break}}else for(;T<y;)if(E[b++]=D[T++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var _=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=_&255,_/=256;for(this.u(D),D=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)D[_++]=this.g[y]>>>E&255;return D};function o(D,y){var _=c;return Object.prototype.hasOwnProperty.call(_,D)?_[D]:_[D]=y(D)}function s(D,y){this.h=y;for(var _=[],E=!0,b=D.length-1;0<=b;b--){var T=D[b]|0;E&&T==y||(_[b]=T,E=!1)}this.g=_}var c={};function u(D){return-128<=D&&128>D?o(D,function(y){return new s([y|0],0>y?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var y=[],_=1,E=0;D>=_;E++)y[E]=D/_|0,_*=4294967296;return new s(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return R(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,b=0;b<D.length;b+=8){var T=Math.min(8,D.length-b),I=parseInt(D.substring(b,b+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),v=u(1),w=u(16777216);t=s.prototype,t.m=function(){if(M(this))return-R(this).m();for(var D=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);D+=(0<=E?E:4294967296+E)*y,y*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(M(this))return"-"+R(this).toString(D);for(var y=l(Math.pow(D,6)),_=this,E="";;){var b=re(_,y).g;_=F(_,b.j(y));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(D);if(_=b,S(_))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function M(D){return D.h==-1}t.l=function(D){return D=F(this,D),M(D)?-1:S(D)?0:1};function R(D){for(var y=D.g.length,_=[],E=0;E<y;E++)_[E]=~D.g[E];return new s(_,~D.h).add(v)}t.abs=function(){return M(this)?R(this):this},t.add=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0,b=0;b<=y;b++){var T=E+(this.i(b)&65535)+(D.i(b)&65535),I=(T>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);E=I>>>16,T&=65535,I&=65535,_[b]=I<<16|T}return new s(_,_[_.length-1]&-2147483648?-1:0)};function F(D,y){return D.add(R(y))}t.j=function(D){if(S(this)||S(D))return p;if(M(this))return M(D)?R(this).j(R(D)):R(R(this).j(D));if(M(D))return R(this.j(R(D)));if(0>this.l(w)&&0>D.l(w))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<D.g.length;b++){var T=this.i(E)>>>16,I=this.i(E)&65535,Sn=D.i(b)>>>16,ws=D.i(b)&65535;_[2*E+2*b]+=I*ws,$(_,2*E+2*b),_[2*E+2*b+1]+=T*ws,$(_,2*E+2*b+1),_[2*E+2*b+1]+=I*Sn,$(_,2*E+2*b+1),_[2*E+2*b+2]+=T*Sn,$(_,2*E+2*b+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new s(_,0)};function $(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function q(D,y){this.g=D,this.h=y}function re(D,y){if(S(y))throw Error("division by zero");if(S(D))return new q(p,p);if(M(D))return y=re(R(D),y),new q(R(y.g),R(y.h));if(M(y))return y=re(D,R(y)),new q(R(y.g),y.h);if(30<D.g.length){if(M(D)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var _=v,E=y;0>=E.l(D);)_=Se(_),E=Se(E);var b=Q(_,1),T=Q(E,1);for(E=Q(E,2),_=Q(_,2);!S(E);){var I=T.add(E);0>=I.l(D)&&(b=b.add(_),T=I),E=Q(E,1),_=Q(_,1)}return y=F(D,b.j(y)),new q(b,y)}for(b=p;0<=D.l(y);){for(_=Math.max(1,Math.floor(D.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(_),I=T.j(y);M(I)||0<I.l(D);)_-=E,T=l(_),I=T.j(y);S(T)&&(T=v),b=b.add(T),D=F(D,I)}return new q(b,D)}t.A=function(D){return re(this,D).h},t.and=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&D.i(E);return new s(_,this.h&D.h)},t.or=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|D.i(E);return new s(_,this.h|D.h)},t.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^D.i(E);return new s(_,this.h^D.h)};function Se(D){for(var y=D.g.length+1,_=[],E=0;E<y;E++)_[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(_,D.h)}function Q(D,y){var _=y>>5;y%=32;for(var E=D.g.length-_,b=[],T=0;T<E;T++)b[T]=0<y?D.i(T+_)>>>y|D.i(T+_+1)<<32-y:D.i(T+_);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ny=nS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Br=nS.Integer=s}).apply(typeof tS<"u"?tS:typeof self<"u"?self:typeof window<"u"?window:{});var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var xy,Y2,Xo,Py,tc,Fd,Oy,ky,Fy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof kd=="object"&&kd];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in f))break e;f=f[C]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,C={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),a.apply(d,C)}}return function(){return a.apply(d,arguments)}}function v(a,d,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,v.apply(null,arguments)}function w(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function S(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,C,A){for(var P=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)P[Ie-2]=arguments[Ie];return d.prototype[C].apply(g,P)}}function M(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function R(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=a.length||0,A=g.length||0;a.length=C+A;for(let P=0;P<A;P++)a[C+P]=g[P]}else a.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(a){return/^[\s\xa0]*$/.test(a)}function q(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function re(a){return re[" "](a),a}re[" "]=function(){};var Se=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function Q(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function D(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function y(a){let d={};for(let f in a)d[f]=a[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)a[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function b(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function T(a){c.setTimeout(()=>{throw a},0)}function I(){var a=Nh;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Sn{constructor(){this.h=this.g=null}add(d,f){let g=ws.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ws=new F(()=>new MR,a=>a.reset());class MR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Es,Ds=!1,Nh=new Sn,sI=()=>{let a=c.Promise.resolve(void 0);Es=()=>{a.then(NR)}};var NR=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){T(f)}var d=ws;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Ds=!1};function lr(){this.s=this.s,this.C=this.C}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var xR=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function bs(a,d){if(rt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Se){e:{try{re(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:PR[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&bs.aa.h.call(this)}}S(bs,rt);var PR={2:"touch",3:"pen",4:"mouse"};bs.prototype.h=function(){bs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),OR=0;function kR(a,d,f,g,C){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++OR,this.da=this.fa=!1}function Tc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Sc(a){this.src=a,this.g={},this.h=0}Sc.prototype.add=function(a,d,f,g,C){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var P=Ph(a,d,g,C);return-1<P?(d=a[P],f||(d.fa=!1)):(d=new kR(d,this.src,A,!!g,C),d.fa=f,a.push(d)),d};function xh(a,d){var f=d.type;if(f in a.g){var g=a.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Tc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Ph(a,d,f,g){for(var C=0;C<a.length;++C){var A=a[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Oh="closure_lm_"+(1e6*Math.random()|0),kh={};function aI(a,d,f,g,C){if(g&&g.once)return uI(a,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)aI(a,d[A],f,g,C);return null}return f=jh(f),a&&a[Cs]?a.K(d,f,l(g)?!!g.capture:!!g,C):cI(a,d,f,!1,g,C)}function cI(a,d,f,g,C,A){if(!d)throw Error("Invalid event type");var P=l(C)?!!C.capture:!!C,Ie=Vh(a);if(Ie||(a[Oh]=Ie=new Sc(a)),f=Ie.add(d,f,g,P,A),f.proxy)return f;if(g=FR(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)xR||(C=P),C===void 0&&(C=!1),a.addEventListener(d.toString(),g,C);else if(a.attachEvent)a.attachEvent(dI(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function FR(){function a(f){return d.call(a.src,a.listener,f)}let d=VR;return a}function uI(a,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)uI(a,d[A],f,g,C);return null}return f=jh(f),a&&a[Cs]?a.L(d,f,l(g)?!!g.capture:!!g,C):cI(a,d,f,!0,g,C)}function lI(a,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)lI(a,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=jh(f),a&&a[Cs]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=Ph(A,f,g,C),-1<f&&(Tc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=Vh(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Ph(d,f,g,C)),(f=-1<a?d[a]:null)&&Fh(f))}function Fh(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Cs])xh(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(dI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Vh(d))?(xh(f,a),f.h==0&&(f.src=null,d[Oh]=null)):Tc(a)}}}function dI(a){return a in kh?kh[a]:kh[a]="on"+a}function VR(a,d){if(a.da)a=!0;else{d=new bs(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Fh(a),a=f.call(g,d)}return a}function Vh(a){return a=a[Oh],a instanceof Sc?a:null}var Lh="__closure_events_fn_"+(1e9*Math.random()>>>0);function jh(a){return typeof a=="function"?a:(a[Lh]||(a[Lh]=function(d){return a.handleEvent(d)}),a[Lh])}function it(){lr.call(this),this.i=new Sc(this),this.M=this,this.F=null}S(it,lr),it.prototype[Cs]=!0,it.prototype.removeEventListener=function(a,d,f,g){lI(this,a,d,f,g)};function dt(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new rt(d,a);else if(d instanceof rt)d.target=d.target||a;else{var C=d;d=new rt(g,a),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];C=Ac(P,g,!0,d)&&C}if(P=d.g=a,C=Ac(P,g,!0,d)&&C,C=Ac(P,g,!1,d)&&C,f)for(A=0;A<f.length;A++)P=d.g=f[A],C=Ac(P,g,!1,d)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Tc(f[g]);delete a.g[d],a.h--}}this.F=null},it.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},it.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Ac(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var Ie=P.listener,Ke=P.ha||P.src;P.fa&&xh(a.i,P),C=Ie.call(Ke,g)!==!1&&C}}return C&&!g.defaultPrevented}function hI(a,d,f){if(typeof a=="function")f&&(a=v(a,f));else if(a&&typeof a.handleEvent=="function")a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function fI(a){a.g=hI(()=>{a.g=null,a.i&&(a.i=!1,fI(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class LR extends lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:fI(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(a){lr.call(this),this.h=a,this.g={}}S(Ts,lr);var pI=[];function gI(a){Q(a.g,function(d,f){this.g.hasOwnProperty(f)&&Fh(d)},a),a.g={}}Ts.prototype.N=function(){Ts.aa.N.call(this),gI(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uh=c.JSON.stringify,jR=c.JSON.parse,UR=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Bh(){}Bh.prototype.h=null;function mI(a){return a.h||(a.h=a.i())}function yI(){}var Ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $h(){rt.call(this,"d")}S($h,rt);function Hh(){rt.call(this,"c")}S(Hh,rt);var Gr={},vI=null;function Rc(){return vI=vI||new it}Gr.La="serverreachability";function _I(a){rt.call(this,Gr.La,a)}S(_I,rt);function As(a){let d=Rc();dt(d,new _I(d))}Gr.STAT_EVENT="statevent";function II(a,d){rt.call(this,Gr.STAT_EVENT,a),this.stat=d}S(II,rt);function ht(a){let d=Rc();dt(d,new II(d,a))}Gr.Ma="timingevent";function wI(a,d){rt.call(this,Gr.Ma,a),this.size=d}S(wI,rt);function Rs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Ms(){this.g=!0}Ms.prototype.xa=function(){this.g=!1};function BR(a,d,f,g,C,A){a.info(function(){if(a.g)if(A)for(var P="",Ie=A.split("&"),Ke=0;Ke<Ie.length;Ke++){var ge=Ie[Ke].split("=");if(1<ge.length){var ot=ge[0];ge=ge[1];var st=ot.split("_");P=2<=st.length&&st[1]=="type"?P+(ot+"="+ge+"&"):P+(ot+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+P})}function $R(a,d,f,g,C,A,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+P})}function $i(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+qR(a,f)+(g?" "+g:"")})}function HR(a,d){a.info(function(){return"TIMEOUT: "+d})}Ms.prototype.info=function(){};function qR(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<C.length;P++)C[P]=""}}}}return Uh(f)}catch{return d}}var Mc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},EI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qh;function Nc(){}S(Nc,Bh),Nc.prototype.g=function(){return new XMLHttpRequest},Nc.prototype.i=function(){return{}},qh=new Nc;function dr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new Ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new DI}function DI(){this.i=null,this.g="",this.h=!1}var bI={},zh={};function Gh(a,d,f){a.L=1,a.v=kc(An(d)),a.m=f,a.P=!0,CI(a,null)}function CI(a,d){a.F=Date.now(),xc(a),a.A=An(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),jI(f.i,"t",g),a.C=0,f=a.j.J,a.h=new DI,a.g=rw(a.j,f?d:null,!a.m),0<a.O&&(a.M=new LR(v(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(pI[0]=C.toString()),C=pI);for(var A=0;A<C.length;A++){var P=aI(f,C[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),As(),BR(a.i,a.u,a.A,a.l,a.R,a.m)}dr.prototype.ca=function(a){a=a.target;let d=this.M;d&&Rn(a)==3?d.j():this.Y(a)},dr.prototype.Y=function(a){try{if(a==this.g)e:{let st=Rn(this.g);var d=this.g.Ba();let zi=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||GI(this.g)))){this.J||st!=4||d==7||(d==8||0>=zi?As(3):As(2)),Wh(this);var f=this.g.Z();this.X=f;t:if(TI(this)){var g=GI(this.g);a="";var C=g.length,A=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Ns(this);var P="";break t}this.h.i=new c.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,$R(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,Ke=this.g;if((Ie=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ie)){var ge=Ie;break t}}ge=null}if(f=ge)$i(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kh(this,f);else{this.o=!1,this.s=3,ht(12),Wr(this),Ns(this);break e}}if(this.P){f=!0;let Ht;for(;!this.J&&this.C<P.length;)if(Ht=zR(this,P),Ht==zh){st==4&&(this.s=4,ht(14),f=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==bI){this.s=4,ht(15),$i(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else $i(this.i,this.l,Ht,null),Kh(this,Ht);if(TI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||P.length!=0||this.h.h||(this.s=1,ht(16),f=!1),this.o=this.o&&f,!f)$i(this.i,this.l,P,"[Invalid Chunked Response]"),Wr(this),Ns(this);else if(0<P.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),ef(ot),ot.M=!0,ht(11))}}else $i(this.i,this.l,P,null),Kh(this,P);st==4&&Wr(this),this.o&&!this.J&&(st==4?XI(this.j,this):(this.o=!1,xc(this)))}else cM(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Wr(this),Ns(this)}}}catch{}finally{}};function TI(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function zR(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?zh:(f=Number(d.substring(f,g)),isNaN(f)?bI:(g+=1,g+f>d.length?zh:(d=d.slice(g,g+f),a.C=g+f,d)))}dr.prototype.cancel=function(){this.J=!0,Wr(this)};function xc(a){a.S=Date.now()+a.I,SI(a,a.I)}function SI(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Rs(v(a.ba,a),d)}function Wh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}dr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(HR(this.i,this.A),this.L!=2&&(As(),ht(17)),Wr(this),this.s=2,Ns(this)):SI(this,this.S-a)};function Ns(a){a.j.G==0||a.J||XI(a.j,a)}function Wr(a){Wh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,gI(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Kh(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Qh(f.h,a))){if(!a.K&&Qh(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Uc(f),Lc(f);else break e;Xh(f),ht(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Rs(v(f.Za,f),6e3));if(1>=MI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Qr(f,11)}else if((a.K||f.g==a)&&Uc(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ge=C[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];let ot=ge[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let st=ge[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));let zi=ge[5];zi!=null&&typeof zi=="number"&&0<zi&&(g=1.5*zi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ht=a.g;if(Ht){let $c=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($c){var A=g.h;A.g||$c.indexOf("spdy")==-1&&$c.indexOf("quic")==-1&&$c.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Yh(A,A.h),A.h=null))}if(g.D){let tf=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;tf&&(g.ya=tf,be(g.I,g.D,tf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=a;if(g.qa=nw(g,g.J?g.ia:null,g.W),P.K){NI(g.h,P);var Ie=P,Ke=g.L;Ke&&(Ie.I=Ke),Ie.B&&(Wh(Ie),xc(Ie)),g.g=P}else ZI(g);0<f.i.length&&jc(f)}else ge[0]!="stop"&&ge[0]!="close"||Qr(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Qr(f,7):Jh(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}As(4)}catch{}}var GR=class{constructor(a,d){this.g=a,this.map=d}};function AI(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function RI(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function MI(a){return a.h?1:a.g?a.g.size:0}function Qh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Yh(a,d){a.g?a.g.add(d):a.h=d}function NI(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}AI.prototype.cancel=function(){if(this.i=xI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function xI(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return M(a.i)}function WR(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function KR(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function PI(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=KR(a),g=WR(a),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],a)}var OI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QR(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),C=null;if(0<=g){var A=a[f].substring(0,g);C=a[f].substring(g+1)}else A=a[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Kr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Kr){this.h=a.h,Pc(this,a.j),this.o=a.o,this.g=a.g,Oc(this,a.s),this.l=a.l;var d=a.i,f=new Os;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),kI(this,f),this.m=a.m}else a&&(d=String(a).match(OI))?(this.h=!1,Pc(this,d[1]||"",!0),this.o=xs(d[2]||""),this.g=xs(d[3]||"",!0),Oc(this,d[4]),this.l=xs(d[5]||"",!0),kI(this,d[6]||"",!0),this.m=xs(d[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}Kr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ps(d,FI,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ps(d,FI,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ps(f,f.charAt(0)=="/"?JR:ZR,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ps(f,eM)),a.join("")};function An(a){return new Kr(a)}function Pc(a,d,f){a.j=f?xs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Oc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function kI(a,d,f){d instanceof Os?(a.i=d,tM(a.i,a.h)):(f||(d=Ps(d,XR)),a.i=new Os(d,a.h))}function be(a,d,f){a.i.set(d,f)}function kc(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function xs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ps(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,YR),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function YR(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var FI=/[#\/\?@]/g,ZR=/[#\?:]/g,JR=/[#\?]/g,XR=/[#\?@]/g,eM=/#/g;function Os(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function hr(a){a.g||(a.g=new Map,a.h=0,a.i&&QR(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Os.prototype,t.add=function(a,d){hr(this),this.i=null,a=Hi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function VI(a,d){hr(a),d=Hi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function LI(a,d){return hr(a),d=Hi(a,d),a.g.has(d)}t.forEach=function(a,d){hr(this),this.g.forEach(function(f,g){f.forEach(function(C){a.call(d,C,g,this)},this)},this)},t.na=function(){hr(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=a[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(a){hr(this);let d=[];if(typeof a=="string")LI(this,a)&&(d=d.concat(this.g.get(Hi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return hr(this),this.i=null,a=Hi(this,a),LI(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function jI(a,d,f){VI(a,d),0<f.length&&(a.i=null,a.g.set(Hi(a,d),M(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var C=A;P[g]!==""&&(C+="="+encodeURIComponent(String(P[g]))),a.push(C)}}return this.i=a.join("&")};function Hi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function tM(a,d){d&&!a.j&&(hr(a),a.i=null,a.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(VI(this,g),jI(this,C,f))},a)),a.j=d}function nM(a,d){let f=new Ms;if(c.Image){let g=new Image;g.onload=w(fr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=w(fr,f,"TestLoadImage: error",!1,d,g),g.onabort=w(fr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=w(fr,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function rM(a,d){let f=new Ms,g=new AbortController,C=setTimeout(()=>{g.abort(),fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?fr(f,"TestPingServer: ok",!0,d):fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),fr(f,"TestPingServer: error",!1,d)})}function fr(a,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function iM(){this.g=new UR}function oM(a,d,f){let g=f||"";try{PI(a,function(C,A){let P=C;l(C)&&(P=Uh(C)),d.push(g+A+"="+encodeURIComponent(P))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ks(a){this.l=a.Ub||null,this.j=a.eb||!1}S(ks,Bh),ks.prototype.g=function(){return new Fc(this.l,this.j)},ks.prototype.i=function(a){return function(){return a}}({});function Fc(a,d){it.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Fc,it),t=Fc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Vs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;UI(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function UI(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Fs(this):Vs(this),this.readyState==3&&UI(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Fs(this))},t.Qa=function(a){this.g&&(this.response=a,Fs(this))},t.ga=function(){this.g&&Fs(this)};function Fs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Vs(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Vs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function BI(a){let d="";return Q(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Zh(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=BI(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):be(a,d,f))}function Ae(a){it.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ae,it);var sM=/^https?$/i,aM=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qh.g(),this.v=this.o?mI(this.o):mI(qh),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){$I(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(aM,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zI(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){$I(this,A)}};function $I(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,HI(a),Vc(a)}function HI(a){a.A||(a.A=!0,dt(a,"complete"),dt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,dt(this,"complete"),dt(this,"abort"),Vc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vc(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qI(this):this.bb())},t.bb=function(){qI(this)};function qI(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Rn(a)!=4||a.Z()!=2)){if(a.u&&Rn(a)==4)hI(a.Ea,0,a);else if(dt(a,"readystatechange"),Rn(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var C=String(a.D).match(OI)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),g=!sM.test(C?C.toLowerCase():"")}f=g}if(f)dt(a,"complete"),dt(a,"success");else{a.m=6;try{var A=2<Rn(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",HI(a)}}finally{Vc(a)}}}}function Vc(a,d){if(a.g){zI(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||dt(a,"ready");try{f.onreadystatechange=g}catch{}}}function zI(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),jR(d)}};function GI(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cM(a){let d={};a=(a.g&&2<=Rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if($(a[g]))continue;var f=b(a[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function WI(a){this.Aa=0,this.i=[],this.j=new Ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,a),this.cb=Ls("retryDelaySeedMs",1e4,a),this.Wa=Ls("forwardChannelMaxRetries",2,a),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new AI(a&&a.concurrentRequestLimit),this.Da=new iM,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=WI.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){ht(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=nw(this,null,this.W),jc(this)};function Jh(a){if(KI(a),a.G==3){var d=a.U++,f=An(a.I);if(be(f,"SID",a.K),be(f,"RID",d),be(f,"TYPE","terminate"),js(a,f),d=new dr(a,a.j,d),d.L=2,d.v=kc(An(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=rw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),xc(d)}tw(a)}function Lc(a){a.g&&(ef(a),a.g.cancel(),a.g=null)}function KI(a){Lc(a),a.u&&(c.clearTimeout(a.u),a.u=null),Uc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function jc(a){if(!RI(a.h)&&!a.s){a.s=!0;var d=a.Ga;Es||sI(),Ds||(Es(),Ds=!0),Nh.add(d,a),a.B=0}}function uM(a,d){return MI(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Rs(v(a.Ga,a,d),ew(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let C=new dr(this,this.j,a),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=YI(this,C,d),f=An(this.I),be(f,"RID",a),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),js(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(BI(A)))+"&"+d:this.m&&Zh(f,this.m,A)),Yh(this.h,C),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),C.T=!0,Gh(C,f,null)):Gh(C,f,d),this.G=2}}else this.G==3&&(a?QI(this,a):this.i.length==0||RI(this.h)||QI(this))};function QI(a,d){var f;d?f=d.l:f=a.U++;let g=An(a.I);be(g,"SID",a.K),be(g,"RID",f),be(g,"AID",a.T),js(a,g),a.m&&a.o&&Zh(g,a.m,a.o),f=new dr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=YI(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Yh(a.h,f),Gh(f,g,d)}function js(a,d){a.H&&Q(a.H,function(f,g){be(d,g,f)}),a.l&&PI({},function(f,g){be(d,g,f)})}function YI(a,d,f){f=Math.min(a.i.length,f);var g=a.l?v(a.l.Na,a.l,a):null;e:{var C=a.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=C[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let Ie=!0;for(let Ke=0;Ke<f;Ke++){let ge=C[Ke].g,ot=C[Ke].map;if(ge-=A,0>ge)A=Math.max(0,C[Ke].g-100),Ie=!1;else try{oM(ot,P,"req"+ge+"_")}catch{g&&g(ot)}}if(Ie){g=P.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function ZI(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Es||sI(),Ds||(Es(),Ds=!0),Nh.add(d,a),a.v=0}}function Xh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Rs(v(a.Fa,a),ew(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,JI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Rs(v(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Lc(this),JI(this))};function ef(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function JI(a){a.g=new dr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=An(a.qa);be(d,"RID","rpc"),be(d,"SID",a.K),be(d,"AID",a.T),be(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(d,"TO",a.ja),be(d,"TYPE","xmlhttp"),js(a,d),a.m&&a.o&&Zh(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=kc(An(d)),f.m=null,f.P=!0,CI(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Lc(this),Xh(this),ht(19))};function Uc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function XI(a,d){var f=null;if(a.g==d){Uc(a),ef(a),a.g=null;var g=2}else if(Qh(a.h,d))f=d.D,NI(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=a.B;g=Rc(),dt(g,new wI(g,f)),jc(a)}else ZI(a);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&uM(a,d)||g==2&&Xh(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),C){case 1:Qr(a,5);break;case 4:Qr(a,10);break;case 3:Qr(a,6);break;default:Qr(a,2)}}}function ew(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Qr(a,d){if(a.j.info("Error code "+d),d==2){var f=v(a.fb,a),g=a.Xa;let C=!g;g=new Kr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pc(g,"https"),kc(g),C?nM(g.toString(),f):rM(g.toString(),f)}else ht(2);a.G=0,a.l&&a.l.sa(d),tw(a),KI(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function tw(a){if(a.G=0,a.ka=[],a.l){let d=xI(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,M(a.i),a.i.length=0),a.l.ra()}}function nw(a,d,f){var g=f instanceof Kr?An(f):new Kr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Oc(g,g.s);else{var C=c.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Kr(null);g&&Pc(A,g),d&&(A.g=d),C&&Oc(A,C),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&be(g,f,d),be(g,"VER",a.la),js(a,g),g}function rw(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ae(new ks({eb:f})):new Ae(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iw(){}t=iw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bc(){}Bc.prototype.g=function(a,d){return new Et(a,d)};function Et(a,d){it.call(this),this.g=new WI(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!$(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new qi(this)}S(Et,it),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Jh(this.g)},Et.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Uh(a),a=f);d.i.push(new GR(d.Ya++,a)),d.G==3&&jc(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,Jh(this.g),delete this.g,Et.aa.N.call(this)};function ow(a){$h.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}S(ow,$h);function sw(){Hh.call(this),this.status=1}S(sw,Hh);function qi(a){this.g=a}S(qi,iw),qi.prototype.ua=function(){dt(this.g,"a")},qi.prototype.ta=function(a){dt(this.g,new ow(a))},qi.prototype.sa=function(a){dt(this.g,new sw)},qi.prototype.ra=function(){dt(this.g,"b")},Bc.prototype.createWebChannel=Bc.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,Fy=rr.createWebChannelTransport=function(){return new Bc},ky=rr.getStatEventTarget=function(){return Rc()},Oy=rr.Event=Gr,Fd=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mc.NO_ERROR=0,Mc.TIMEOUT=8,Mc.HTTP_ERROR=6,tc=rr.ErrorCode=Mc,EI.COMPLETE="complete",Py=rr.EventType=EI,yI.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",it.prototype.listen=it.prototype.K,Xo=rr.WebChannel=yI,Y2=rr.FetchXmlHttpFactory=ks,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,xy=rr.XhrIo=Ae}).apply(typeof kd<"u"?kd:typeof self<"u"?self:typeof window<"u"?window:{});var rS="@firebase/firestore";var We=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");var vs="10.14.0";var xi=new kr("@firebase/firestore");function nc(){return xi.logLevel}function V(t,...e){if(xi.logLevel<=ue.DEBUG){let n=e.map(I_);xi.debug(`Firestore (${vs}): ${t}`,...n)}}function ir(t,...e){if(xi.logLevel<=ue.ERROR){let n=e.map(I_);xi.error(`Firestore (${vs}): ${t}`,...n)}}function os(t,...e){if(xi.logLevel<=ue.WARN){let n=e.map(I_);xi.warn(`Firestore (${vs}): ${t}`,...n)}}function I_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function G(t="Unexpected state"){let e=`FIRESTORE (${vs}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function _e(t,e){t||G()}function K(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends yt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Bd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},By=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(We.UNAUTHENTICATED))}shutdown(){}},$y=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Hy=class{constructor(e){this.t=e,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Bd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new We(e)}},qy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=We.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},zy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(We.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new Gy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Z2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $d=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Z2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function me(t,e){return t<e?-1:t>e?1:0}function ss(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var nt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new nt(0,0))}static max(){return new t(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ne=class t extends Hd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},J2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mt=class t extends Hd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return J2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new j(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new j(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new j(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};var Ky=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ky.UNKNOWN_ID=-1;function X2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new Pi(i,H.empty(),e)}function eB(t){return new Pi(t.readTime,t.key,-1)}var Pi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(J.min(),H.empty(),-1)}static max(){return new t(J.max(),H.empty(),-1)}};function tB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}var nB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ic(t){return m(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==nB)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function rB(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wc(t){return t.name==="IndexedDbTransactionError"}var OS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function yh(t){return t==null}function cc(t){return t===0&&1/t==-1/0}function iB(t){return typeof t=="number"&&Number.isInteger(t)&&!cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var oB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xK=[...oB,"documentOverlays"],sB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aB=sB,cB=[...aB,"indexConfiguration","indexState","indexEntries"];var PK=[...cB,"globals"];function iS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _s(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rs(this.root,e,this.comparator,!0)}},rs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},En=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,i,o){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ut=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qd(this.data.getIterator())}getIteratorFrom(e){return new qd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},qd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var In=class t{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ut(Mt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ss(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var zd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var uB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(_e(!!t),typeof t=="string"){let e=0,n=uB.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}function w_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function E_(t){let e=t.mapValue.fields.__previous_value__;return w_(e)?E_(e):e}function uc(t){let e=or(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}var Yy=class{constructor(e,n,r,i,o,s,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},Gd=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Vd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?w_(t)?4:VS(t)?9007199254740991:FS(t)?10:11:G()}function Cn(t,e){if(t===e)return!0;let n=Oi(t);if(n!==Oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uc(t).isEqual(uc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),c=or(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Hr(i.bytesValue).isEqual(Hr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),c=Ce(o.doubleValue);return s===c?cc(s)===cc(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return ss(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(iS(s)!==iS(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Cn(s[u],c[u])))return!1;return!0}(t,e);default:return G()}}function lc(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function as(t,e){if(t===e)return 0;let n=Oi(t),r=Oi(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return oS(t.timestampValue,e.timestampValue);case 4:return oS(uc(t),uc(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(o,s){let c=Hr(o),u=Hr(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=me(c[l],u[l]);if(h!==0)return h}return me(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=me(Ce(o.latitude),Ce(s.latitude));return c!==0?c:me(Ce(o.longitude),Ce(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sS(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,h;let p=o.fields||{},v=s.fields||{},w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,S=(u=v.value)===null||u===void 0?void 0:u.arrayValue,M=me(((l=w?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:sS(w,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Vd.mapValue&&s===Vd.mapValue)return 0;if(o===Vd.mapValue)return 1;if(s===Vd.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let v=me(u[p],h[p]);if(v!==0)return v;let w=as(c[u[p]],l[h[p]]);if(w!==0)return w}return me(u.length,h.length)}(t.mapValue,e.mapValue);default:throw G()}}function oS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);let n=or(t),r=or(e),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function sS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=as(n[i],r[i]);if(o)return o}return me(n.length,r.length)}function cs(t){return Zy(t)}function Zy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Zy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Zy(n.fields[s])}`;return i+"}"}(t.mapValue):G()}function Jy(t){return!!t&&"integerValue"in t}function D_(t){return!!t&&"arrayValue"in t}function aS(t){return!!t&&"nullValue"in t}function cS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jd(t){return!!t&&"mapValue"in t}function FS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return _s(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ic(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var nn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=Mt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=ic(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());jd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_s(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ic(this.value))}};function LS(t){let e=[];return _s(t.fields,(n,r)=>{let i=new Mt([n]);if(jd(r)){let o=LS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new In(e)}var rn=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var us=class{constructor(e,n){this.position=e,this.inclusive=n}};function uS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),n.key):r=as(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function lS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}var ls=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function lB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Wd=class{},He=class t extends Wd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ev(e,n,r):n==="array-contains"?new rv(e,r):n==="in"?new iv(e,r):n==="not-in"?new ov(e,r):n==="array-contains-any"?new sv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tv(e,r):new nv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(as(n,this.value)):n!==null&&Oi(this.value)===Oi(n)&&this.matchesComparison(as(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tn=class t extends Wd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return jS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function jS(t){return t.op==="and"}function US(t){return dB(t)&&jS(t)}function dB(t){for(let e of t.filters)if(e instanceof Tn)return!1;return!0}function Xy(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+cs(t.value);if(US(t))return t.filters.map(e=>Xy(e)).join(",");{let e=t.filters.map(n=>Xy(n)).join(",");return`${t.op}(${e})`}}function BS(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&Cn(r.value,i.value)}(t,e):t instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&BS(s,i.filters[c]),!0):!1}(t,e):void G()}function $S(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${cs(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map($S).join(" ,")+"}"}(t):"Filter"}var ev=class extends He{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},tv=class extends He{constructor(e,n){super(e,"in",n),this.keys=HS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},nv=class extends He{constructor(e,n){super(e,"not-in",n),this.keys=HS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function HS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var rv=class extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return D_(n)&&lc(n.arrayValue,this.value)}},iv=class extends He{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&lc(this.value.arrayValue,n)}},ov=class extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!lc(this.value.arrayValue,n)}},sv=class extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!D_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lc(this.value.arrayValue,r))}};var av=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function dS(t,e=null,n=[],r=[],i=null,o=null,s=null){return new av(t,e,n,r,i,o,s)}function b_(t){let e=K(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cs(r)).join(",")),e.ue=n}return e.ue}function C_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lS(t.startAt,e.startAt)&&lS(t.endAt,e.endAt)}function cv(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ds=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function hB(t,e,n,r,i,o,s,c){return new ds(t,e,n,r,i,o,s,c)}function T_(t){return new ds(t)}function hS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fB(t){return t.collectionGroup!==null}function oc(t){let e=K(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new ut(Mt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ls(o,r))}),n.has(Mt.keyField().canonicalString())||e.ce.push(new ls(Mt.keyField(),r))}return e.ce}function Dn(t){let e=K(t);return e.le||(e.le=pB(e,oc(t))),e.le}function pB(t,e){if(t.limitType==="F")return dS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ls(i.field,o)});let n=t.endAt?new us(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new us(t.startAt.position,t.startAt.inclusive):null;return dS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uv(t,e,n){return new ds(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vh(t,e){return C_(Dn(t),Dn(e))&&t.limitType===e.limitType}function qS(t){return`${b_(Dn(t))}|lt:${t.limitType}`}function es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$S(i)).join(", ")}]`),yh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>cs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>cs(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function _h(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of oc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=uS(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,oc(r),i)||r.endAt&&!function(s,c,u){let l=uS(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,oc(r),i))}(t,e)}function gB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zS(t){return(e,n)=>{let r=!1;for(let i of oc(t)){let o=mB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function mB(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?as(u,l):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var qr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kS(this.inner)}size(){return this.innerSize}};var yB=new xe(H.comparator);function sr(){return yB}var GS=new xe(H.comparator);function rc(...t){let e=GS;for(let n of t)e=e.insert(n.key,n);return e}function WS(t){let e=GS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ri(){return sc()}function KS(){return sc()}function sc(){return new qr(t=>t.toString(),(t,e)=>t.isEqual(e))}var vB=new xe(H.comparator),_B=new ut(H.comparator);function le(...t){let e=_B;for(let n of t)e=e.add(n);return e}var IB=new ut(me);function wB(){return IB}function S_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function QS(t){return{integerValue:""+t}}function EB(t,e){return iB(e)?QS(e):S_(t,e)}var hs=class{constructor(){this._=void 0}};function DB(t,e,n){return t instanceof fs?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&w_(o)&&(o=E_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ki?ZS(t,e):t instanceof Fi?JS(t,e):function(i,o){let s=YS(i,o),c=fS(s)+fS(i.Pe);return Jy(s)&&Jy(i.Pe)?QS(c):S_(i.serializer,c)}(t,e)}function bB(t,e,n){return t instanceof ki?ZS(t,e):t instanceof Fi?JS(t,e):n}function YS(t,e){return t instanceof ps?function(r){return Jy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var fs=class extends hs{},ki=class extends hs{constructor(e){super(),this.elements=e}};function ZS(t,e){let n=XS(e);for(let r of t.elements)n.some(i=>Cn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Fi=class extends hs{constructor(e){super(),this.elements=e}};function JS(t,e){let n=XS(e);for(let r of t.elements)n=n.filter(i=>!Cn(i,r));return{arrayValue:{values:n}}}var ps=class extends hs{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function fS(t){return Ce(t.integerValue||t.doubleValue)}function XS(t){return D_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ki&&i instanceof ki||r instanceof Fi&&i instanceof Fi?ss(r.elements,i.elements,Cn):r instanceof ps&&i instanceof ps?Cn(r.Pe,i.Pe):r instanceof fs&&i instanceof fs}(t.transform,e.transform)}var lv=class{constructor(e,n){this.version=e,this.transformResults=n}},Ni=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ud(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var gs=class{};function eA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kd(t.key,Ni.none()):new Vi(t.key,t.data,Ni.none());{let n=t.data,r=nn.empty(),i=new ut(Mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ar(t.key,r,new In(i.toArray()),Ni.none())}}function TB(t,e,n){t instanceof Vi?function(i,o,s){let c=i.value.clone(),u=gS(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof ar?function(i,o,s){if(!Ud(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=gS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(tA(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ac(t,e,n,r){return t instanceof Vi?function(o,s,c,u){if(!Ud(o.precondition,s))return c;let l=o.value.clone(),h=mS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ar?function(o,s,c,u){if(!Ud(o.precondition,s))return c;let l=mS(o.fieldTransforms,u,s),h=s.data;return h.setAll(tA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return Ud(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function SB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=YS(r.transform,i||null);o!=null&&(n===null&&(n=nn.empty()),n.set(r.field,o))}return n||null}function pS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ss(r,i,(o,s)=>CB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Vi=class extends gs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ar=class extends gs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function tA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function gS(t,e,n){let r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,bB(s,c,n[i]))}return r}function mS(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,DB(o,s,e))}return r}var Kd=class extends gs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},dv=class extends gs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var hv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&TB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=KS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=eA(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(n,r)=>pS(n,r))&&ss(this.baseMutations,e.baseMutations,(n,r)=>pS(n,r))}},fv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return vB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var pv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Le,fe;function AB(t){switch(t){default:return G();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function nA(t){if(t===void 0)return ir("GRPC error has no .code"),N.UNKNOWN;switch(t){case Le.OK:return N.OK;case Le.CANCELLED:return N.CANCELLED;case Le.UNKNOWN:return N.UNKNOWN;case Le.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Le.INTERNAL:return N.INTERNAL;case Le.UNAVAILABLE:return N.UNAVAILABLE;case Le.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Le.NOT_FOUND:return N.NOT_FOUND;case Le.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Le.ABORTED:return N.ABORTED;case Le.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Le.DATA_LOSS:return N.DATA_LOSS;default:return G()}}(fe=Le||(Le={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var yS=null;function RB(){return new TextEncoder}var MB=new Br([4294967295,4294967295],0);function vS(t){let e=RB().encode(t),n=new Ny;return n.update(e),new Uint8Array(n.digest())}function _S(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Br([n,r],0),new Br([i,o],0)]}var mv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mi(`Invalid padding: ${n}`);if(r<0)throw new Mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Br.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Br.fromNumber(r)));return i.compare(MB)===1&&(i=new Br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=vS(e),[r,i]=_S(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.Ie===0)return;let n=vS(e),[r,i]=_S(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Mi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(J.min(),i,new xe(me),sr(),le())}},dc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var is=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Yd=class{constructor(e,n){this.targetId=e,this.me=n}},Zd=class{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Jd=class{constructor(){this.fe=0,this.ge=wS(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G()}}),new dc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=wS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},yv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=sr(),this.qe=IS(),this.Qe=new xe(me)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(cv(o))if(r===0){let s=new H(o.path);this.Ue(n,s,rn.newNoDocument(s,J.min()))}else _e(r===1);else{let s=this.Ye(n);if(s!==r){let c=this.Ze(e),u=c?this.Xe(c,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}yS?.et(function(h,p,v,w,S){var M,R,F,$,q,re;let Se={localCacheCount:h,existenceFilterCount:p.count,databaseId:v.database,projectId:v.projectId},Q=p.unchangedNames;return Q&&(Se.bloomFilter={applied:S===0,hashCount:(M=Q?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:($=(F=(R=Q?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&$!==void 0?$:0,padding:(re=(q=Q?.bits)===null||q===void 0?void 0:q.padding)!==null&&re!==void 0?re:0,mightContain:D=>{var y;return(y=w?.mightContain(D))!==null&&y!==void 0&&y}}),Se}(s,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=Hr(r).toUint8Array()}catch(u){if(u instanceof zd)return os("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new mv(s,i,o)}catch(u){return os(u instanceof Mi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let c=this.Je(s);if(c){if(o.current&&cv(c.target)){let u=new H(c.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,rn.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=le();this.qe.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Qd(e,n,this.Qe,this.ke,r);return this.ke=sr(),this.qe=IS(),this.Qe=new xe(me),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Jd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(me),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function IS(){return new xe(H.comparator)}function wS(){return new xe(H.comparator)}var NB={asc:"ASCENDING",desc:"DESCENDING"},xB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PB={and:"AND",or:"OR"},vv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function _v(t,e){return t.useProto3Json||yh(e)?e:{value:e}}function Xd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OB(t,e){return Xd(t,e.toTimestamp())}function bn(t){return _e(!!t),J.fromTimestamp(function(n){let r=or(n);return new nt(r.seconds,r.nanos)}(t))}function A_(t,e){return Iv(t,e).canonicalString()}function Iv(t,e){let n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iA(t){let e=Ne.fromString(t);return _e(uA(e)),e}function wv(t,e){return A_(t.databaseId,e.path)}function Vy(t,e){let n=iA(e);if(n.get(1)!==t.databaseId.projectId)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(sA(n))}function oA(t,e){return A_(t.databaseId,e)}function kB(t){let e=iA(t);return e.length===4?Ne.emptyPath():sA(e)}function Ev(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sA(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ES(t,e,n){return{name:wv(t,e),fields:n.value.mapValue.fields}}function FB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string"),lt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let h=l.code===void 0?N.UNKNOWN:nA(l.code);return new j(h,l.message||"")}(s);n=new Zd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vy(t,r.document.name),o=bn(r.document.updateTime),s=r.document.createTime?bn(r.document.createTime):J.min(),c=new nn({mapValue:{fields:r.document.fields}}),u=rn.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new is(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vy(t,r.document),o=r.readTime?bn(r.readTime):J.min(),s=rn.newNoDocument(i,o),c=r.removedTargetIds||[];n=new is([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vy(t,r.document),o=r.removedTargetIds||[];n=new is([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new gv(i,o),c=r.targetId;n=new Yd(c,s)}}return n}function VB(t,e){let n;if(e instanceof Vi)n={update:ES(t,e.key,e.value)};else if(e instanceof Kd)n={delete:wv(t,e.key)};else if(e instanceof ar)n={update:ES(t,e.key,e.data),updateMask:GB(e.fieldMask)};else{if(!(e instanceof dv))return G();n={verify:wv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof fs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ki)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ps)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:OB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(t,e.precondition)),n}function LB(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?bn(i.updateTime):bn(o);return s.isEqual(J.min())&&(s=bn(o)),new lv(s,i.transformResults||[])}(n,e))):[]}function jB(t,e){return{documents:[oA(t,e.path)]}}function UB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oA(t,i);let o=function(l){if(l.length!==0)return cA(Tn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(v){return{field:ts(v.field),direction:HB(v.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=_v(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function BB(t){let e=kB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let v=aA(p);return v instanceof Tn&&US(v)?v.getFilters():[v]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(v=>function(S){return new ls(ns(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(p){let v;return v=typeof p=="object"?p.value:p,yh(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(p){let v=!!p.before,w=p.values||[];return new us(w,v)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let v=!p.before,w=p.values||[];return new us(w,v)}(n.endAt)),hB(e,i,s,o,c,"F",u,l)}function $B(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ns(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ns(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ns(n.unaryFilter.field);return He.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ns(n.unaryFilter.field);return He.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return He.create(ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>aA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function HB(t){return NB[t]}function qB(t){return xB[t]}function zB(t){return PB[t]}function ts(t){return{fieldPath:t.canonicalString()}}function ns(t){return Mt.fromServerFormat(t.fieldPath)}function cA(t){return t instanceof He?function(n){if(n.op==="=="){if(cS(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NAN"}};if(aS(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cS(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NAN"}};if(aS(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(n.field),op:qB(n.op),value:n.value}}}(t):t instanceof Tn?function(n){let r=n.getFilters().map(i=>cA(i));return r.length===1?r[0]:{compositeFilter:{op:zB(n.op),filters:r}}}(t):G()}function GB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var hc=class t{constructor(e,n,r,i,o=J.min(),s=J.min(),c=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dv=class{constructor(e){this.ct=e}};function WB(t){let e=BB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uv(e,e.limit,"L"):e}var eh=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),cc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=or(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Hr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?VS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):FS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):G()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ce(c)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),H.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};eh.vt=new eh;var bv=class{constructor(){this.un=new Cv}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Pi.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Cv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ut(Ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(Ne.comparator)).toArray()}};var kK=new Uint8Array(0);var _n=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(41943040,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);var fc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Tv=class{constructor(){this.changes=new qr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Sv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Av=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ac(r.mutation,i,In.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=Ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=rc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=sr(),s=sc(),c=function(){return sc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof ar)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ac(h.mutation,l,h.mutation.getFieldMask(),nt.now())):s.set(l.key,In.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new Sv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=sc(),i=new xe((s,c)=>s-c),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||In.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||le()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=KS();h.forEach(v=>{if(!o.has(v)){let w=eA(n.get(v),r.get(v));w!==null&&p.set(v,w),o=o.add(v)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(Ri()),c=-1,u=o;return s.next(l=>x.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(v=>{u=u.insert(h,v)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:c,changes:WS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=rc();return this.indexManager.getCollectionParents(e,o).next(c=>x.forEach(c,u=>{let l=function(p,v){return new ds(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,v)=>{s=s.insert(p,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,rn.newInvalidDocument(h)))});let c=rc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ac(h.mutation,l,In.empty(),nt.now()),_h(n,l)&&(c=c.insert(u,l))}),c})}};var Rv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:WB(i.bundledQuery),readTime:bn(i.readTime)}}(n)),x.resolve()}};var Mv=class{constructor(){this.overlays=new xe(H.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ri();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Ri(),o=n.length+1,s=new H(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new xe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ri(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Ri(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return x.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new pv(n,r));let o=this.Ir.get(n);o===void 0&&(o=le(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var Nv=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var pc=class{constructor(){this.Tr=new ut(je.Er),this.dr=new ut(je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new H(new Ne([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new H(new Ne([])),r=new je(n,e),i=new je(n,e+1),o=le();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},je=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||H.comparator(e.key,n.key)}};var xv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(je.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new hv(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.br=this.br.add(new je(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let c=this.Dr(s.wr);o.push(c)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(me);return n.forEach(i=>{let o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],c=>{r=r.add(c.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new je(new H(o),0),c=new ut(me);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.wr)),!0)},s),x.resolve(this.Cr(c))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new je(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Pv=class{constructor(e){this.Mr=e,this.docs=function(){return new xe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=sr(),s=n.path,c=new H(s.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||tB(eB(h),r)<=0||(i.has(h.key)||_h(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){G()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ov(this)}getSize(e){return x.resolve(this.size)}},Ov=class extends Tv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var kv=class{constructor(e){this.persistence=e,this.Nr=new qr(n=>b_(n),C_),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pc,this.targetCount=0,this.kr=fc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new fc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Fv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new OS(0),this.Kr=!1,this.Kr=!0,this.$r=new Nv,this.referenceDelegate=e(this),this.Ur=new kv(this),this.indexManager=new bv,this.remoteDocumentCache=function(i){return new Pv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Dv(n),this.Gr=new Rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Mv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new xv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new Vv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Vv=class extends Qy{constructor(e){super(),this.currentSequenceNumber=e}},Lv=class t{constructor(e){this.persistence=e,this.Jr=new pc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var jv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Uv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kT()?8:rB(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Uv;return this.Xi(e,n,s).next(c=>{if(o.result=c,this.zi)return this.es(e,n,s,c.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(nc()<=ue.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(nc()<=ue.DEBUG&&V("QueryEngine","Query:",es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(nc()<=ue.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):x.resolve())}Yi(e,n){if(hS(n))return x.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uv(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.Ji.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,c);return this.ns(n,l,s,u.readTime)?this.Yi(e,uv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return hS(n)||i.isEqual(J.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?x.resolve(null):(nc()<=ue.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(n)),this.rs(e,s,n,X2(i,-1)).next(c=>c))})}ts(e,n){let r=new ut(zS(e));return n.forEach((i,o)=>{_h(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return nc()<=ue.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",es(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $v=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(me),this._s=new qr(o=>b_(o),C_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Av(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function KB(t,e,n,r){return new $v(t,e,n,r)}function lA(t,e){return m(this,null,function*(){let n=K(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function QB(t,e){let n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,v=p.keys(),w=x.resolve();return v.forEach(S=>{w=w.next(()=>h.getEntry(u,S)).next(M=>{let R=l.docVersions.get(S);_e(R!==null),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=le();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function dA(t){let e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function YB(t,e){let n=K(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let c=[];e.targetChanges.forEach((h,p)=>{let v=i.get(p);if(!v)return;c.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(lt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(p,w),function(M,R,F){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(v,w,h)&&c.push(n.Ur.updateTargetData(o,w))});let u=sr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(ZB(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(J.min())){let h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return x.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function ZB(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=sr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):V("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function JB(t,e){let n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XB(t,e){let n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new hc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Hv(t,e,n){return m(this,null,function*(){let r=K(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!wc(s))throw s;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function DS(t,e,n){let r=K(t),i=J.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=K(u),v=p._s.get(h);return v!==void 0?x.resolve(p.os.get(v)):p.Ur.getTargetData(l,h)}(r,s,Dn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:le())).next(c=>(e$(r,gB(e),c),{documents:c,Ts:o})))}function e$(t,e,n){let r=t.us.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}var th=class{constructor(){this.activeTargetIds=wB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qv=class{constructor(){this.so=new th,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new th,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zv=class{_o(e){}shutdown(){}};var nh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ld=null;function Ly(){return Ld===null?Ld=function(){return 268435456+Math.round(2147483648*Math.random())}():Ld++,"0x"+Ld.toString(16)}var t$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Gv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ct="WebChannelConnection",Wv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let c=Ly(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw os("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,c){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=t$[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=Ly();return new Promise((s,c)=>{let u=new xy;u.setWithCredentials(!0),u.listenOnce(Py.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case tc.NO_ERROR:let h=u.getResponseJson();V(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case tc.TIMEOUT:V(ct,`RPC '${e}' ${o} timed out`),c(new j(N.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:let p=u.getStatus();if(V(ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);let w=v?.error;if(w&&w.status&&w.message){let S=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(F)>=0?F:N.UNKNOWN}(w.status);c(new j(S,w.message))}else c(new j(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new j(N.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{V(ct,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);V(ct,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Ly(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fy(),c=ky(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),v=!1,w=!1,S=new Gv({Io:R=>{w?V(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(v||(V(ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),V(ct,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),M=(R,F,$)=>{R.listen(F,q=>{try{$(q)}catch(re){setTimeout(()=>{throw re},0)}})};return M(p,Xo.EventType.OPEN,()=>{w||(V(ct,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),M(p,Xo.EventType.CLOSE,()=>{w||(w=!0,V(ct,`RPC '${e}' stream ${i} transport closed`),S.So())}),M(p,Xo.EventType.ERROR,R=>{w||(w=!0,os(ct,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new j(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,Xo.EventType.MESSAGE,R=>{var F;if(!w){let $=R.data[0];_e(!!$);let q=$,re=q.error||((F=q[0])===null||F===void 0?void 0:F.error);if(re){V(ct,`RPC '${e}' stream ${i} received error:`,re);let Se=re.status,Q=function(_){let E=Le[_];if(E!==void 0)return nA(E)}(Se),D=re.message;Q===void 0&&(Q=N.INTERNAL,D="Unknown error status: "+Se+" with message "+re.message),w=!0,S.So(new j(Q,D)),p.close()}else V(ct,`RPC '${e}' stream ${i} received:`,$),S.bo($)}}),M(c,Oy.STAT_EVENT,R=>{R.stat===Fd.PROXY?V(ct,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Fd.NOPROXY&&V(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function jy(){return typeof document<"u"?document:null}function Ih(t){return new vv(t,!0)}var rh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ih=class{constructor(e,n,r,i,o,s,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rh(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new j(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kv=class extends ih{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=FB(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?bn(s.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Ev(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=cv(u)?{documents:jB(o,u)}:{query:UB(o,u)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=rA(o,s.resumeToken);let l=_v(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){c.readTime=Xd(o,s.snapshotVersion.toTimestamp());let l=_v(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=$B(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Ev(this.serializer),n.removeTarget=e,this.a_(n)}},Qv=class extends ih{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=LB(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Ev(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>VB(this.serializer,r))};this.a_(n)}};var Yv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Iv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(N.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Lo(e,Iv(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Zv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Jv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>m(this,null,function*(){Li(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let l=K(u);l.L_.add(4),yield Ec(l),l.q_.set("Unknown"),l.L_.delete(4),yield wh(l)})}(this))}))}),this.q_=new Zv(r,i)}};function wh(t){return m(this,null,function*(){if(Li(t))for(let e of t.B_)yield e(!0)})}function Ec(t){return m(this,null,function*(){for(let e of t.B_)yield e(!1)})}function hA(t,e){let n=K(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),x_(n)?N_(n):Is(n).r_()&&M_(n,e))}function R_(t,e){let n=K(t),r=Is(n);n.N_.delete(e),r.r_()&&fA(n,e),n.N_.size===0&&(r.r_()?r.o_():Li(n)&&n.q_.set("Unknown"))}function M_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Is(t).A_(e)}function fA(t,e){t.Q_.xe(e),Is(t).R_(e)}function N_(t){t.Q_=new yv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Is(t).start(),t.q_.v_()}function x_(t){return Li(t)&&!Is(t).n_()&&t.N_.size>0}function Li(t){return K(t).L_.size===0}function pA(t){t.Q_=void 0}function n$(t){return m(this,null,function*(){t.q_.set("Online")})}function r$(t){return m(this,null,function*(){t.N_.forEach((e,n)=>{M_(t,e)})})}function i$(t,e){return m(this,null,function*(){pA(t),x_(t)?(t.q_.M_(e),N_(t)):t.q_.set("Unknown")})}function o$(t,e,n){return m(this,null,function*(){if(t.q_.set("Online"),e instanceof Zd&&e.state===2&&e.cause)try{yield function(i,o){return m(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.N_.delete(c),i.Q_.removeTarget(c))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield oh(t,r)}else if(e instanceof is?t.Q_.Ke(e):e instanceof Yd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{let r=yield dA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.Q_.rt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),fA(o,u);let p=new hc(h.target,u,l,h.sequenceNumber);M_(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield oh(t,r)}})}function oh(t,e,n){return m(this,null,function*(){if(!wc(e))throw e;t.L_.add(1),yield Ec(t),t.q_.set("Offline"),n||(n=()=>dA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield wh(t)}))})}function gA(t,e){return e().catch(n=>oh(t,n,e))}function Eh(t){return m(this,null,function*(){let e=K(t),n=zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;s$(e);)try{let i=yield JB(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,a$(e,i)}catch(i){yield oh(e,i)}mA(e)&&yA(e)})}function s$(t){return Li(t)&&t.O_.length<10}function a$(t,e){t.O_.push(e);let n=zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mA(t){return Li(t)&&!zr(t).n_()&&t.O_.length>0}function yA(t){zr(t).start()}function c$(t){return m(this,null,function*(){zr(t).p_()})}function u$(t){return m(this,null,function*(){let e=zr(t);for(let n of t.O_)e.m_(n.mutations)})}function l$(t,e,n){return m(this,null,function*(){let r=t.O_.shift(),i=fv.from(r,e,n);yield gA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Eh(t)})}function d$(t,e){return m(this,null,function*(){e&&zr(t).V_&&(yield function(r,i){return m(this,null,function*(){if(function(s){return AB(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();zr(r).s_(),yield gA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Eh(r)}})}(t,e)),mA(t)&&yA(t)})}function bS(t,e){return m(this,null,function*(){let n=K(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Li(n);n.L_.add(3),yield Ec(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield wh(n)})}function h$(t,e){return m(this,null,function*(){let n=K(t);e?(n.L_.delete(2),yield wh(n)):e||(n.L_.add(2),yield Ec(n),n.q_.set("Unknown"))})}function Is(t){return t.K_||(t.K_=function(n,r,i){let o=K(n);return o.w_(),new Kv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:n$.bind(null,t),Ro:r$.bind(null,t),mo:i$.bind(null,t),d_:o$.bind(null,t)}),t.B_.push(e=>m(this,null,function*(){e?(t.K_.s_(),x_(t)?N_(t):t.q_.set("Unknown")):(yield t.K_.stop(),pA(t))}))),t.K_}function zr(t){return t.U_||(t.U_=function(n,r,i){let o=K(n);return o.w_(),new Qv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:c$.bind(null,t),mo:d$.bind(null,t),f_:u$.bind(null,t),g_:l$.bind(null,t)}),t.B_.push(e=>m(this,null,function*(){e?(t.U_.s_(),yield Eh(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Xv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function P_(t,e){if(ir("AsyncQueue",`${e}: ${t}`),wc(t))return new j(N.UNAVAILABLE,`${e}: ${t}`);throw t}var sh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=rc(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var ah=class{constructor(){this.W_=new xe(H.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},ms=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,sh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var e_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},t_=class{constructor(){this.queries=CS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=K(n),o=i.queries;i.queries=CS(),o.forEach((s,c)=>{for(let u of c.j_)u.onError(r)})})(this,new j(N.ABORTED,"Firestore shutting down"))}};function CS(){return new qr(t=>qS(t),vh)}function f$(t,e){return m(this,null,function*(){let n=K(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new e_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=P_(s,`Initialization of query '${es(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&O_(n)})}function p$(t,e){return m(this,null,function*(){let n=K(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function g$(t,e){let n=K(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.j_)c.X_(i)&&(r=!0);s.z_=i}}r&&O_(n)}function m$(t,e,n){let r=K(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function O_(t){t.Y_.forEach(e=>{e.next()})}var n_,TS;(TS=n_||(n_={})).ea="default",TS.Cache="cache";var r_=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==n_.Cache}};var ch=class{constructor(e){this.key=e}},uh=class{constructor(e){this.key=e}},i_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=zS(e),this.Ra=new sh(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new ah,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let v=i.get(h),w=_h(this.query,p)?p:null,S=!!v&&this.mutatedKeys.has(v.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),R=!1;v&&w?v.data.isEqual(w.data)?S!==M&&(r.track({type:3,doc:w}),R=!0):this.ga(v,w)||(r.track({type:2,doc:w}),R=!0,(u&&this.Aa(w,u)>0||l&&this.Aa(w,l)<0)&&(c=!0)):!v&&w?(r.track({type:0,doc:w}),R=!0):v&&!w&&(r.track({type:1,doc:v}),R=!0,(u||l)&&(c=!0)),R&&(w?(s=s.add(w),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:c,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(w,S){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return M(w)-M(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new ms(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ah,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ch(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ms.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},o_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},s_=class{constructor(e){this.key=e,this.va=!1}},a_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new qr(c=>qS(c),vh),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(H.comparator),this.Na=new Map,this.La=new pc,this.Ba={},this.ka=new Map,this.qa=fc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function y$(t,e,n=!0){return m(this,null,function*(){let r=DA(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield vA(r,e,n,!0),i})}function v$(t,e){return m(this,null,function*(){let n=DA(t);yield vA(n,e,!0,!1)})}function vA(t,e,n,r){return m(this,null,function*(){let i=yield XB(t.localStore,Dn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield _$(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&hA(t.remoteStore,i),c})}function _$(t,e,n,r,i){return m(this,null,function*(){t.Ka=(p,v,w)=>function(M,R,F,$){return m(this,null,function*(){let q=R.view.ma(F);q.ns&&(q=yield DS(M.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,q)));let re=$&&$.targetChanges.get(R.targetId),Se=$&&$.targetMismatches.get(R.targetId)!=null,Q=R.view.applyChanges(q,M.isPrimaryClient,re,Se);return AS(M,R.targetId,Q.wa),Q.snapshot})}(t,p,v,w);let o=yield DS(t.localStore,e,!0),s=new i_(e,o.Ts),c=s.ma(o.documents),u=dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);AS(t,n,l.wa);let h=new o_(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function I$(t,e,n){return m(this,null,function*(){let r=K(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!vh(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&R_(r.remoteStore,i.targetId),c_(r,i.targetId)}).catch(Ic))):(c_(r,i.targetId),yield Hv(r.localStore,i.targetId,!0))})}function w$(t,e){return m(this,null,function*(){let n=K(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),R_(n.remoteStore,r.targetId))})}function E$(t,e,n){return m(this,null,function*(){let r=R$(t);try{let i=yield function(s,c){let u=K(s),l=nt.now(),h=c.reduce((w,S)=>w.add(S.key),le()),p,v;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=sr(),M=le();return u.cs.getEntries(w,h).next(R=>{S=R,S.forEach((F,$)=>{$.isValidDocument()||(M=M.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(R=>{p=R;let F=[];for(let $ of c){let q=SB($,p.get($.key).overlayedDocument);q!=null&&F.push(new ar($.key,q,LS(q.value.mapValue),Ni.exists(!0)))}return u.mutationQueue.addMutationBatch(w,l,F,c)}).next(R=>{v=R;let F=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(w,R.batchId,F)})}).then(()=>({batchId:v.batchId,changes:WS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new xe(me)),l=l.insert(c,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Dc(r,i.changes),yield Eh(r.remoteStore)}catch(i){let o=P_(i,"Failed to persist write");n.reject(o)}})}function _A(t,e){return m(this,null,function*(){let n=K(t);try{let r=yield YB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?_e(s.va):i.removedDocuments.size>0&&(_e(s.va),s.va=!1))}),yield Dc(n,r,e)}catch(r){yield Ic(r)}})}function SS(t,e,n){let r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let c=s.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=K(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let v of p.j_)v.Z_(c)&&(l=!0)}),l&&O_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function D$(t,e,n){return m(this,null,function*(){let r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new xe(H.comparator);s=s.insert(o,rn.newNoDocument(o,J.min()));let c=le().add(o),u=new Qd(J.min(),new Map,new xe(me),s,c);yield _A(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),k_(r)}else yield Hv(r.localStore,e,!1).then(()=>c_(r,e,n)).catch(Ic)})}function b$(t,e){return m(this,null,function*(){let n=K(t),r=e.batch.batchId;try{let i=yield QB(n.localStore,e);wA(n,r,null),IA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Dc(n,i)}catch(i){yield Ic(i)}})}function C$(t,e,n){return m(this,null,function*(){let r=K(t);try{let i=yield function(s,c){let u=K(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(_e(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);wA(r,e,n),IA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Dc(r,i)}catch(i){yield Ic(i)}})}function IA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function wA(t,e,n){let r=K(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function c_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||EA(t,r)})}function EA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(R_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),k_(t))}function AS(t,e,n){for(let r of n)r instanceof ch?(t.La.addReference(r.key,e),T$(t,r)):r instanceof uh?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||EA(t,r.key)):G()}function T$(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),k_(t))}function k_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new H(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new s_(n)),t.Oa=t.Oa.insert(n,r),hA(t.remoteStore,new hc(Dn(T_(n.path)),r,"TargetPurposeLimboResolution",OS.oe))}}function Dc(t,e,n){return m(this,null,function*(){let r=K(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{s.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=jv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return m(this,null,function*(){let h=K(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,v=>x.forEach(v.$i,w=>h.persistence.referenceDelegate.addReference(p,v.targetId,w)).next(()=>x.forEach(v.Ui,w=>h.persistence.referenceDelegate.removeReference(p,v.targetId,w)))))}catch(p){if(!wc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let v=p.targetId;if(!p.fromCache){let w=h.os.get(v),S=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(v,M)}}})}(r.localStore,o))})}function S$(t,e){return m(this,null,function*(){let n=K(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield lA(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new j(N.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dc(n,r.hs)}})}function A$(t,e){let n=K(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let c=n.Fa.get(s);i=i.unionWith(c.view.Va)}return i}}function DA(t){let e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D$.bind(null,e),e.Ca.d_=g$.bind(null,e.eventManager),e.Ca.$a=m$.bind(null,e.eventManager),e}function R$(t){let e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C$.bind(null,e),e}var RS=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return m(this,null,function*(){this.serializer=Ih(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return KB(this.persistence,new Bv,n.initialUser,this.serializer)}Ga(n){return new Fv(Lv.Zr,this.serializer)}Wa(n){return new qv}terminate(){return m(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var M$=(()=>{class t{initialize(n,r){return m(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=S$.bind(null,this.syncEngine),yield h$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new t_}()}createDatastore(n){let r=Ih(n.databaseInfo.databaseId),i=function(s){return new Wv(s)}(n.databaseInfo);return function(s,c,u,l){return new Yv(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new Jv(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>SS(this.syncEngine,r,0),function(){return nh.D()?new nh:new zv}())}createSyncEngine(n,r){return function(o,s,c,u,l,h,p){let v=new a_(o,s,c,u,l,h);return p&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return m(this,null,function*(){var n,r;yield function(o){return m(this,null,function*(){let s=K(o);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ec(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var u_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var l_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=We.UNAUTHENTICATED,this.clientId=$d.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>m(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=P_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Uy(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield lA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function MS(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield N$(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bS(e.remoteStore,i)),t._onlineComponents=e})}function N$(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Uy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;os("Error using user provided cache. Falling back to memory cache: "+n),yield Uy(t,new RS)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Uy(t,new RS);return t._offlineComponents})}function bA(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield MS(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield MS(t,new M$))),t._onlineComponents})}function x$(t){return bA(t).then(e=>e.syncEngine)}function P$(t){return m(this,null,function*(){let e=yield bA(t),n=e.eventManager;return n.onListen=y$.bind(null,e.syncEngine),n.onUnlisten=I$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w$.bind(null,e.syncEngine),n})}function O$(t,e,n={}){let r=new wn;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,c,u,l){let h=new u_({next:v=>{h.Za(),s.enqueueAndForget(()=>p$(o,p));let w=v.docs.has(c);!w&&v.fromCache?l.reject(new j(N.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&u&&u.source==="server"?l.reject(new j(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(v)},error:v=>l.reject(v)}),p=new r_(T_(c.path),h,{includeMetadataChanges:!0,_a:!0});return f$(o,p)}(yield P$(t),t.asyncQueue,e,n,r)})),r.promise}function CA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NS=new Map;function TA(t,e,n){if(!n)throw new j(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function k$(t,e,n,r){if(e===!0&&r===!0)throw new j(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xS(t){if(!H.isDocumentKey(t))throw new j(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PS(t){if(H.isDocumentKey(t))throw new j(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function F_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function lh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=F_(t);throw new j(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var dh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ys=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new By;switch(r.type){case"firstParty":return new zy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=NS.get(n);r&&(V("ComponentProvider","Removing Datastore"),NS.delete(n),r.terminate())}(this),Promise.resolve()}};function SA(t,e,n,r={}){var i;let o=(t=lh(t,ys))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=We.MOCK_USER;else{c=RT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new We(l)}t._authCredentials=new $y(new Bd(c,u))}}var d_=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},$t=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},$r=class t extends d_{constructor(e,n,r){super(e,n,T_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function AA(t,e,...n){if(t=tt(t),TA("collection","path",e),t instanceof ys){let r=Ne.fromString(e,...n);return PS(r),new $r(t,null,r)}{if(!(t instanceof $t||t instanceof $r))throw new j(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return PS(r),new $r(t.firestore,null,r)}}function V_(t,e,...n){if(t=tt(t),arguments.length===1&&(e=$d.newId()),TA("doc","path",e),t instanceof ys){let r=Ne.fromString(e,...n);return xS(r),new $t(t,null,new H(r))}{if(!(t instanceof $t||t instanceof $r))throw new j(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return xS(r),new $t(t.firestore,t instanceof $r?t.converter:null,new H(r))}}var hh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rh(this,"async_queue_retry"),this.Vu=()=>{let r=jy();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=jy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=jy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new wn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(r);throw ir("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=Xv.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var gc=class extends ys{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new hh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new hh(e),this._firestoreClient=void 0,yield e}})}};function RA(t,e){let n=typeof t=="object"?t:Kn(),r=typeof t=="string"?t:e||"(default)",i=mn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=AT("firestore");o&&SA(i,...o)}return i}function MA(t){if(t._terminated)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||F$(t),t._firestoreClient}function F$(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,h){return new Yy(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,CA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new l_(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var mc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(lt.fromBase64String(e))}catch(n){throw new j(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var yc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fh=class{constructor(e){this._methodName=e}};var vc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var _c=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var V$=/^__.*__$/,h_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vi(e,this.data,n,this.fieldTransforms)}};function NA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var f_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ph(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NA(this.Cu)&&V$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},p_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ih(e)}Qu(e,n,r,i=!1){return new f_({Cu:e,methodName:n,qu:r,path:Mt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function L$(t){let e=t._freezeSettings(),n=Ih(t._databaseId);return new p_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j$(t,e,n,r,i,o={}){let s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);kA("Data must be an object, but it was:",s,r);let c=PA(r,s),u,l;if(o.merge)u=new In(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let v=U$(e,p,n);if(!s.contains(v))throw new j(N.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);$$(h,v)||h.push(v)}u=new In(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new h_(new nn(c),u,l)}function xA(t,e){if(OA(t=tt(t)))return kA("Unsupported field value:",e,t),PA(t,e);if(t instanceof fh)return function(r,i){if(!NA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=xA(c,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=nt.fromDate(r);return{timestampValue:Xd(i.serializer,o)}}if(r instanceof nt){let o=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xd(i.serializer,o)}}if(r instanceof vc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mc)return{bytesValue:rA(i.serializer,r._byteString)};if(r instanceof $t){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:A_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _c)return function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return S_(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${F_(r)}`)}(t,e)}function PA(t,e){let n={};return kS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(t,(r,i)=>{let o=xA(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function OA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof vc||t instanceof mc||t instanceof $t||t instanceof fh||t instanceof _c)}function kA(t,e,n){if(!OA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=F_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function U$(t,e,n){if((e=tt(e))instanceof yc)return e._internalPath;if(typeof e=="string")return FA(t,e);throw ph("Field path arguments must be of type string or ",t,!1,void 0,n)}var B$=new RegExp("[~\\*/\\[\\]]");function FA(t,e,n){if(e.search(B$)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yc(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ph(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new j(N.INVALID_ARGUMENT,c+t+u)}function $$(t,e){return t.some(n=>n.isEqual(e))}var gh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new g_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(VA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},g_=class extends gh{data(){return super.data()}};function VA(t,e){return typeof e=="string"?FA(t,e):e instanceof yc?e._internalPath:e._delegate._internalPath}var m_=class{convertValue(e,n="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return _s(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new _c(o)}convertGeoPoint(e){return new vc(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=E_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){let n=or(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);_e(uA(r));let i=new Gd(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function H$(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var y_=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},mh=class extends gh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new v_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(VA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},v_=class extends mh{data(e={}){return super.data(e)}};function LA(t){t=lh(t,$t);let e=lh(t.firestore,gc);return O$(MA(e),t._key).then(n=>z$(e,t,n))}var __=class extends m_{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}};function jA(t,e){let n=lh(t.firestore,gc),r=V_(t),i=H$(t.converter,e);return q$(n,[j$(L$(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ni.exists(!1))]).then(()=>r)}function q$(t,e){return function(r,i){let o=new wn;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return E$(yield x$(r),i,o)})),o.promise}(MA(t),e)}function z$(t,e,n){let r=n.docs.get(e._key),i=new __(t);return new mh(t,i,e._key,r,new y_(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){vs=i})(Vr),wt(new Ge("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new gc(new Hy(r.getProvider("auth-internal")),new Wy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gd(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),De(rS,"4.7.3",e),De(rS,"4.7.3","esm2017")})();var cr=class{constructor(e){return e}},UA="firestore",L_=class{constructor(){return bi(UA)}};var j_=new L("angularfire2.firestore-instances");function G$(t,e){let n=Yo(UA,t,e);return n&&new cr(n)}function W$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new cr(r)}}var K$={provide:L_,deps:[[new qe,j_]]},Q$={provide:cr,useFactory:G$,deps:[[new qe,j_],tn]};function BA(t,...e){return De("angularfire",Qn.full,"fst"),Ft([Q$,K$,{provide:j_,useFactory:W$(t),multi:!0,deps:[ye,at,Lr,Yn,[new qe,ec],[new qe,Qo],...e]}])}var U_=vt(jA,!0);var B_=vt(AA,!0);var $A=vt(V_,!0);var HA=vt(LA,!0);var qA=vt(RA,!0);var Dh=class t{constructor(e,n,r,i){this.fb=e;this.auth=n;this.firestore=r;this.router=i;this.loginForm=this.fb.group({mail:["",[Ve.required,Ve.email]],contrasena:["",[Ve.required,Ve.minLength(6)]]})}loginForm;login(){return m(this,null,function*(){if(this.loginForm.valid){let{mail:e,contrasena:n}=this.loginForm.value;try{let r=yield X0(this.auth,e,n),i=$A(this.firestore,"especialistas",r.user.uid),o=yield HA(i);if(r.user.emailVerified)if(o.exists()){let s=o.data();s&&s.aprobado?this.router.navigate(["/home"]):alert("Su cuenta a\xFAn no ha sido aprobada por un administrador.")}else this.router.navigate(["/home"]);else alert("Por favor verifique su correo electr\xF3nico antes de iniciar sesi\xF3n.")}catch(r){console.error("Error al iniciar sesi\xF3n: ",r),alert("Error al iniciar sesi\xF3n, verifique sus credenciales e intente nuevamente.")}}else alert("Por favor complete todos los campos correctamente")})}static \u0275fac=function(n){return new(n||t)(X(od),X(nr),X(cr),X(Bl))};static \u0275cmp=hn({type:t,selectors:[["app-login"]],standalone:!0,features:[pn],decls:8,vars:1,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],["formControlName","mail","type","email","placeholder","Email","required",""],["formControlName","contrasena","type","password","placeholder","Contrase\xF1a","required",""],["type","submit"]],template:function(n,r){n&1&&(Ee(0,"div",0)(1,"h2"),Xe(2,"Login"),Te(),Ee(3,"form",1),Je("ngSubmit",function(){return r.login()}),mt(4,"input",2)(5,"input",3),Ee(6,"button",4),Xe(7,"Login"),Te()()()),n&2&&(Lt(3),Tt("formGroup",r.loginForm))},dependencies:[sd,rd,zo,ed,td,Ua,La,ja],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:auto;background-color:#e0f7fa;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;text-align:center}h2[_ngcontent-%COMP%]{color:#00695c}button[_ngcontent-%COMP%]{margin:10px;padding:10px;background-color:#00695c;color:#fff;border:none;border-radius:5px;cursor:pointer}button[type=submit][_ngcontent-%COMP%]{background-color:#00796b}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#004d40}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:5px}"]})};function Y$(t,e){if(t&1){let n=sa();Ee(0,"div",3)(1,"button",4),Je("click",function(){di(n);let i=fn();return hi(i.tipoUsuario="Paciente")}),mt(2,"div",5),Ee(3,"span",6),Xe(4,"Registrar Paciente"),Te()(),Ee(5,"button",4),Je("click",function(){di(n);let i=fn();return hi(i.tipoUsuario="Especialista")}),mt(6,"div",7),Ee(7,"span",6),Xe(8,"Registrar Especialista"),Te()()()}}function Z$(t,e){if(t&1){let n=sa();Ee(0,"div"),mt(1,"input",19),Ee(2,"input",20),Je("change",function(i){di(n);let o=fn(2);return hi(o.onFileChange(i,"imagenes"))}),Te()()}}function J$(t,e){if(t&1&&(Ee(0,"option",26),Xe(1),Te()),t&2){let n=e.$implicit;Tt("value",n),Lt(),gl(n)}}function X$(t,e){if(t&1){let n=sa();Ee(0,"div")(1,"select",21),Ro(2,J$,2,2,"option",22),Te(),mt(3,"input",23,0),Ee(5,"button",24),Je("click",function(){di(n);let i=Nb(4),o=fn(2);return hi(o.agregarEspecialidad(i.value))}),Xe(6,"Agregar Especialidad"),Te(),Ee(7,"input",25),Je("change",function(i){di(n);let o=fn(2);return hi(o.onFileChange(i,"imagenPerfil"))}),Te()()}if(t&2){let n=fn(2);Lt(2),Tt("ngForOf",n.especialidades)}}function eH(t,e){if(t&1&&(Ee(0,"p",27),Xe(1),Te()),t&2){let n=fn(2);Lt(),gl(n.errorMessage)}}function tH(t,e){if(t&1){let n=sa();Ee(0,"div",8)(1,"h2"),Xe(2),Te(),Ee(3,"form",9),Je("ngSubmit",function(){di(n);let i=fn();return hi(i.registrar())}),mt(4,"input",10)(5,"input",11)(6,"input",12)(7,"input",13)(8,"input",14)(9,"input",15),Ro(10,Z$,3,0,"div",16)(11,X$,8,1,"div",16),Ee(12,"button",17),Xe(13,"Registrar"),Te()(),Ro(14,eH,2,1,"p",18),Te()}if(t&2){let n=fn();Tt("@formAnimation",void 0),Lt(2),ml("Registro de ",n.tipoUsuario,""),Lt(),Tt("formGroup",n.registroForm),Lt(7),Tt("ngIf",n.tipoUsuario==="Paciente"),Lt(),Tt("ngIf",n.tipoUsuario==="Especialista"),Lt(3),Tt("ngIf",n.errorMessage)}}var bh=class t{constructor(e,n,r=Od()){this.fb=e;this.firestore=n;this.auth=r;this.registroForm=this.fb.group({nombre:["",Ve.required],apellido:["",Ve.required],edad:["",[Ve.required,Ve.min(1),Ve.max(120)]],dni:["",[Ve.required,Ve.pattern(/^[0-9]{7,8}$/)]],mail:["",[Ve.required,Ve.email]],contrasena:["",[Ve.required,Ve.minLength(6)]],obraSocial:[""],especialidad:[""],imagenes:[null,Ve.required],imagenPerfil:[null]})}onFileChange(e,n){let r=e.target;r?.files&&r.files.length>0&&this.registroForm.get(n)?.setValue(r.files)}registroForm;tipoUsuario=null;especialidades=["Cardiolog\xEDa","Pediatr\xEDa","Neurolog\xEDa"];errorMessage="";registrar(){return m(this,null,function*(){if(this.registroForm.valid){let e=this.registroForm.value;try{let n=yield Z0(this.auth,e.mail,e.contrasena);yield J0(n.user),this.tipoUsuario==="Paciente"?(yield U_(B_(this.firestore,"pacientes"),e),this.errorMessage="Paciente registrado con \xE9xito. Por favor verifique su correo electr\xF3nico."):(yield U_(B_(this.firestore,"especialistas"),te(O({},e),{aprobado:!1})),this.errorMessage="Especialista registrado con \xE9xito. Por favor verifique su correo electr\xF3nico.")}catch(n){console.error("Error al registrar: ",n),this.errorMessage="Hubo un error al registrar, por favor intente nuevamente"}}else this.errorMessage="Por favor complete todos los campos correctamente"})}agregarEspecialidad(e){e&&!this.especialidades.includes(e)&&this.especialidades.push(e)}static \u0275fac=function(n){return new(n||t)(X(od),X(cr),X(nr))};static \u0275cmp=hn({type:t,selectors:[["app-registro"]],standalone:!0,features:[pn],decls:2,vars:2,consts:[["nuevaEspecialidad",""],["class","registro-container",4,"ngIf"],["class","registro-form",4,"ngIf"],[1,"registro-container"],[1,"registro-boton",3,"click"],[1,"registro-imagen","registro-paciente"],[1,"registro-texto"],[1,"registro-imagen","registro-especialista"],[1,"registro-form"],[3,"ngSubmit","formGroup"],["formControlName","nombre","placeholder","Nombre","required",""],["formControlName","apellido","placeholder","Apellido","required",""],["type","number","formControlName","edad","placeholder","Edad","required",""],["formControlName","dni","placeholder","DNI","required",""],["formControlName","mail","type","email","placeholder","Email","required",""],["formControlName","contrasena","type","password","placeholder","Contrase\xF1a","required",""],[4,"ngIf"],["type","submit"],["class","error-message",4,"ngIf"],["formControlName","obraSocial","placeholder","Obra Social"],["type","file","multiple","","required","",3,"change"],["formControlName","especialidad"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Agregar nueva especialidad"],["type","button",3,"click"],["type","file","required","",3,"change"],[3,"value"],[1,"error-message"]],template:function(n,r){n&1&&Ro(0,Y$,9,0,"div",1)(1,tH,15,6,"div",2),n&2&&(Tt("ngIf",!r.tipoUsuario),Lt(),Tt("ngIf",r.tipoUsuario))},dependencies:[sd,rd,wT,DT,zo,wm,id,ed,td,Ua,La,ja,yg,Zb,Jb],styles:['.registro-container[_ngcontent-%COMP%]{max-width:600px;margin:100px auto;text-align:center}.registro-boton[_ngcontent-%COMP%]{width:80%;margin:20px auto;padding:40px;display:flex;align-items:center;justify-content:center;background-color:#e0f7fa;border:none;border-radius:20px;cursor:pointer;box-shadow:0 0 15px #0003;transition:transform .3s ease}.registro-boton[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.registro-imagen[_ngcontent-%COMP%]{height:50px;width:50px;margin-right:10px;background-size:cover;background-position:center}.registro-paciente[_ngcontent-%COMP%]{background-image:url("./media/paciente-FWZFZ44Z.png")}.registro-especialista[_ngcontent-%COMP%]{background-image:url("./media/especialista-E7B4R3S5.png")}.registro-form[_ngcontent-%COMP%]{max-width:600px;margin:auto;background-color:#e0f7fa;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;text-align:center;animation:_ngcontent-%COMP%_fadeIn 1s cubic-bezier(.25,1,.5,1)}h2[_ngcontent-%COMP%]{color:#00695c}button[_ngcontent-%COMP%]{margin:10px;padding:10px;background-color:#00695c;color:#fff;border:none;border-radius:5px;cursor:pointer}button.active[_ngcontent-%COMP%]{background-color:#004d40}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:5px}input[type=file][_ngcontent-%COMP%]{border:none}button[type=submit][_ngcontent-%COMP%]{background-color:#00796b}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#004d40}.error-message[_ngcontent-%COMP%]{color:red;font-weight:700;margin-top:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-30px) scale(.9)}50%{opacity:.5;transform:translateY(-15px) scale(1.05)}to{opacity:1;transform:translateY(0) scale(1)}to{opacity:1;transform:translateY(0)}}.registro-texto[_ngcontent-%COMP%]{font-size:1.5em;color:#004d40;font-weight:700}']})};var GA=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:$l},{path:"registro",component:bh},{path:"login",component:Dh}];var QA="@firebase/installations",z_="0.6.9";var YA=1e4,ZA=`w:${z_}`,JA="FIS_v2",nH="https://firebaseinstallations.googleapis.com/v1",rH=60*60*1e3,iH="installations",oH="Installations";var sH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ui=new Rt(iH,oH,sH);function XA(t){return t instanceof yt&&t.code.includes("request-failed")}function eR({projectId:t}){return`${nH}/projects/${t}/installations`}function tR(t){return{token:t.token,requestStatus:2,expiresIn:cH(t.expiresIn),creationTime:Date.now()}}function nR(t,e){return m(this,null,function*(){let r=(yield e.json()).error;return Ui.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function rR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function aH(t,{refreshToken:e}){let n=rR(t);return n.append("Authorization",uH(e)),n}function iR(t){return m(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function cH(t){return Number(t.replace("s","000"))}function uH(t){return`${JA} ${t}`}function lH(r,i){return m(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=eR(t),s=rR(t),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:JA,appId:t.appId,sdkVersion:ZA},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield iR(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:tR(p.authToken)}}else throw yield nR("Create Installation",h)})}function oR(t){return new Promise(e=>{setTimeout(e,t)})}function dH(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var hH=/^[cdef][\w-]{21}$/,q_="";function fH(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=pH(t);return hH.test(n)?n:q_}catch{return q_}}function pH(t){return dH(t).substr(0,22)}function Th(t){return`${t.appName}!${t.appId}`}var sR=new Map;function aR(t,e){let n=Th(t);cR(n,e),gH(n,e)}function cR(t,e){let n=sR.get(t);if(n)for(let r of n)r(e)}function gH(t,e){let n=mH();n&&n.postMessage({key:t,fid:e}),yH()}var ji=null;function mH(){return!ji&&"BroadcastChannel"in self&&(ji=new BroadcastChannel("[Firebase] FID Change"),ji.onmessage=t=>{cR(t.data.key,t.data.fid)}),ji}function yH(){sR.size===0&&ji&&(ji.close(),ji=null)}var vH="firebase-installations-database",_H=1,Bi="firebase-installations-store",$_=null;function G_(){return $_||($_=Ei(vH,_H,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bi)}}})),$_}function Ch(t,e){return m(this,null,function*(){let n=Th(t),i=(yield G_()).transaction(Bi,"readwrite"),o=i.objectStore(Bi),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&aR(t,e.fid),e})}function uR(t){return m(this,null,function*(){let e=Th(t),r=(yield G_()).transaction(Bi,"readwrite");yield r.objectStore(Bi).delete(e),yield r.done})}function Sh(t,e){return m(this,null,function*(){let n=Th(t),i=(yield G_()).transaction(Bi,"readwrite"),o=i.objectStore(Bi),s=yield o.get(n),c=e(s);return c===void 0?yield o.delete(n):yield o.put(c,n),yield i.done,c&&(!s||s.fid!==c.fid)&&aR(t,c.fid),c})}function W_(t){return m(this,null,function*(){let e,n=yield Sh(t.appConfig,r=>{let i=IH(r),o=wH(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===q_?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function IH(t){let e=t||{fid:fH(),registrationStatus:0};return lR(e)}function wH(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Ui.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=EH(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DH(t)}:{installationEntry:e}}function EH(t,e){return m(this,null,function*(){try{let n=yield lH(t,e);return Ch(t.appConfig,n)}catch(n){throw XA(n)&&n.customData.serverCode===409?yield uR(t.appConfig):yield Ch(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function DH(t){return m(this,null,function*(){let e=yield WA(t.appConfig);for(;e.registrationStatus===1;)yield oR(100),e=yield WA(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield W_(t);return r||n}return e})}function WA(t){return Sh(t,e=>{if(!e)throw Ui.create("installation-not-found");return lR(e)})}function lR(t){return bH(t)?{fid:t.fid,registrationStatus:0}:t}function bH(t){return t.registrationStatus===1&&t.registrationTime+YA<Date.now()}function CH(r,i){return m(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=TH(t,n),s=aH(t,n),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:ZA,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield iR(()=>fetch(o,l));if(h.ok){let p=yield h.json();return tR(p)}else throw yield nR("Generate Auth Token",h)})}function TH(t,{fid:e}){return`${eR(t)}/${e}/authTokens:generate`}function K_(t,e=!1){return m(this,null,function*(){let n,r=yield Sh(t.appConfig,o=>{if(!dR(o))throw Ui.create("not-registered");let s=o.authToken;if(!e&&RH(s))return o;if(s.requestStatus===1)return n=SH(t,e),o;{if(!navigator.onLine)throw Ui.create("app-offline");let c=NH(o);return n=AH(t,c),c}});return n?yield n:r.authToken})}function SH(t,e){return m(this,null,function*(){let n=yield KA(t.appConfig);for(;n.authToken.requestStatus===1;)yield oR(100),n=yield KA(t.appConfig);let r=n.authToken;return r.requestStatus===0?K_(t,e):r})}function KA(t){return Sh(t,e=>{if(!dR(e))throw Ui.create("not-registered");let n=e.authToken;return xH(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function AH(t,e){return m(this,null,function*(){try{let n=yield CH(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Ch(t.appConfig,r),n}catch(n){if(XA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield uR(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ch(t.appConfig,r)}throw n}})}function dR(t){return t!==void 0&&t.registrationStatus===2}function RH(t){return t.requestStatus===2&&!MH(t)}function MH(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+rH}function NH(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function xH(t){return t.requestStatus===1&&t.requestTime+YA<Date.now()}function PH(t){return m(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield W_(e);return r?r.catch(console.error):K_(e).catch(console.error),n.fid})}function OH(t,e=!1){return m(this,null,function*(){let n=t;return yield kH(n),(yield K_(n,e)).token})}function kH(t){return m(this,null,function*(){let{registrationPromise:e}=yield W_(t);e&&(yield e)})}function FH(t){if(!t||!t.options)throw H_("App Configuration");if(!t.name)throw H_("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw H_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function H_(t){return Ui.create("missing-app-config-values",{valueName:t})}var hR="installations",VH="installations-internal",LH=t=>{let e=t.getProvider("app").getImmediate(),n=FH(e),r=mn(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},jH=t=>{let e=t.getProvider("app").getImmediate(),n=mn(e,hR).getImmediate();return{getId:()=>PH(n),getToken:i=>OH(n,i)}};function UH(){wt(new Ge(hR,LH,"PUBLIC")),wt(new Ge(VH,jH,"PRIVATE"))}UH();De(QA,z_);De(QA,z_,"esm2017");var BH="/firebase-messaging-sw.js",$H="/firebase-cloud-messaging-push-scope",vR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",HH="https://fcmregistrations.googleapis.com/v1",_R="google.c.a.c_id",qH="google.c.a.c_l",zH="google.c.a.ts",GH="google.c.a.e";var Ah=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Ah||{});function ur(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function WH(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var Q_="fcm_token_details_db",KH=5,fR="fcm_token_object_Store";function QH(t){return m(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(Q_))return null;let e=null;return(yield Ei(Q_,KH,{upgrade:(r,i,o,s)=>m(this,null,function*(){var c;if(i<2||!r.objectStoreNames.contains(fR))return;let u=s.objectStore(fR),l=yield u.index("fcmSenderId").get(t);if(yield u.clear(),!!l){if(i===2){let h=l;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(c=h.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:ur(h.vapidKey)}}}else if(i===3){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ur(h.auth),p256dh:ur(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ur(h.vapidKey)}}}else if(i===4){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ur(h.auth),p256dh:ur(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ur(h.vapidKey)}}}}})})).close(),yield hd(Q_),yield hd("fcm_vapid_details_db"),yield hd("undefined"),YH(e)?e:null})}function YH(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var ZH="firebase-messaging-database",JH=1,bc="firebase-messaging-store",Y_=null;function IR(){return Y_||(Y_=Ei(ZH,JH,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bc)}}})),Y_}function XH(t){return m(this,null,function*(){let e=wR(t),r=yield(yield IR()).transaction(bc).objectStore(bc).get(e);if(r)return r;{let i=yield QH(t.appConfig.senderId);if(i)return yield X_(t,i),i}})}function X_(t,e){return m(this,null,function*(){let n=wR(t),i=(yield IR()).transaction(bc,"readwrite");return yield i.objectStore(bc).put(e,n),yield i.done,e})}function wR({appConfig:t}){return t.appId}var eq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},_t=new Rt("messaging","Messaging",eq);function tq(t,e){return m(this,null,function*(){let n=yield tI(t),r=ER(e),i={method:"POST",headers:n,body:JSON.stringify(r)},o;try{o=yield(yield fetch(eI(t.appConfig),i)).json()}catch(s){throw _t.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw _t.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw _t.create("token-subscribe-no-token");return o.token})}function nq(t,e){return m(this,null,function*(){let n=yield tI(t),r=ER(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${eI(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw _t.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw _t.create("token-update-failed",{errorInfo:s})}if(!o.token)throw _t.create("token-update-no-token");return o.token})}function rq(t,e){return m(this,null,function*(){let r={method:"DELETE",headers:yield tI(t)};try{let o=yield(yield fetch(`${eI(t.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw _t.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw _t.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function eI({projectId:t}){return`${HH}/projects/${t}/registrations`}function tI(n){return m(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function ER({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==vR&&(i.web.applicationPubKey=r),i}var iq=7*24*60*60*1e3;function oq(t){return m(this,null,function*(){let e=yield aq(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ur(e.getKey("auth")),p256dh:ur(e.getKey("p256dh"))},r=yield XH(t.firebaseDependencies);if(r){if(cq(r.subscriptionOptions,n))return Date.now()>=r.createTime+iq?sq(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield rq(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return pR(t.firebaseDependencies,n)}else return pR(t.firebaseDependencies,n)})}function sq(t,e){return m(this,null,function*(){try{let n=yield nq(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield X_(t.firebaseDependencies,r),n}catch(n){throw n}})}function pR(t,e){return m(this,null,function*(){let r={token:yield tq(t,e),createTime:Date.now(),subscriptionOptions:e};return yield X_(t,r),r.token})}function aq(t,e){return m(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:WH(e)})})}function cq(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}function gR(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return uq(e,t),lq(e,t),dq(e,t),e}function uq(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let o=e.notification.icon;o&&(t.notification.icon=o)}function lq(t,e){e.data&&(t.data=e.data)}function dq(t,e){var n,r,i,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let c=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;c&&(t.fcmOptions.link=c);let u=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}function hq(t){return typeof t=="object"&&!!t&&_R in t}fq("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function fq(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function pq(t){if(!t||!t.options)throw Z_("App Configuration Object");if(!t.name)throw Z_("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw Z_(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Z_(t){return _t.create("missing-app-config-values",{valueName:t})}var J_=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=pq(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function gq(t){return m(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(BH,{scope:$H}),t.swRegistration.update().catch(()=>{})}catch(e){throw _t.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function mq(t,e){return m(this,null,function*(){if(!e&&!t.swRegistration&&(yield gq(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw _t.create("invalid-sw-registration");t.swRegistration=e}})}function yq(t,e){return m(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=vR)})}function vq(t,e){return m(this,null,function*(){if(!navigator)throw _t.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw _t.create("permission-blocked");return yield yq(t,e?.vapidKey),yield mq(t,e?.serviceWorkerRegistration),oq(t)})}function _q(t,e,n){return m(this,null,function*(){let r=Iq(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[_R],message_name:n[qH],message_time:n[zH],message_device_time:Math.floor(Date.now()/1e3)})})}function Iq(t){switch(t){case Ah.NOTIFICATION_CLICKED:return"notification_open";case Ah.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wq(t,e){return m(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ah.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(gR(n)):t.onMessageHandler.next(gR(n)));let r=n.data;hq(r)&&r[GH]==="1"&&(yield _q(t,n.messageType,r))})}var mR="@firebase/messaging",yR="0.12.12";var Eq=t=>{let e=new J_(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>wq(e,n)),e},Dq=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>vq(e,r)}};function bq(){wt(new Ge("messaging",Eq,"PUBLIC")),wt(new Ge("messaging-internal",Dq,"PRIVATE")),De(mR,yR),De(mR,yR,"esm2017")}function nI(){return m(this,null,function*(){try{yield ud()}catch{return!1}return typeof window<"u"&&$a()&&FT()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function DR(t=Kn()){return nI().then(e=>{if(!e)throw _t.create("unsupported-browser")},e=>{throw _t.create("indexed-db-unsupported")}),mn(tt(t),"messaging").getImmediate()}bq();var Cc=class{constructor(e){return e}},bR="messaging",rI=class{constructor(){return bi(bR)}};var CR="__angularfire_symbol__messagingIsSupported",iI="__angularfire_symbol__messagingIsSupportedValue";globalThis[CR]||=nI().then(t=>globalThis[iI]=t).catch(()=>globalThis[iI]=!1);var Rh={async:()=>globalThis[CR],sync:()=>{let t=globalThis[iI];if(t===void 0)throw new Error(JT("Messaging"));return t}},oI=new L("angularfire2.messaging-instances");function Cq(t,e){if(!Rh.sync())return null;let n=Yo(bR,t,e);return n&&new Cc(n)}function Tq(t){return(e,n)=>{if(!Rh.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Cc(r)}}var Sq={provide:rI,deps:[[new qe,oI]]},Aq={provide:Cc,useFactory:Cq,deps:[[new qe,oI],tn]};function TR(t,...e){return De("angularfire",Qn.full,"fcm"),Ft([Aq,Sq,{provide:vl,useValue:Rh.async,multi:!0},{provide:oI,useFactory:Tq(t),multi:!0,deps:[ye,at,Lr,Yn,...e]}])}var JQ=Rh.async;var SR=vt(DR,!0);var AR={apiKey:"AIzaSyA-vSzED_Up0m30lHEURRtXY_7_VyxFnJw",authDomain:"pruebaapp2-c5b94.firebaseapp.com",projectId:"pruebaapp2-c5b94",storageBucket:"pruebaapp2-c5b94.firebasestorage.app",messagingSenderId:"22619231299",appId:"1:22619231299:web:f68caaa3c2c72d5ba330f6"};var RR={providers:[Lb({eventCoalescing:!0}),qC(GA),XT(()=>e0(AR)),Y0(()=>Od()),BA(()=>qA()),TR(()=>SR())]};var Mh=class t{title="tp-clinica";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=hn({type:t,selectors:[["app-root"]],standalone:!0,features:[pn],decls:1,vars:0,template:function(n,r){n&1&&mt(0,"router-outlet")},dependencies:[Ma]})};aC(Mh,RR).catch(t=>console.error(t));
