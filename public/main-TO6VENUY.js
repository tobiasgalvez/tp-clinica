var aO=Object.defineProperty,cO=Object.defineProperties;var uO=Object.getOwnPropertyDescriptors;var rl=Object.getOwnPropertySymbols,lO=Object.getPrototypeOf,Zb=Object.prototype.hasOwnProperty,Jb=Object.prototype.propertyIsEnumerable,dO=Reflect.get;var Yb=(n,e,t)=>e in n?aO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||={})Zb.call(e,t)&&Yb(n,t,e[t]);if(rl)for(var t of rl(e))Jb.call(e,t)&&Yb(n,t,e[t]);return n},oe=(n,e)=>cO(n,uO(e));var Xb=(n,e)=>{var t={};for(var r in n)Zb.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&rl)for(var r of rl(n))e.indexOf(r)<0&&Jb.call(n,r)&&(t[r]=n[r]);return t};var si=(n,e,t)=>dO(lO(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function e0(n,e){return Object.is(n,e)}var dt=null,il=!1,sl=1,oi=Symbol("SIGNAL");function Re(n){let e=dt;return dt=n,e}function t0(){return dt}var Ya={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ig(n){if(il)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(n);let e=dt.nextProducerIndex++;if(ul(dt),e<dt.producerNode.length&&dt.producerNode[e]!==n&&Qa(dt)){let t=dt.producerNode[e];cl(t,dt.producerIndexOfThis[e])}dt.producerNode[e]!==n&&(dt.producerNode[e]=n,dt.producerIndexOfThis[e]=Qa(dt)?s0(n,dt,e):0),dt.producerLastReadVersion[e]=n.version}function hO(){sl++}function n0(n){if(!(Qa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===sl)){if(!n.producerMustRecompute(n)&&!og(n)){n.dirty=!1,n.lastCleanEpoch=sl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=sl}}function r0(n){if(n.liveConsumerNode===void 0)return;let e=il;il=!0;try{for(let t of n.liveConsumerNode)t.dirty||fO(t)}finally{il=e}}function i0(){return dt?.consumerAllowSignalWrites!==!1}function fO(n){n.dirty=!0,r0(n),n.consumerMarkedDirty?.(n)}function al(n){return n&&(n.nextProducerIndex=0),Re(n)}function sg(n,e){if(Re(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Qa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)cl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function og(n){ul(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(n0(t),r!==t.version))return!0}return!1}function ag(n){if(ul(n),Qa(n))for(let e=0;e<n.producerNode.length;e++)cl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function s0(n,e,t){if(o0(n),n.liveConsumerNode.length===0&&a0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=s0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function cl(n,e){if(o0(n),n.liveConsumerNode.length===1&&a0(n))for(let r=0;r<n.producerNode.length;r++)cl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ul(i),i.producerIndexOfThis[r]=e}}function Qa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ul(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function o0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function a0(n){return n.producerNode!==void 0}function c0(n){let e=Object.create(pO);e.computation=n;let t=()=>{if(n0(e),ig(e),e.value===ol)throw e.error;return e.value};return t[oi]=e,t}var ng=Symbol("UNSET"),rg=Symbol("COMPUTING"),ol=Symbol("ERRORED"),pO=oe(k({},Ya),{value:ng,dirty:!0,error:null,equal:e0,producerMustRecompute(n){return n.value===ng||n.value===rg},producerRecomputeValue(n){if(n.value===rg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=rg;let t=al(n),r;try{r=n.computation()}catch(i){r=ol,n.error=i}finally{sg(n,t)}if(e!==ng&&e!==ol&&r!==ol&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function gO(){throw new Error}var u0=gO;function l0(){u0()}function d0(n){u0=n}var mO=null;function h0(n){let e=Object.create(p0);e.value=n;let t=()=>(ig(e),e.value);return t[oi]=e,t}function cg(n,e){i0()||l0(),n.equal(n.value,e)||(n.value=e,yO(n))}function f0(n,e){i0()||l0(),cg(n,e(n.value))}var p0=oe(k({},Ya),{equal:e0,value:void 0});function yO(n){n.version++,hO(),r0(n),mO?.()}function ce(n){return typeof n=="function"}function Zs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ll=Zs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Gi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){e=s instanceof ll?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{g0(s)}catch(o){e=e??[],o instanceof ll?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ll(e)}}add(e){var t;if(e&&e!==this)if(this.closed)g0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Gi(t,e)}remove(e){let{_finalizers:t}=this;t&&Gi(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var ug=Ze.EMPTY;function dl(n){return n instanceof Ze||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function g0(n){ce(n)?n():n.unsubscribe()}var Rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Js={setTimeout(n,e,...t){let{delegate:r}=Js;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Js;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hl(n){Js.setTimeout(()=>{let{onUnhandledError:e}=Rn;if(e)e(n);else throw n})}function Za(){}var m0=lg("C",void 0,void 0);function y0(n){return lg("E",void 0,n)}function v0(n){return lg("N",n,void 0)}function lg(n,e,t){return{kind:n,value:e,error:t}}var Wi=null;function Xs(n){if(Rn.useDeprecatedSynchronousErrorHandling){let e=!Wi;if(e&&(Wi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Wi;if(Wi=null,t)throw r}}else n()}function _0(n){Rn.useDeprecatedSynchronousErrorHandling&&Wi&&(Wi.errorThrown=!0,Wi.error=n)}var Ki=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dl(e)&&e.add(this)):this.destination=wO}static create(e,t,r){return new eo(e,t,r)}next(e){this.isStopped?hg(v0(e),this):this._next(e)}error(e){this.isStopped?hg(y0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hg(m0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vO=Function.prototype.bind;function dg(n,e){return vO.call(n,e)}var fg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){fl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){fl(r)}else fl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fl(t)}}},eo=class extends Ki{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Rn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dg(e.next,s),error:e.error&&dg(e.error,s),complete:e.complete&&dg(e.complete,s)}):i=e}this.destination=new fg(i)}};function fl(n){Rn.useDeprecatedSynchronousErrorHandling?_0(n):hl(n)}function _O(n){throw n}function hg(n,e){let{onStoppedNotification:t}=Rn;t&&Js.setTimeout(()=>t(n,e))}var wO={closed:!0,next:Za,error:_O,complete:Za};var to=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gt(n){return n}function pg(...n){return gg(n)}function gg(n){return n.length===0?Gt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var De=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=IO(t)?t:new eo(t,r,i);return Xs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=w0(r),new r((i,s)=>{let o=new eo({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[to](){return this}pipe(...t){return gg(t)(this)}toPromise(t){return t=w0(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function w0(n){var e;return(e=n??Rn.Promise)!==null&&e!==void 0?e:Promise}function EO(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function IO(n){return n&&n instanceof Ki||EO(n)&&dl(n)}function mg(n){return ce(n?.lift)}function Se(n){return e=>{if(mg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new yg(n,e,t,r,i)}var yg=class extends Ki{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function no(){return Se((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ro=class extends De{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ze;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ze.EMPTY)}return e}refCount(){return no()(this)}};var E0=Zs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Et=(()=>{class n extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new pl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new E0}next(t){Xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ug:(this.currentObservers=null,s.push(t),new Ze(()=>{this.currentObservers=null,Gi(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new De;return t.source=this,t}}return n.create=(e,t)=>new pl(e,t),n})(),pl=class extends Et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ug}};var It=class extends Et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var vg={now(){return(vg.delegate||Date).now()},delegate:void 0};var gl=class extends Ze{constructor(e,t){super()}schedule(e,t=0){return this}};var Ja={setInterval(n,e,...t){let{delegate:r}=Ja;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ja;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var io=class extends gl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ja.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ja.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Gi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var so=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};so.now=vg.now;var oo=class extends so{constructor(e,t=so.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var _g=new oo(io);var ml=class extends io{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var yl=class extends oo{};var wg=new yl(ml);var Wt=new De(n=>n.complete());function I0(n){return n&&ce(n.schedule)}function b0(n){return n[n.length-1]}function vl(n){return ce(b0(n))?n.pop():void 0}function ai(n){return I0(b0(n))?n.pop():void 0}function Eg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function C0(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function T0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qi(n){return this instanceof Qi?(this.v=n,this):new Qi(n)}function D0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(I){return Promise.resolve(I).then(y,p)}}function a(y,I){r[y]&&(i[y]=function(A){return new Promise(function(R,P){s.push([y,A,R,P])>1||c(y,A)})},I&&(i[y]=I(i[y])))}function c(y,I){try{l(r[y](I))}catch(A){m(s[0][3],A)}}function l(y){y.value instanceof Qi?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function m(y,I){y(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function S0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof T0=="function"?T0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var _l=n=>n&&typeof n.length=="number"&&typeof n!="function";function wl(n){return ce(n?.then)}function El(n){return ce(n[to])}function Il(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function bl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tl=bO();function Cl(n){return ce(n?.[Tl])}function Dl(n){return D0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Qi(t.read());if(i)return yield Qi(void 0);yield yield Qi(r)}}finally{t.releaseLock()}})}function Sl(n){return ce(n?.getReader)}function ot(n){if(n instanceof De)return n;if(n!=null){if(El(n))return TO(n);if(_l(n))return CO(n);if(wl(n))return DO(n);if(Il(n))return A0(n);if(Cl(n))return SO(n);if(Sl(n))return AO(n)}throw bl(n)}function TO(n){return new De(e=>{let t=n[to]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CO(n){return new De(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function DO(n){return new De(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hl)})}function SO(n){return new De(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function A0(n){return new De(e=>{RO(n,e).catch(t=>e.error(t))})}function AO(n){return A0(Dl(n))}function RO(n,e){var t,r,i,s;return C0(this,void 0,void 0,function*(){try{for(t=S0(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ci(n,e=0){return Se((t,r)=>{t.subscribe(_e(r,i=>Bt(r,n,()=>r.next(i),e),()=>Bt(r,n,()=>r.complete(),e),i=>Bt(r,n,()=>r.error(i),e)))})}function ui(n,e=0){return Se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function R0(n,e){return ot(n).pipe(ui(e),ci(e))}function N0(n,e){return ot(n).pipe(ui(e),ci(e))}function M0(n,e){return new De(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function P0(n,e){return new De(t=>{let r;return Bt(t,e,()=>{r=n[Tl](),Bt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Al(n,e){if(!n)throw new Error("Iterable cannot be null");return new De(t=>{Bt(t,e,()=>{let r=n[Symbol.asyncIterator]();Bt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function x0(n,e){return Al(Dl(n),e)}function O0(n,e){if(n!=null){if(El(n))return R0(n,e);if(_l(n))return M0(n,e);if(wl(n))return N0(n,e);if(Il(n))return Al(n,e);if(Cl(n))return P0(n,e);if(Sl(n))return x0(n,e)}throw bl(n)}function it(n,e){return e?O0(n,e):ot(n)}function ue(...n){let e=ai(n);return it(n,e)}function ao(n,e){let t=ce(n)?n:()=>n,r=i=>i.error(t());return new De(e?i=>e.schedule(r,0,i):r)}function Ig(n){return!!n&&(n instanceof De||ce(n.lift)&&ce(n.subscribe))}var Ir=Zs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ye(n,e){return Se((t,r)=>{let i=0;t.subscribe(_e(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:NO}=Array;function MO(n,e){return NO(e)?n(...e):n(e)}function Rl(n){return ye(e=>MO(n,e))}var{isArray:PO}=Array,{getPrototypeOf:xO,prototype:OO,keys:kO}=Object;function Nl(n){if(n.length===1){let e=n[0];if(PO(e))return{args:e,keys:null};if(FO(e)){let t=kO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function FO(n){return n&&typeof n=="object"&&xO(n)===OO}function Ml(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Pl(...n){let e=ai(n),t=vl(n),{args:r,keys:i}=Nl(n);if(r.length===0)return it([],e);let s=new De(LO(r,e,i?o=>Ml(i,o):Gt));return t?s.pipe(Rl(t)):s}function LO(n,e,t=Gt){return r=>{k0(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)k0(e,()=>{let l=it(n[c],e),h=!1;l.subscribe(_e(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function k0(n,e,t){n?Bt(t,n,e):e()}function F0(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=A=>l<r?I(A):c.push(A),I=A=>{s&&e.next(A),l++;let R=!1;ot(t(A,h++)).subscribe(_e(e,P=>{i?.(P),s?y(P):e.next(P)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let P=c.shift();o?Bt(e,o,()=>I(P)):I(P)}m()}catch(P){e.error(P)}}))};return n.subscribe(_e(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ht(n,e,t=1/0){return ce(e)?ht((r,i)=>ye((s,o)=>e(r,s,i,o))(ot(n(r,i))),t):(typeof e=="number"&&(t=e),Se((r,i)=>F0(r,i,n,t)))}function bg(n=1/0){return ht(Gt,n)}function L0(){return bg(1)}function co(...n){return L0()(it(n,ai(n)))}function xl(n){return new De(e=>{ot(n()).subscribe(e)})}function Tg(...n){let e=vl(n),{args:t,keys:r}=Nl(n),i=new De(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;ot(t[h]).subscribe(_e(s,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?Ml(r,a):a),s.complete())}))}});return e?i.pipe(Rl(e)):i}function Nn(n,e){return Se((t,r)=>{let i=0;t.subscribe(_e(r,s=>n.call(e,s,i++)&&r.next(s)))})}function li(n){return Se((e,t)=>{let r=null,i=!1,s;r=e.subscribe(_e(t,void 0,void 0,o=>{s=ot(n(o,li(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function V0(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(_e(o,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function uo(n,e){return ce(e)?ht(n,e,1):ht(n,1)}function di(n){return Se((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function br(n){return n<=0?()=>Wt:Se((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cg(n){return ye(()=>n)}function Ol(n=VO){return Se((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function VO(){return new Ir}function Xa(n){return Se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Wn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nn((i,s)=>n(i,s,r)):Gt,br(1),t?di(e):Ol(()=>new Ir))}function lo(n){return n<=0?()=>Wt:Se((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Dg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nn((i,s)=>n(i,s,r)):Gt,lo(1),t?di(e):Ol(()=>new Ir))}function Sg(n,e){return Se(V0(n,e,arguments.length>=2,!0))}function Ag(...n){let e=ai(n);return Se((t,r)=>{(e?co(n,t,e):co(n,t)).subscribe(r)})}function Mn(n,e){return Se((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(_e(r,c=>{i?.unsubscribe();let l=0,h=s++;ot(n(c,h)).subscribe(i=_e(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Rg(n){return Se((e,t)=>{ot(n).subscribe(_e(t,()=>t.complete(),Za)),!t.closed&&e.subscribe(t)})}function ft(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?Se((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(_e(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Gt}var TT="https://g.co/ng/security#xss",x=class extends Error{constructor(e,t){super(Mm(e,t)),this.code=e}};function Mm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function lc(n){return{toString:n}.toString()}var kl="__parameters__";function UO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function CT(n,e,t){return lc(()=>{let r=UO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(kl)?c[kl]:Object.defineProperty(c,kl,{value:[]})[kl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _i=globalThis;function Ve(n){for(let e in n)if(n[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function jO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Lt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Lt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function U0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var BO=Ve({__forward_ref__:Ve});function er(n){return n.__forward_ref__=er,n.toString=function(){return Lt(this())},n}function Ft(n){return DT(n)?n():n}function DT(n){return typeof n=="function"&&n.hasOwnProperty(BO)&&n.__forward_ref__===er}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function pd(n){return j0(n,AT)||j0(n,RT)}function ST(n){return pd(n)!==null}function j0(n,e){return n.hasOwnProperty(e)?n[e]:null}function $O(n){let e=n&&(n[AT]||n[RT]);return e||null}function B0(n){return n&&(n.hasOwnProperty($0)||n.hasOwnProperty(HO))?n[$0]:null}var AT=Ve({\u0275prov:Ve}),$0=Ve({\u0275inj:Ve}),RT=Ve({ngInjectableDef:Ve}),HO=Ve({ngInjectorDef:Ve}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NT(n){return n&&!!n.\u0275providers}var qO=Ve({\u0275cmp:Ve}),zO=Ve({\u0275dir:Ve}),GO=Ve({\u0275pipe:Ve}),WO=Ve({\u0275mod:Ve}),ql=Ve({\u0275fac:Ve}),nc=Ve({__NG_ELEMENT_ID__:Ve}),H0=Ve({__NG_ENV_ID__:Ve});function gd(n){return typeof n=="string"?n:n==null?"":String(n)}function KO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():gd(n)}function QO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new x(-200,n)}function Pm(n,e){throw new x(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),Hg;function MT(){return Hg}function pn(n){let e=Hg;return Hg=n,e}function PT(n,e,t){let r=pd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ge.Optional)return null;if(e!==void 0)return e;Pm(n,"Injector")}var YO={},rc=YO,qg="__NG_DI_FLAG__",zl="ngTempTokenPath",ZO="ngTokenPath",JO=/\n/gm,XO="\u0275",q0="__source",go;function ek(){return go}function hi(n){let e=go;return go=n,e}function tk(n,e=ge.Default){if(go===void 0)throw new x(-203,!1);return go===null?PT(n,void 0,e):go.get(n,e&ge.Optional?null:void 0,e)}function X(n,e=ge.Default){return(MT()||tk)(Ft(n),e)}function B(n,e=ge.Default){return X(n,md(e))}function md(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zg(n){let e=[];for(let t=0;t<n.length;t++){let r=Ft(n[t]);if(Array.isArray(r)){if(r.length===0)throw new x(900,!1);let i,s=ge.Default;for(let o=0;o<r.length;o++){let a=r[o],c=nk(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(X(i,s))}else e.push(X(r))}return e}function xT(n,e){return n[qg]=e,n.prototype[qg]=e,n}function nk(n){return n[qg]}function rk(n,e,t,r){let i=n[zl];throw e[q0]&&i.unshift(e[q0]),n.message=ik(`
`+n.message,i,t,r),n[ZO]=i,n[zl]=null,n}function ik(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==XO?n.slice(2):n;let i=Lt(e);if(Array.isArray(e))i=e.map(Lt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Lt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(JO,`
  `)}`}var We=xT(CT("Optional"),8);var OT=xT(CT("SkipSelf"),4);function yo(n,e){let t=n.hasOwnProperty(ql);return t?n[ql]:null}function xm(n,e){n.forEach(t=>Array.isArray(t)?xm(t,e):e(t))}function kT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function sk(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function ok(n,e,t){let r=dc(n,e);return r>=0?n[r|1]=t:(r=~r,sk(n,r,e,t)),r}function Ng(n,e){let t=dc(n,e);if(t>=0)return n[t|1]}function dc(n,e){return ak(n,e,1)}function ak(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var vo={},gn=[],_o=new z(""),FT=new z("",-1),LT=new z(""),Wl=class{get(e,t=rc){if(t===rc){let r=new Error(`NullInjectorError: No provider for ${Lt(e)}!`);throw r.name="NullInjectorError",r}return t}},VT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(VT||{}),Yn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Yn||{}),gi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gi||{});function ck(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Gg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];lk(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function uk(n){return n===3||n===4||n===6}function lk(n){return n.charCodeAt(0)===64}function ic(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?z0(n,t,i,null,e[++r]):z0(n,t,i,null,null))}}return n}function z0(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var UT="ng-template";function dk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ck(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Om(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Om(n){return n.type===4&&n.value!==UT}function hk(n,e,t){let r=n.type===4&&!t?UT:n.value;return e===r}function fk(n,e,t){let r=4,i=n.attrs,s=i!==null?mk(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pn(r)&&!Pn(c))return!1;if(o&&Pn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!hk(n,c,t)||c===""&&e.length===1){if(Pn(r))return!1;o=!0}}else if(r&8){if(i===null||!dk(n,i,c,t)){if(Pn(r))return!1;o=!0}}else{let l=e[++a],h=pk(c,i,Om(n),t);if(h===-1){if(Pn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Pn(r))return!1;o=!0}}}}return Pn(r)||o}function Pn(n){return(n&1)===0}function pk(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return yk(e,n)}function gk(n,e,t=!1){for(let r=0;r<e.length;r++)if(fk(n,e[r],t))return!0;return!1}function mk(n){for(let e=0;e<n.length;e++){let t=n[e];if(uk(t))return e}return n.length}function yk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function G0(n,e){return n?":not("+e.trim()+")":e}function vk(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Pn(o)&&(e+=G0(s,i),i=""),r=o,s=s||!Pn(r);t++}return i!==""&&(e+=G0(s,i)),e}function _k(n){return n.map(vk).join(",")}function wk(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Pn(i))break;i=s}r++}return{attrs:e,classes:t}}function Qt(n){return lc(()=>{let e=qT(n),t=oe(k({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===VT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yn.Emulated,styles:n.styles||gn,_:null,schemas:n.schemas||null,tView:null,id:""});zT(t);let r=n.dependencies;return t.directiveDefs=K0(r,!1),t.pipeDefs=K0(r,!0),t.id=bk(t),t})}function Ek(n){return Zi(n)||jT(n)}function Ik(n){return n!==null}function Yt(n){return lc(()=>({type:n.type,bootstrap:n.bootstrap||gn,declarations:n.declarations||gn,imports:n.imports||gn,exports:n.exports||gn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function W0(n,e){if(n==null)return vo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=gi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==gi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Je(n){return lc(()=>{let e=qT(n);return zT(e),e})}function Zi(n){return n[qO]||null}function jT(n){return n[zO]||null}function BT(n){return n[GO]||null}function $T(n){let e=Zi(n)||jT(n)||BT(n);return e!==null?e.standalone:!1}function HT(n,e){let t=n[WO]||null;if(!t&&e===!0)throw new Error(`Type ${Lt(n)} does not have '\u0275mod' property.`);return t}function qT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||vo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||gn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:W0(n.inputs,e),outputs:W0(n.outputs),debugInfo:null}}function zT(n){n.features?.forEach(e=>e(n))}function K0(n,e){if(!n)return null;let t=e?BT:Ek;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Ik)}function bk(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $t(n){return{\u0275providers:n}}function km(...n){return{\u0275providers:GT(!0,n),\u0275fromNgModule:!0}}function GT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return xm(e,o=>{let a=o;Wg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&WT(i,s),t}function WT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Fm(i,s=>{e(s,r)})}}function Wg(n,e,t,r){if(n=Ft(n),!n)return!1;let i=null,s=B0(n),o=!s&&Zi(n);if(!s&&!o){let c=n.ngModule;if(s=B0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Wg(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{xm(s.imports,h=>{Wg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&WT(l,e)}if(!a){let l=yo(i)||(()=>new i);e({provide:i,useFactory:l,deps:gn},i),e({provide:LT,useValue:i,multi:!0},i),e({provide:_o,useValue:()=>X(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Fm(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Fm(n,e){for(let t of n)NT(t)&&(t=t.\u0275providers),Array.isArray(t)?Fm(t,e):e(t)}var Tk=Ve({provide:String,useValue:Ve});function KT(n){return n!==null&&typeof n=="object"&&Tk in n}function Ck(n){return!!(n&&n.useExisting)}function Dk(n){return!!(n&&n.useFactory)}function wo(n){return typeof n=="function"}function Sk(n){return!!n.useClass}var yd=new z(""),Ul={},Ak={},Mg;function Lm(){return Mg===void 0&&(Mg=new Wl),Mg}var vn=class{},sc=class extends vn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qg(e,o=>this.processProvider(o)),this.records.set(FT,ho(void 0,this)),i.has("environment")&&this.records.set(vn,ho(void 0,this));let s=this.records.get(yd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(LT,gn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=hi(this),r=pn(void 0),i;try{return e()}finally{hi(t),pn(r)}}get(e,t=rc,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(H0))return e[H0](this);r=md(r);let i,s=hi(this),o=pn(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=xk(e)&&pd(e);l&&this.injectableDefInScope(l)?c=ho(Kg(e),Ul):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?Lm():this.parent;return t=r&ge.Optional&&t===rc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[zl]=a[zl]||[]).unshift(Lt(e)),s)throw a;return rk(a,e,"R3InjectorError",this.source)}else throw a}finally{pn(o),hi(s)}}resolveInjectorInitializers(){let e=Re(null),t=hi(this),r=pn(void 0),i;try{let s=this.get(_o,gn,ge.Self);for(let o of s)o()}finally{hi(t),pn(r),Re(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){e=Ft(e);let t=wo(e)?e:Ft(e&&e.provide),r=Nk(e);if(!wo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ho(void 0,Ul,!0),i.factory=()=>zg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Re(null);try{return t.value===Ul&&(t.value=Ak,t.value=t.factory()),typeof t.value=="object"&&t.value&&Pk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Re(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ft(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Kg(n){let e=pd(n),t=e!==null?e.factory:yo(n);if(t!==null)return t;if(n instanceof z)throw new x(204,!1);if(n instanceof Function)return Rk(n);throw new x(204,!1)}function Rk(n){if(n.length>0)throw new x(204,!1);let t=$O(n);return t!==null?()=>t.factory(n):()=>new n}function Nk(n){if(KT(n))return ho(void 0,n.useValue);{let e=QT(n);return ho(e,Ul)}}function QT(n,e,t){let r;if(wo(n)){let i=Ft(n);return yo(i)||Kg(i)}else if(KT(n))r=()=>Ft(n.useValue);else if(Dk(n))r=()=>n.useFactory(...zg(n.deps||[]));else if(Ck(n))r=()=>X(Ft(n.useExisting));else{let i=Ft(n&&(n.useClass||n.provide));if(Mk(n))r=()=>new i(...zg(n.deps));else return yo(i)||Kg(i)}return r}function ho(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Mk(n){return!!n.deps}function Pk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function xk(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Qg(n,e){for(let t of n)Array.isArray(t)?Qg(t,e):t&&NT(t)?Qg(t.\u0275providers,e):e(t)}function Ar(n,e){n instanceof sc&&n.assertNotDestroyed();let t,r=hi(n),i=pn(void 0);try{return e()}finally{hi(r),pn(i)}}function Ok(){return MT()!==void 0||ek()!=null}function kk(n){return typeof n=="function"}var Rr=0,we=1,ie=2,Vt=3,xn=4,kn=5,Kl=6,Ql=7,On=8,Eo=9,Zn=10,mt=11,oc=12,Q0=13,Ao=14,Jn=15,Io=16,fo=17,bo=18,vd=19,YT=20,fi=21,Pg=22,mn=23,Tr=25,ZT=1;var Ji=7,Yl=8,Zl=9,yn=10,Jl=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Jl||{});function pi(n){return Array.isArray(n)&&typeof n[ZT]=="object"}function Nr(n){return Array.isArray(n)&&n[ZT]===!0}function JT(n){return(n.flags&4)!==0}function _d(n){return n.componentOffset>-1}function Vm(n){return(n.flags&1)===1}function mi(n){return!!n.template}function Yg(n){return(n[ie]&512)!==0}var Zg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function XT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Mr(){return eC}function eC(n){return n.type.prototype.ngOnChanges&&(n.setInput=Lk),Fk}Mr.ngInherit=!0;function Fk(){let n=nC(this),e=n?.current;if(e){let t=n.previous;if(t===vo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Lk(n,e,t,r,i){let s=this.declaredInputs[r],o=nC(n)||Vk(n,{previous:vo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Zg(l&&l.currentValue,t,c===vo),XT(n,e,i,t)}var tC="__ngSimpleChanges__";function nC(n){return n[tC]||null}function Vk(n,e){return n[tC]=e}var Y0=null;var Kn=function(n,e,t){Y0?.(n,e,t)},Uk="svg",jk="math";function Xn(n){for(;Array.isArray(n);)n=n[Rr];return n}function rC(n,e){return Xn(e[n])}function _n(n,e){return Xn(e[n.index])}function iC(n,e){return n.data[e]}function Bk(n,e){return n[e]}function wi(n,e){let t=e[n];return pi(t)?t:t[Rr]}function Um(n){return(n[ie]&128)===128}function $k(n){return Nr(n[Vt])}function Xl(n,e){return e==null?null:n[e]}function sC(n){n[fo]=0}function oC(n){n[ie]&1024||(n[ie]|=1024,Um(n)&&Ed(n))}function Hk(n,e){for(;n>0;)e=e[Ao],n--;return e}function wd(n){return!!(n[ie]&9216||n[mn]?.dirty)}function Jg(n){n[Zn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),wd(n)&&Ed(n)}function Ed(n){n[Zn].changeDetectionScheduler?.notify(0);let e=Xi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Um(e)));)e=Xi(e)}function aC(n,e){if((n[ie]&256)===256)throw new x(911,!1);n[fi]===null&&(n[fi]=[]),n[fi].push(e)}function qk(n,e){if(n[fi]===null)return;let t=n[fi].indexOf(e);t!==-1&&n[fi].splice(t,1)}function Xi(n){let e=n[Vt];return Nr(e)?e[Vt]:e}var ve={lFrame:mC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cC=!1;function zk(){return ve.lFrame.elementDepthCount}function Gk(){ve.lFrame.elementDepthCount++}function Wk(){ve.lFrame.elementDepthCount--}function uC(){return ve.bindingsEnabled}function Kk(){return ve.skipHydrationRootTNode!==null}function Qk(n){return ve.skipHydrationRootTNode===n}function Yk(){ve.skipHydrationRootTNode=null}function qe(){return ve.lFrame.lView}function wn(){return ve.lFrame.tView}function ke(n){return ve.lFrame.contextLView=n,n[On]}function Fe(n){return ve.lFrame.contextLView=null,n}function Zt(){let n=lC();for(;n!==null&&n.type===64;)n=n.parent;return n}function lC(){return ve.lFrame.currentTNode}function Zk(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function hc(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function dC(){return ve.lFrame.isParent}function Jk(){ve.lFrame.isParent=!1}function Xk(){return ve.lFrame.contextLView}function hC(){return cC}function Z0(n){cC=n}function e1(n){return ve.lFrame.bindingIndex=n}function jm(){return ve.lFrame.bindingIndex++}function t1(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function n1(){return ve.lFrame.inI18n}function r1(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xg(e)}function i1(){return ve.lFrame.currentDirectiveIndex}function Xg(n){ve.lFrame.currentDirectiveIndex=n}function s1(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fC(n){ve.lFrame.currentQueryIndex=n}function o1(n){let e=n[we];return e.type===2?e.declTNode:e.type===1?n[kn]:null}function pC(n,e,t){if(t&ge.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ge.Host);)if(i=o1(s),i===null||(s=s[Ao],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ve.lFrame=gC();return r.currentTNode=e,r.lView=n,!0}function Bm(n){let e=gC(),t=n[we];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gC(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?mC(n):e}function mC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function yC(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var vC=yC;function $m(){let n=yC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function a1(n){return(ve.lFrame.contextLView=Hk(n,ve.lFrame.contextLView))[On]}function Ro(){return ve.lFrame.selectedIndex}function es(n){ve.lFrame.selectedIndex=n}function Hm(){let n=ve.lFrame;return iC(n.tView,n.selectedIndex)}function c1(){return ve.lFrame.currentNamespace}var _C=!0;function qm(){return _C}function zm(n){_C=n}function u1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=eC(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Gm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function jl(n,e,t){wC(n,e,3,t)}function Bl(n,e,t,r){(n[ie]&3)===t&&wC(n,e,t,r)}function xg(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function wC(n,e,t,r){let i=r!==void 0?n[fo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[fo]+=65536),(a<s||s==-1)&&(l1(n,t,e,c),n[fo]=(n[fo]&4294901760)+c+2),c++}function J0(n,e){Kn(4,n,e);let t=Re(null);try{e.call(n)}finally{Re(t),Kn(5,n,e)}}function l1(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ie]>>14<n[fo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,J0(a,s)):J0(a,s)}var mo=-1,ts=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function d1(n){return n instanceof ts}function h1(n){return(n.flags&8)!==0}function f1(n){return(n.flags&16)!==0}var Og={},em=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=md(r);let i=this.injector.get(e,Og,r);return i!==Og||t===Og?i:this.parentInjector.get(e,t,r)}};function EC(n){return n!==mo}function ed(n){return n&32767}function p1(n){return n>>16}function td(n,e){let t=p1(n),r=e;for(;t>0;)r=r[Ao],t--;return r}var tm=!0;function X0(n){let e=tm;return tm=n,e}var g1=256,IC=g1-1,bC=5,m1=0,Qn={};function y1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(nc)&&(r=t[nc]),r==null&&(r=t[nc]=m1++);let i=r&IC,s=1<<i;e.data[n+(i>>bC)]|=s}function nd(n,e){let t=TC(n,e);if(t!==-1)return t;let r=e[we];r.firstCreatePass&&(n.injectorIndex=e.length,kg(r.data,n),kg(e,null),kg(r.blueprint,null));let i=Wm(n,e),s=n.injectorIndex;if(EC(i)){let o=ed(i),a=td(i,e),c=a[we].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function kg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Wm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=RC(i),r===null)return mo;if(t++,i=i[Ao],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return mo}function nm(n,e,t){y1(n,e,t)}function CC(n,e,t){if(t&ge.Optional||n!==void 0)return n;Pm(e,"NodeInjector")}function DC(n,e,t,r){if(t&ge.Optional&&r===void 0&&(r=null),!(t&(ge.Self|ge.Host))){let i=n[Eo],s=pn(void 0);try{return i?i.get(e,r,t&ge.Optional):PT(e,r,t&ge.Optional)}finally{pn(s)}}return CC(r,e,t)}function SC(n,e,t,r=ge.Default,i){if(n!==null){if(e[ie]&2048&&!(r&ge.Self)){let o=I1(n,e,t,r,Qn);if(o!==Qn)return o}let s=AC(n,e,t,r,Qn);if(s!==Qn)return s}return DC(e,t,r,i)}function AC(n,e,t,r,i){let s=w1(t);if(typeof s=="function"){if(!pC(e,n,r))return r&ge.Host?CC(i,t,r):DC(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ge.Optional))Pm(t);else return o}finally{vC()}}else if(typeof s=="number"){let o=null,a=TC(n,e),c=mo,l=r&ge.Host?e[Jn][kn]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?Wm(n,e):e[a+8],c===mo||!tT(r,!1)?a=-1:(o=e[we],a=ed(c),e=td(c,e)));a!==-1;){let h=e[we];if(eT(s,a,h.data)){let p=v1(a,e,t,o,r,l);if(p!==Qn)return p}c=e[a+8],c!==mo&&tT(r,e[we].data[a+8]===l)&&eT(s,a,e)?(o=h,a=ed(c),e=td(c,e)):a=-1}}return i}function v1(n,e,t,r,i,s){let o=e[we],a=o.data[n+8],c=r==null?_d(a)&&tm:r!=o&&(a.type&3)!==0,l=i&ge.Host&&s===a,h=_1(a,o,t,c,l);return h!==null?To(e,o,h,a):Qn}function _1(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let I=o[y];if(y<c&&t===I||y>=c&&I.type===t)return y}if(i){let y=o[c];if(y&&mi(y)&&y.type===t)return c}return null}function To(n,e,t,r){let i=n[t],s=e.data;if(d1(i)){let o=i;o.resolving&&QO(KO(s[t]));let a=X0(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?pn(o.injectImpl):null,h=pC(n,r,ge.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&u1(t,s[t],e)}finally{l!==null&&pn(l),X0(a),o.resolving=!1,vC()}}return i}function w1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(nc)?n[nc]:void 0;return typeof e=="number"?e>=0?e&IC:E1:e}function eT(n,e,t){let r=1<<n;return!!(t[e+(n>>bC)]&r)}function tT(n,e){return!(n&ge.Self)&&!(n&ge.Host&&e)}var Yi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return SC(this._tNode,this._lView,e,md(r),t)}};function E1(){return new Yi(Zt(),qe())}function Pr(n){return lc(()=>{let e=n.prototype.constructor,t=e[ql]||rm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ql]||rm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function rm(n){return DT(n)?()=>{let e=rm(Ft(n));return e&&e()}:yo(n)}function I1(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ie]&2048&&!(o[ie]&512);){let a=AC(s,o,t,r|ge.Self,Qn);if(a!==Qn)return a;let c=s.parent;if(!c){let l=o[YT];if(l){let h=l.get(t,Qn,r);if(h!==Qn)return h}c=RC(o),o=o[Ao]}s=c}return i}function RC(n){let e=n[we],t=e.type;return t===2?e.declTNode:t===1?n[kn]:null}function nT(n,e=null,t=null,r){let i=NC(n,e,t,r);return i.resolveInjectorInitializers(),i}function NC(n,e=null,t=null,r,i=new Set){let s=[t||gn,km(n)];return r=r||(typeof n=="object"?void 0:Lt(n)),new sc(s,e||Lm(),r||null,i)}var pt=class n{static{this.THROW_IF_NOT_FOUND=rc}static{this.NULL=new Wl}static create(e,t){if(Array.isArray(e))return nT({name:""},t,e,"");{let r=e.name??"";return nT({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Q({token:n,providedIn:"any",factory:()=>X(FT)})}static{this.__NG_ELEMENT_ID__=-1}};var b1=new z("");b1.__NG_ELEMENT_ID__=n=>{let e=Zt();if(e===null)throw new x(204,!1);if(e.type&2)return e.value;if(n&ge.Optional)return null;throw new x(204,!1)};var T1="ngOriginalError";function Fg(n){return n[T1]}var MC=!0,PC=(()=>{class n{static{this.__NG_ELEMENT_ID__=C1}static{this.__NG_ENV_ID__=t=>t}}return n})(),im=class extends PC{constructor(e){super(),this._lView=e}onDestroy(e){return aC(this._lView,e),()=>qk(this._lView,e)}};function C1(){return new im(qe())}var No=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new It(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var sm=class extends Et{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Ok()&&(this.destroyRef=B(PC,{optional:!0})??void 0,this.pendingTasks=B(No,{optional:!0})??void 0)}emit(e){let t=Re(null);try{super.next(e)}finally{Re(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},at=sm;function rd(...n){}function xC(n){let e,t;function r(){n=rd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rT(n){return queueMicrotask(()=>n()),()=>{n=rd}}var Km="isAngularZone",id=Km+"_ID",D1=0,de=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=MC}=e;if(typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,R1(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Km)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,S1,rd,rd);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},S1={};function Qm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function A1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){xC(()=>{n.callbackScheduled=!1,om(n),n.isCheckStableRunning=!0,Qm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),om(n)}function R1(n){let e=()=>{A1(n)},t=D1++;n._inner=n._inner.fork({name:"angular",properties:{[Km]:!0,[id]:t,[id+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(N1(c))return r.invokeTask(s,o,a,c);try{return iT(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),sT(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return iT(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!M1(c)&&e(),sT(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,om(n),Qm(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function om(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sT(n){n._nesting--,Qm(n)}var am=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new at,this.onMicrotaskEmpty=new at,this.onStable=new at,this.onError=new at}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function N1(n){return OC(n,"__ignore_ng_zone__")}function M1(n){return OC(n,"__scheduler_tick__")}function OC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Cr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Fg(e);for(;t&&Fg(t);)t=Fg(t);return t||null}},P1=new z("",{providedIn:"root",factory:()=>{let n=B(de),e=B(Cr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function x1(){return Id(Zt(),qe())}function Id(n,e){return new xr(_n(n,e))}var xr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=x1}}return n})();function kC(n){return(n.flags&128)===128}var FC=new Map,O1=0;function k1(){return O1++}function F1(n){FC.set(n[vd],n)}function cm(n){FC.delete(n[vd])}var oT="__ngContext__";function ns(n,e){pi(e)?(n[oT]=e[vd],F1(e)):n[oT]=e}function LC(n){return UC(n[oc])}function VC(n){return UC(n[xn])}function UC(n){for(;n!==null&&!Nr(n);)n=n[xn];return n}var um;function jC(n){um=n}function L1(){if(um!==void 0)return um;if(typeof document<"u")return document;throw new x(210,!1)}var bd=new z("",{providedIn:"root",factory:()=>V1}),V1="ng",Ym=new z(""),Ei=new z("",{providedIn:"platform",factory:()=>"unknown"});var Zm=new z(""),Jm=new z("",{providedIn:"root",factory:()=>L1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var U1="h",j1="b";var B1=()=>null;function Xm(n,e,t=!1){return B1(n,e,t)}var BC=!1,$1=new z("",{providedIn:"root",factory:()=>BC});var sd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TT})`}};function Td(n){return n instanceof sd?n.changingThisBreaksApplicationSecurity:n}function $C(n,e){let t=H1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${TT})`)}return t===e}function H1(n){return n instanceof sd&&n.getTypeName()||null}var q1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HC(n){return n=String(n),n.match(q1)?n:"unsafe:"+n}var ey=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ey||{});function Cd(n){let e=z1();return e?e.sanitize(ey.URL,n)||"":$C(n,"URL")?Td(n):HC(gd(n))}function z1(){let n=qe();return n&&n[Zn].sanitizer}function qC(n){return n instanceof Function?n():n}var Dr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Dr||{}),G1;function ty(n,e){return G1(n,e)}function po(n,e,t,r,i){if(r!=null){let s,o=!1;Nr(r)?s=r:pi(r)&&(o=!0,r=r[Rr]);let a=Xn(r);n===0&&t!==null?i==null?QC(e,t,a):od(e,t,a,i||null,!0):n===1&&t!==null?od(e,t,a,i||null,!0):n===2?aF(e,a,o):n===3&&e.destroyNode(a),s!=null&&uF(e,n,s,t,i)}}function W1(n,e){return n.createText(e)}function K1(n,e,t){n.setValue(e,t)}function zC(n,e,t){return n.createElement(e,t)}function Q1(n,e){GC(n,e),e[Rr]=null,e[kn]=null}function Y1(n,e,t,r,i,s){r[Rr]=i,r[kn]=e,Dd(n,r,t,1,i,s)}function GC(n,e){e[Zn].changeDetectionScheduler?.notify(9),Dd(n,e,e[mt],2,null,null)}function Z1(n){let e=n[oc];if(!e)return Lg(n[we],n);for(;e;){let t=null;if(pi(e))t=e[oc];else{let r=e[yn];r&&(t=r)}if(!t){for(;e&&!e[xn]&&e!==n;)pi(e)&&Lg(e[we],e),e=e[Vt];e===null&&(e=n),pi(e)&&Lg(e[we],e),t=e&&e[xn]}e=t}}function J1(n,e,t,r){let i=yn+r,s=t.length;r>0&&(t[i-1][xn]=e),r<s-yn?(e[xn]=t[i],kT(t,yn+r,e)):(t.push(e),e[xn]=null),e[Vt]=t;let o=e[Io];o!==null&&t!==o&&WC(o,e);let a=e[bo];a!==null&&a.insertView(n),Jg(e),e[ie]|=128}function WC(n,e){let t=n[Zl],r=e[Vt];if(pi(r))n[ie]|=Jl.HasTransplantedViews;else{let i=r[Vt][Jn];e[Jn]!==i&&(n[ie]|=Jl.HasTransplantedViews)}t===null?n[Zl]=[e]:t.push(e)}function ny(n,e){let t=n[Zl],r=t.indexOf(e);t.splice(r,1)}function lm(n,e){if(n.length<=yn)return;let t=yn+e,r=n[t];if(r){let i=r[Io];i!==null&&i!==n&&ny(i,r),e>0&&(n[t-1][xn]=r[xn]);let s=Gl(n,yn+e);Q1(r[we],r);let o=s[bo];o!==null&&o.detachView(s[we]),r[Vt]=null,r[xn]=null,r[ie]&=-129}return r}function KC(n,e){if(!(e[ie]&256)){let t=e[mt];t.destroyNode&&Dd(n,e,t,3,null,null),Z1(e)}}function Lg(n,e){if(e[ie]&256)return;let t=Re(null);try{e[ie]&=-129,e[ie]|=256,e[mn]&&ag(e[mn]),eF(n,e),X1(n,e),e[we].type===1&&e[mt].destroy();let r=e[Io];if(r!==null&&Nr(e[Vt])){r!==e[Vt]&&ny(r,e);let i=e[bo];i!==null&&i.detachView(n)}cm(e)}finally{Re(t)}}function X1(n,e){let t=n.cleanup,r=e[Ql];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Ql]=null);let i=e[fi];if(i!==null){e[fi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function eF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ts)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Kn(4,a,c);try{c.call(a)}finally{Kn(5,a,c)}}else{Kn(4,i,s);try{s.call(i)}finally{Kn(5,i,s)}}}}}function tF(n,e,t){return nF(n,e.parent,t)}function nF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Rr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Yn.None||s===Yn.Emulated)return null}return _n(r,t)}}function od(n,e,t,r,i){n.insertBefore(e,t,r,i)}function QC(n,e,t){n.appendChild(e,t)}function aT(n,e,t,r,i){r!==null?od(n,e,t,r,i):QC(n,e,t)}function YC(n,e){return n.parentNode(e)}function rF(n,e){return n.nextSibling(e)}function iF(n,e,t){return oF(n,e,t)}function sF(n,e,t){return n.type&40?_n(n,t):null}var oF=sF,cT;function ry(n,e,t,r){let i=tF(n,r,e),s=e[mt],o=r.parent||e[kn],a=iF(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)aT(s,i,t[c],a,!1);else aT(s,i,t,a,!1);cT!==void 0&&cT(s,r,e,t,i)}function ec(n,e){if(e!==null){let t=e.type;if(t&3)return _n(e,n);if(t&4)return dm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ec(n,r);{let i=n[e.index];return Nr(i)?dm(-1,i):Xn(i)}}else{if(t&128)return ec(n,e.next);if(t&32)return ty(e,n)()||Xn(n[e.index]);{let r=ZC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Xi(n[Jn]);return ec(i,r)}else return ec(n,e.next)}}}return null}function ZC(n,e){if(e!==null){let r=n[Jn][kn],i=e.projection;return r.projection[i]}return null}function dm(n,e){let t=yn+n+1;if(t<e.length){let r=e[t],i=r[we].firstChild;if(i!==null)return ec(r,i)}return e[Ji]}function aF(n,e,t){n.removeChild(null,e,t)}function iy(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&ns(Xn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)iy(n,e,t.child,r,i,s,!1),po(e,n,i,a,s);else if(c&32){let l=ty(t,r),h;for(;h=l();)po(e,n,i,h,s);po(e,n,i,a,s)}else c&16?cF(n,e,r,t,i,s):po(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Dd(n,e,t,r,i,s){iy(t,r,n.firstChild,e,i,s,!1)}function cF(n,e,t,r,i,s){let o=t[Jn],c=o[kn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];po(e,n,i,h,s)}else{let l=c,h=o[Vt];kC(r)&&(l.flags|=128),iy(n,e,l,h,i,s,!0)}}function uF(n,e,t,r,i){let s=t[Ji],o=Xn(t);s!==o&&po(e,n,r,s,i);for(let a=yn;a<t.length;a++){let c=t[a];Dd(c[we],c,n,e,r,s)}}function lF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Dr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Dr.Important),n.setStyle(t,r,i,s))}}function dF(n,e,t){n.setAttribute(e,"style",t)}function JC(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XC(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Gg(n,e,r),i!==null&&JC(n,e,i),s!==null&&dF(n,e,s)}var ss={};function te(n=1){eD(wn(),qe(),Ro()+n,!1)}function eD(n,e,t,r){if(!r)if((e[ie]&3)===3){let s=n.preOrderCheckHooks;s!==null&&jl(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Bl(e,s,0,t)}es(t)}function Z(n,e=ge.Default){let t=qe();if(t===null)return X(n,e);let r=Zt();return SC(r,t,Ft(n),e)}function tD(n,e,t,r,i,s){let o=Re(null);try{let a=null;i&gi.SignalBased&&(a=e[r][oi]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&gi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):XT(e,a,r,s)}finally{Re(o)}}function hF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)es(~i);else{let s=i,o=t[++r],a=t[++r];r1(o,s);let c=e[s];a(2,c)}}}finally{es(-1)}}function Sd(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[Rr]=i,p[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),sC(p),p[Vt]=p[Ao]=n,p[On]=t,p[Zn]=o||n&&n[Zn],p[mt]=a||n&&n[mt],p[Eo]=c||n&&n[Eo]||null,p[kn]=s,p[vd]=k1(),p[Kl]=h,p[YT]=l,p[Jn]=e.type==2?n[Jn]:p,p}function Ad(n,e,t,r,i){let s=n.data[e];if(s===null)s=fF(n,e,t,r,i),n1()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Zk();s.injectorIndex=o===null?-1:o.injectorIndex}return hc(s,!0),s}function fF(n,e,t,r,i){let s=lC(),o=dC(),a=o?s:s&&s.parent,c=n.data[e]=vF(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function nD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function rD(n,e,t,r,i){let s=Ro(),o=r&2;try{es(-1),o&&e.length>Tr&&eD(n,e,Tr,!1),Kn(o?2:0,i),t(r,i)}finally{es(s),Kn(o?3:1,i)}}function iD(n,e,t){if(JT(e)){let r=Re(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Re(r)}}}function sD(n,e,t){uC()&&(TF(n,e,t,_n(t,e)),(t.flags&64)===64&&dD(n,e,t))}function oD(n,e,t=_n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function aD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sy(n,e,t,r,i,s,o,a,c,l,h){let p=Tr+r,m=p+i,y=pF(p,m),I=typeof l=="function"?l():l;return y[we]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:h}}function pF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ss);return t}function gF(n,e,t,r){let s=r.get($1,BC)||t===Yn.ShadowDom,o=n.selectRootElement(e,s);return mF(o),o}function mF(n){yF(n)}var yF=()=>null;function vF(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Kk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function uT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=gi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?lT(r,t,l,a,c):lT(r,t,l,a)}return r}function lT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function _F(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=t?t.get(p):null,y=m?m.inputs:null,I=m?m.outputs:null;c=uT(0,p.inputs,h,c,y),l=uT(1,p.outputs,h,l,I);let A=c!==null&&o!==null&&!Om(e)?kF(c,h,o):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function wF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function cD(n,e,t,r,i,s,o,a){let c=_n(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(oy(n,t,h,r,i),_d(e)&&EF(t,e.index)):e.type&3?(r=wF(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function EF(n,e){let t=wi(e,n);t[ie]&16||(t[ie]|=64)}function uD(n,e,t,r){if(uC()){let i=r===null?null:{"":-1},s=DF(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&lD(n,e,t,o,i,a),i&&SF(t,r,i)}t.mergedAttrs=ic(t.mergedAttrs,t.attrs)}function lD(n,e,t,r,i,s){for(let l=0;l<r.length;l++)nm(nd(t,e),n,r[l].type);RF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=nD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ic(t.mergedAttrs,h.hostAttrs),NF(n,t,e,c,h),AF(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}_F(n,t,s)}function IF(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;bF(o)!=a&&o.push(a),o.push(t,r,s)}}function bF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function TF(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;_d(t)&&MF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||nd(t,e),ns(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=To(e,n,a,t);if(ns(l,e),o!==null&&OF(e,a-i,l,c,t,o),mi(c)){let h=wi(t.index,e);h[On]=To(e,n,a,t)}}}function dD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=i1();try{es(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Xg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&CF(c,l)}}finally{es(-1),Xg(o)}}function CF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function DF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(gk(e,o.selectors,!1))if(r||(r=[]),mi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;hm(n,e,c)}else r.unshift(o),hm(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function hm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new x(-301,!1);r.push(e[i],s)}}}function AF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;mi(e)&&(t[""]=n)}}function RF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function NF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=yo(i.type,!0)),o=new ts(s,mi(i),Z);n.blueprint[r]=o,t[r]=o,IF(n,e,r,nD(n,t,i.hostVars,ss),i)}function MF(n,e,t){let r=_n(e,n),i=aD(t),s=n[Zn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Rd(n,Sd(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function PF(n,e,t,r,i,s){let o=_n(n,e);xF(e[mt],o,s,n.value,t,r,i)}function xF(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?gd(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function OF(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];tD(r,t,c,l,h,p)}}function kF(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function hD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function fD(n,e){let t=n.contentQueries;if(t!==null){let r=Re(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];fC(s),a.contentQueries(2,e[o],o)}}}finally{Re(r)}}}function Rd(n,e){return n[oc]?n[Q0][xn]=e:n[oc]=e,n[Q0]=e,e}function fm(n,e,t){fC(0);let r=Re(null);try{e(n,t)}finally{Re(r)}}function FF(n){return n[Ql]??=[]}function LF(n){return n.cleanup??=[]}function pD(n,e){let t=n[Eo],r=t?t.get(Cr,null):null;r&&r.handleError(e)}function oy(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],h=n.data[o];tD(h,l,r,a,c,i)}}function VF(n,e,t){let r=rC(e,n);K1(n[mt],r,t)}function UF(n,e){let t=wi(e,n),r=t[we];jF(r,t);let i=t[Rr];i!==null&&t[Kl]===null&&(t[Kl]=Xm(i,t[Eo])),ay(r,t,t[On])}function jF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ay(n,e,t){Bm(e);try{let r=n.viewQuery;r!==null&&fm(1,r,t);let i=n.template;i!==null&&rD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[bo]?.finishViewCreation(n),n.staticContentQueries&&fD(n,e),n.staticViewQueries&&fm(2,n.viewQuery,t);let s=n.components;s!==null&&BF(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,$m()}}function BF(n,e){for(let t=0;t<e.length;t++)UF(n,e[t])}function $F(n,e,t,r){let i=Re(null);try{let s=e.tView,a=n[ie]&4096?4096:16,c=Sd(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Io]=l;let h=n[bo];return h!==null&&(c[bo]=h.createEmbeddedView(s)),ay(s,c,t),c}finally{Re(i)}}function dT(n,e){return!e||e.firstChild===null||kC(n)}function HF(n,e,t,r=!0){let i=e[we];if(J1(i,e,n,t),r){let o=dm(t,n),a=e[mt],c=YC(a,n[Ji]);c!==null&&Y1(i,n[kn],a,e,c,o)}let s=e[Kl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ad(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Xn(s)),Nr(s)&&qF(s,r);let o=t.type;if(o&8)ad(n,e,t.child,r);else if(o&32){let a=ty(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ZC(e,t);if(Array.isArray(a))r.push(...a);else{let c=Xi(e[Jn]);ad(c[we],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function qF(n,e){for(let t=yn;t<n.length;t++){let r=n[t],i=r[we].firstChild;i!==null&&ad(r[we],r,i,e)}n[Ji]!==n[Rr]&&e.push(n[Ji])}var gD=[];function zF(n){return n[mn]??GF(n)}function GF(n){let e=gD.pop()??Object.create(KF);return e.lView=n,e}function WF(n){n.lView[mn]!==n&&(n.lView=null,gD.push(n))}var KF=oe(k({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ed(n.lView)},consumerOnSignalRead(){this.lView[mn]=this}});function QF(n){let e=n[mn]??Object.create(YF);return e.lView=n,e}var YF=oe(k({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Xi(n.lView);for(;e&&!mD(e[we]);)e=Xi(e);e&&oC(e)},consumerOnSignalRead(){this.lView[mn]=this}});function mD(n){return n.type!==2}var ZF=100;function yD(n,e=!0,t=0){let r=n[Zn],i=r.rendererFactory,s=!1;s||i.begin?.();try{JF(n,t)}catch(o){throw e&&pD(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function JF(n,e){let t=hC();try{Z0(!0),pm(n,e);let r=0;for(;wd(n);){if(r===ZF)throw new x(103,!1);r++,pm(n,1)}}finally{Z0(t)}}function XF(n,e,t,r){let i=e[ie];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Zn].inlineEffectRunner?.flush(),Bm(e);let a=!0,c=null,l=null;s||(mD(n)?(l=zF(e),c=al(l)):t0()===null?(a=!1,l=QF(e),c=al(l)):e[mn]&&(ag(e[mn]),e[mn]=null));try{sC(e),e1(n.bindingStartIndex),t!==null&&rD(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let y=n.preOrderCheckHooks;y!==null&&jl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Bl(e,y,0,null),xg(e,0)}if(o||eL(e),vD(e,0),n.contentQueries!==null&&fD(n,e),!s)if(h){let y=n.contentCheckHooks;y!==null&&jl(e,y)}else{let y=n.contentHooks;y!==null&&Bl(e,y,1),xg(e,1)}hF(n,e);let p=n.components;p!==null&&wD(e,p,0);let m=n.viewQuery;if(m!==null&&fm(2,m,r),!s)if(h){let y=n.viewCheckHooks;y!==null&&jl(e,y)}else{let y=n.viewHooks;y!==null&&Bl(e,y,2),xg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Pg]){for(let y of e[Pg])y();e[Pg]=null}s||(e[ie]&=-73)}catch(h){throw s||Ed(e),h}finally{l!==null&&(sg(l,c),a&&WF(l)),$m()}}function vD(n,e){for(let t=LC(n);t!==null;t=VC(t))for(let r=yn;r<t.length;r++){let i=t[r];_D(i,e)}}function eL(n){for(let e=LC(n);e!==null;e=VC(e)){if(!(e[ie]&Jl.HasTransplantedViews))continue;let t=e[Zl];for(let r=0;r<t.length;r++){let i=t[r];oC(i)}}}function tL(n,e,t){let r=wi(e,n);_D(r,t)}function _D(n,e){Um(n)&&pm(n,e)}function pm(n,e){let r=n[we],i=n[ie],s=n[mn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&og(s)),o||=!1,s&&(s.dirty=!1),n[ie]&=-9217,o)XF(r,n,r.template,n[On]);else if(i&8192){vD(n,1);let a=r.components;a!==null&&wD(n,a,1)}}function wD(n,e,t){for(let r=0;r<e.length;r++)tL(n,e[r],t)}function cy(n,e){let t=hC()?64:1088;for(n[Zn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=Xi(n);if(Yg(n)&&!r)return n;n=r}return null}var rs=class{get rootNodes(){let e=this._lView,t=e[we];return ad(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(e){this._lView[On]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Vt];if(Nr(e)){let t=e[Yl],r=t?t.indexOf(this):-1;r>-1&&(lm(e,r),Gl(t,r))}this._attachedToViewContainer=!1}KC(this._lView[we],this._lView)}onDestroy(e){aC(this._lView,e)}markForCheck(){cy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Jg(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,yD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Yg(this._lView),t=this._lView[Io];t!==null&&!e&&ny(t,this._lView),GC(this._lView[we],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e;let t=Yg(this._lView),r=this._lView[Io];r!==null&&!t&&WC(r,this._lView),Jg(this._lView)}},Nd=(()=>{class n{static{this.__NG_ELEMENT_ID__=iL}}return n})(),nL=Nd,rL=class extends nL{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=$F(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new rs(i)}};function iL(){return sL(Zt(),qe())}function sL(n,e){return n.type&4?new rL(e,n,Id(n,e)):null}var QY=new RegExp(`^(\\d+)*(${j1}|${U1})*(.*)`);var oL=()=>null;function hT(n,e){return oL(n,e)}var Co=class{},Md=new z("",{providedIn:"root",factory:()=>!1});var ED=new z(""),ID=new z(""),gm=class{},cd=class{};function aL(n){let e=Error(`No component factory found for ${Lt(n)}.`);return e[cL]=n,e}var cL="ngComponent";var mm=class{resolveComponentFactory(e){throw aL(e)}},Do=class{static{this.NULL=new mm}},yi=class{},Or=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>uL()}}return n})();function uL(){let n=qe(),e=Zt(),t=wi(e.index,n);return(pi(t)?t:n)[mt]}var lL=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}}return n})();function ym(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=U0(i,a);else if(s==2){let c=a,l=e[++o];r=U0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ud=class extends Do{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Zi(e);return new ac(t,this.ngModule)}};function fT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:gi.None;e?t.push({propName:o,templateName:r,isSignal:(a&gi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function dL(n){let e=n.toLowerCase();return e==="svg"?Uk:e==="math"?jk:null}var ac=class extends cd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=fT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return fT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_k(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Re(null);try{i=i||this.ngModule;let o=i instanceof vn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new em(e,o):e,c=a.get(yi,null);if(c===null)throw new x(407,!1);let l=a.get(lL,null),h=a.get(Co,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=r?gF(m,r,this.componentDef.encapsulation,a):zC(m,y,dL(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let R=null;I!==null&&(R=Xm(I,a,!0));let P=sy(0,null,null,1,0,null,null,null,null,null,null),V=Sd(null,P,null,A,null,null,p,m,a,null,R);Bm(V);let U,$,Ce=null;try{let K=this.componentDef,b,_=null;K.findHostDirectiveDefs?(b=[],_=new Map,K.findHostDirectiveDefs(K,b,_),b.push(K)):b=[K];let w=hL(V,I);Ce=fL(w,I,K,b,V,p,m),$=iC(P,Tr),I&&mL(m,K,I,r),t!==void 0&&yL($,this.ngContentSelectors,t),U=gL(Ce,K,b,_,V,[vL]),ay(P,V,null)}catch(K){throw Ce!==null&&cm(Ce),cm(V),K}finally{$m()}return new vm(this.componentType,U,Id($,V),V,$)}finally{Re(s)}}},vm=class extends gm{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new rs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;oy(s[we],s,i,e,t),this.previousInputValues.set(e,t);let o=wi(this._tNode.index,s);cy(o,1)}}get injector(){return new Yi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function hL(n,e){let t=n[we],r=Tr;return n[r]=e,Ad(t,r,2,"#host",null)}function fL(n,e,t,r,i,s,o){let a=i[we];pL(r,n,e,o);let c=null;e!==null&&(c=Xm(e,i[Eo]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Sd(i,aD(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&hm(a,n,r.length-1),Rd(i,p),i[n.index]=p}function pL(n,e,t,r){for(let i of n)e.mergedAttrs=ic(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ym(e,e.mergedAttrs,!0),t!==null&&XC(r,t,e))}function gL(n,e,t,r,i,s){let o=Zt(),a=i[we],c=_n(o,i);lD(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,m=To(i,a,p,o);ns(m,i)}dD(a,i,o),c&&ns(c,i);let l=To(i,a,o.directiveStart+o.componentOffset,o);if(n[On]=i[On]=l,s!==null)for(let h of s)h(l,e);return iD(a,o,i),l}function mL(n,e,t,r){if(r)Gg(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:s}=wk(e.selectors[0]);i&&Gg(n,t,i),s&&s.length>0&&JC(n,t,s.join(" "))}}function yL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function vL(){let n=Zt();Gm(qe()[we],n)}var Mo=(()=>{class n{static{this.__NG_ELEMENT_ID__=_L}}return n})();function _L(){let n=Zt();return EL(n,qe())}var wL=Mo,bD=class extends wL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Id(this._hostTNode,this._hostLView)}get injector(){return new Yi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Wm(this._hostTNode,this._hostLView);if(EC(e)){let t=td(e,this._hostLView),r=ed(e),i=t[we].data[r+8];return new Yi(i,t)}else return new Yi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-yn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=hT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,dT(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!kk(e),a;if(o)a=t;else{let I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}let c=o?e:new ac(Zi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let A=(o?l:this.parentInjector).get(vn,null);A&&(s=A)}let h=Zi(c.componentType??{}),p=hT(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,s);return this.insertImpl(y.hostView,a,dT(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if($k(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Vt],l=new bD(c,c[kn],c[Vt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return HF(o,i,s,r),e.attachToViewContainerRef(),kT(Vg(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lm(this._lContainer,t);r&&(Gl(Vg(this._lContainer),t),KC(r[we],r))}detach(e){let t=this._adjustIndex(e,-1),r=lm(this._lContainer,t);return r&&Gl(Vg(this._lContainer),t)!=null?new rs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pT(n){return n[Yl]}function Vg(n){return n[Yl]||(n[Yl]=[])}function EL(n,e){let t,r=e[n.index];return Nr(r)?t=r:(t=hD(r,e,null,n),e[n.index]=t,Rd(e,t)),bL(t,e,n,r),new bD(t,n,e)}function IL(n,e){let t=n[mt],r=t.createComment(""),i=_n(e,n),s=YC(t,i);return od(t,s,r,rF(t,i),!1),r}var bL=DL,TL=()=>!1;function CL(n,e,t){return TL(n,e,t)}function DL(n,e,t,r){if(n[Ji])return;let i;t.type&8?i=Xn(r):i=IL(e,t),n[Ji]=i}var gT=new Set;function Po(n){gT.has(n)||(gT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function fc(n,e){Po("NgSignals");let t=h0(n),r=t[oi];return e?.equal&&(r.equal=e.equal),t.set=i=>cg(r,i),t.update=i=>f0(r,i),t.asReadonly=SL.bind(t),t}function SL(){let n=this[oi];if(n.readonlyFn===void 0){let e=()=>this();e[oi]=n,n.readonlyFn=e}return n.readonlyFn}function AL(n){return Object.getPrototypeOf(n.prototype).constructor}function Jt(n){let e=AL(n.type),t=!0,r=[n];for(;e;){let i;if(mi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Fl(n.inputs),o.inputTransforms=Fl(n.inputTransforms),o.declaredInputs=Fl(n.declaredInputs),o.outputs=Fl(n.outputs);let a=i.hostBindings;a&&xL(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&ML(n,c),l&&PL(n,l),RL(n,i),jO(n.outputs,i.outputs),mi(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Jt&&(t=!1)}}e=Object.getPrototypeOf(e)}NL(r)}function RL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function NL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ic(i.hostAttrs,t=ic(t,i.hostAttrs))}}function Fl(n){return n===vo?{}:n===gn?[]:n}function ML(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function PL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function xL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var vi=class{},cc=class{};var _m=class extends vi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ud(this);let s=HT(e);this._bootstrapComponents=qC(s.bootstrap),this._r3Injector=NC(e,t,[{provide:vi,useValue:this},{provide:Do,useValue:this.componentFactoryResolver},...r],Lt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wm=class extends cc{constructor(e){super(),this.moduleType=e}create(e){return new _m(this.moduleType,e,[])}};var ld=class extends vi{constructor(e){super(),this.componentFactoryResolver=new ud(this),this.instance=null;let t=new sc([...e.providers,{provide:vi,useValue:this},{provide:Do,useValue:this.componentFactoryResolver}],e.parent||Lm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function uy(n,e,t=null){return new ld({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function TD(n){return kL(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function OL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function kL(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Pd(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function FL(n){return(n.flags&32)===32}function LL(n,e,t,r,i,s,o,a,c){let l=e.consts,h=Ad(e,n,4,o||null,a||null);uD(e,t,h,Xl(l,c)),Gm(e,h);let p=h.tView=sy(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function VL(n,e,t,r,i,s,o,a,c,l){let h=t+Tr,p=e.firstCreatePass?LL(h,e,n,r,i,s,o,a,c):e.data[h];hc(p,!1);let m=UL(e,n,p,t);qm()&&ry(e,n,m,p),ns(m,n);let y=hD(m,n,m,p);return n[h]=y,Rd(n,y),CL(y,p,n),Vm(p)&&sD(e,n,p),c!=null&&oD(n,p,l),p}function je(n,e,t,r,i,s,o,a){let c=qe(),l=wn(),h=Xl(l.consts,s);return VL(c,l,n,e,t,r,i,h,o,a),je}var UL=jL;function jL(n,e,t,r){return zm(!0),e[mt].createComment("")}var tc=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(tc||{}),BL=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),mT=class n{constructor(){this.ngZone=B(de),this.scheduler=B(Co),this.errorHandler=B(Cr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[tc.EarlyRead,tc.Write,tc.MixedReadWrite,tc.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}};function xd(n,e,t,r){let i=qe(),s=jm();if(Pd(i,s,e)){let o=wn(),a=Hm();PF(a,i,n,e,t,r)}return xd}function CD(n,e,t,r){return Pd(n,jm(),t)?e+gd(t)+r:ss}function Ll(n,e){return n<<17|e<<2}function is(n){return n>>17&32767}function $L(n){return(n&2)==2}function HL(n,e){return n&131071|e<<17}function Em(n){return n|2}function So(n){return(n&131068)>>2}function Ug(n,e){return n&-131069|e<<2}function qL(n){return(n&1)===1}function Im(n){return n|1}function zL(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=is(o),c=So(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||dc(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=is(n[a+1]);n[r+1]=Ll(m,a),m!==0&&(n[m+1]=Ug(n[m+1],r)),n[a+1]=HL(n[a+1],r)}else n[r+1]=Ll(a,0),a!==0&&(n[a+1]=Ug(n[a+1],r)),a=r;else n[r+1]=Ll(c,0),a===0?a=r:n[c+1]=Ug(n[c+1],r),c=r;l&&(n[r+1]=Em(n[r+1])),yT(n,h,r,!0),yT(n,h,r,!1),GL(e,h,n,r,s),o=Ll(a,c),s?e.classBindings=o:e.styleBindings=o}function GL(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&dc(s,e)>=0&&(t[r+1]=Im(t[r+1]))}function yT(n,e,t,r){let i=n[t+1],s=e===null,o=r?is(i):So(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];WL(c,e)&&(a=!0,n[o+1]=r?Im(l):Em(l)),o=r?is(l):So(l)}a&&(n[t+1]=r?Em(i):Im(i))}function WL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?dc(n,e)>=0:!1}function se(n,e,t){let r=qe(),i=jm();if(Pd(r,i,e)){let s=wn(),o=Hm();cD(s,o,r,n,e,r[mt],t,!1)}return se}function vT(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";oy(n,t,s[o],o,r)}function Od(n,e){return KL(n,e,null,!0),Od}function KL(n,e,t,r){let i=qe(),s=wn(),o=t1(2);if(s.firstUpdatePass&&YL(s,n,o,r),e!==ss&&Pd(i,o,e)){let a=s.data[Ro()];tV(s,a,i,i[mt],n,i[o+1]=nV(e,t),r,o)}}function QL(n,e){return e>=n.expandoStartIndex}function YL(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ro()],o=QL(n,t);rV(s,r)&&e===null&&!o&&(e=!1),e=ZL(i,s,e,r),zL(i,s,e,t,o,r)}}function ZL(n,e,t,r){let i=s1(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=jg(null,n,e,t,r),t=uc(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=jg(i,n,e,t,r),s===null){let c=JL(n,e,r);c!==void 0&&Array.isArray(c)&&(c=jg(null,n,e,c[1],r),c=uc(c,e.attrs,r),XL(n,e,r,c))}else s=eV(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function JL(n,e,t){let r=t?e.classBindings:e.styleBindings;if(So(r)!==0)return n[is(r)]}function XL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[is(i)]=r}function eV(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=uc(r,o,t)}return uc(r,e.attrs,t)}function jg(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=uc(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function uc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ok(n,o,t?!0:e[++s]))}return n===void 0?null:n}function tV(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=qL(l)?_T(c,e,t,i,So(l),o):void 0;if(!dd(h)){dd(s)||$L(l)&&(s=_T(c,null,t,i,a,o));let p=rC(Ro(),t);lF(r,o,p,i,s)}}function _T(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===ss&&(m=p?gn:void 0);let y=p?Ng(m,r):h===r?m:void 0;if(l&&!dd(y)&&(y=Ng(c,r)),dd(y)&&(a=y,o))return a;let I=n[i+1];i=o?is(I):So(I)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Ng(c,r))}return a}function dd(n){return n!==void 0}function nV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Lt(Td(n)))),n}function rV(n,e){return(n.flags&(e?8:16))!==0}function iV(n,e,t,r,i,s){let o=e.consts,a=Xl(o,i),c=Ad(e,n,2,r,a);return uD(e,t,c,Xl(o,s)),c.attrs!==null&&ym(c,c.attrs,!1),c.mergedAttrs!==null&&ym(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function L(n,e,t,r){let i=qe(),s=wn(),o=Tr+n,a=i[mt],c=s.firstCreatePass?iV(o,s,i,e,t,r):s.data[o],l=sV(s,i,c,a,e,n);i[o]=l;let h=Vm(c);return hc(c,!0),XC(a,l,c),!FL(c)&&qm()&&ry(s,i,l,c),zk()===0&&ns(l,i),Gk(),h&&(sD(s,i,c),iD(s,c,i)),r!==null&&oD(i,c),L}function j(){let n=Zt();dC()?Jk():(n=n.parent,hc(n,!1));let e=n;Qk(e)&&Yk(),Wk();let t=wn();return t.firstCreatePass&&(Gm(t,n),JT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&h1(e)&&vT(t,e,qe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&f1(e)&&vT(t,e,qe(),e.stylesWithoutHost,!1),j}function Xe(n,e,t,r){return L(n,e,t,r),j(),Xe}var sV=(n,e,t,r,i,s)=>(zm(!0),zC(r,i,c1()));function yt(){return qe()}var hd="en-US";var oV=hd;function aV(n){typeof n=="string"&&(oV=n.toLowerCase().replace(/_/g,"-"))}var cV=(n,e,t)=>{};function Ee(n,e,t,r){let i=qe(),s=wn(),o=Zt();return lV(s,i,i[mt],o,n,e,r),Ee}function uV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Ql],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function lV(n,e,t,r,i,s,o){let a=Vm(r),l=n.firstCreatePass&&LF(n),h=e[On],p=FF(e),m=!0;if(r.type&3||o){let A=_n(r,e),R=o?o(A):A,P=p.length,V=o?$=>o(Xn($[r.index])):r.index,U=null;if(!o&&a&&(U=uV(n,e,i,r.index)),U!==null){let $=U.__ngLastListenerFn__||U;$.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,m=!1}else{s=ET(r,e,h,s),cV(A,i,s);let $=t.listen(R,i,s);p.push(s,$),l&&l.push(i,V,P,P+1)}}else s=ET(r,e,h,s);let y=r.outputs,I;if(m&&y!==null&&(I=y[i])){let A=I.length;if(A)for(let R=0;R<A;R+=2){let P=I[R],V=I[R+1],Ce=e[P][V].subscribe(s),K=p.length;p.push(s,Ce),l&&l.push(i,r.index,K,-(K+1))}}}function wT(n,e,t,r){let i=Re(null);try{return Kn(6,e,t),t(r)!==!1}catch(s){return pD(n,s),!1}finally{Kn(7,e,t),Re(i)}}function ET(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?wi(n.index,e):e;cy(o,5);let a=wT(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=wT(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function pe(n=1){return a1(n)}function ly(n,e,t){return DD(n,"",e,"",t),ly}function DD(n,e,t,r,i){let s=qe(),o=CD(s,e,t,r);if(o!==ss){let a=wn(),c=Hm();cD(a,c,s,n,o,s[mt],i,!1)}return DD}function SD(n){let e=Xk();return Bk(e,Tr+n)}function ne(n,e=""){let t=qe(),r=wn(),i=n+Tr,s=r.firstCreatePass?Ad(r,i,1,e,null):r.data[i],o=dV(r,t,s,e,n);t[i]=o,qm()&&ry(r,t,o,s),hc(s,!1)}var dV=(n,e,t,r,i)=>(zm(!0),W1(e[mt],r));function Xt(n){return xo("",n,""),Xt}function xo(n,e,t){let r=qe(),i=CD(r,n,e,t);return i!==ss&&VF(r,Ro(),i),xo}function hV(n,e,t){let r=wn();if(r.firstCreatePass){let i=mi(n);bm(t,r.data,r.blueprint,i,!0),bm(e,r.data,r.blueprint,i,!1)}}function bm(n,e,t,r,i){if(n=Ft(n),Array.isArray(n))for(let s=0;s<n.length;s++)bm(n[s],e,t,r,i);else{let s=wn(),o=qe(),a=Zt(),c=wo(n)?n:Ft(n.provide),l=QT(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(wo(n)||!n.multi){let y=new ts(l,i,Z),I=$g(c,e,i?h:h+m,p);I===-1?(nm(nd(a,o),s,c),Bg(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[I]=y,o[I]=y)}else{let y=$g(c,e,h+m,p),I=$g(c,e,h,h+m),A=y>=0&&t[y],R=I>=0&&t[I];if(i&&!R||!i&&!A){nm(nd(a,o),s,c);let P=gV(i?pV:fV,t.length,i,r,l);!i&&R&&(t[I].providerFactory=P),Bg(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else{let P=AD(t[i?I:y],l,!i&&r);Bg(s,n,y>-1?y:I,P)}!i&&r&&R&&t[I].componentProviders++}}}function Bg(n,e,t,r){let i=wo(e),s=Sk(e);if(i||s){let c=(s?Ft(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function AD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function $g(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function fV(n,e,t,r){return Tm(this.multi,[])}function pV(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=To(t,t[we],this.providerFactory.index,r);s=a.slice(0,o),Tm(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Tm(i,s);return s}function Tm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function gV(n,e,t,r,i){let s=new ts(n,t,Z);return s.multi=[],s.index=e,s.componentProviders=0,AD(s,i,r&&!t),s}function kr(n,e=[]){return t=>{t.providersResolver=(r,i)=>hV(r,i?i(n):n,e)}}var mV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=GT(!1,t.type),i=r.length>0?uy([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(X(vn))})}}return n})();function En(n){Po("NgStandalone"),n.getStandaloneInjector=e=>e.get(mV).getOrCreateStandaloneInjector(n)}var Sr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},RD=new Sr("18.2.10");var kd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var dy=new z(""),pc=new z(""),Fd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,hy||(yV(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(X(de),X(Ld),X(pc))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Ld=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return hy?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function yV(n){hy=n}var hy;function os(n){return!!n&&typeof n.then=="function"}function ND(n){return!!n&&typeof n.subscribe=="function"}var Vd=new z(""),MD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=B(Vd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(os(s))t.push(s);else if(ND(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fy=new z("");function vV(){d0(()=>{throw new x(600,!1)})}function _V(n){return n.isBoundToModule}var wV=10;function EV(n,e,t){try{let r=t();return os(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Ii=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(P1),this.afterRenderManager=B(BL),this.zonelessEnabled=B(Md),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Et,this.afterTick=new Et,this.componentTypes=[],this.components=[],this.isStable=B(No).hasPendingTasks.pipe(ye(t=>!t)),this._injector=B(vn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof cd;if(!this._injector.get(MD).done){let m=!i&&$T(t),y=!1;throw new x(405,y)}let o;i?o=t:o=this._injector.get(Do).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=_V(o)?void 0:this._injector.get(vi),c=r||o.selector,l=o.create(pt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(dy,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),$l(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new x(101,!1);let t=Re(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Re(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(yi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<wV;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)IV(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;$l(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(fy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$l(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $l(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IV(n,e,t,r){if(!t&&!wd(n))return;yD(n,e,t&&!r?0:1)}var Cm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},py=(()=>{class n{compileModuleSync(t){return new wm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=HT(t),s=qC(i.declarations).reduce((o,a)=>{let c=Zi(a);return c&&o.push(new ac(c)),o},[]);return new Cm(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bV=(()=>{class n{constructor(){this.zone=B(de),this.changeDetectionScheduler=B(Co),this.applicationRef=B(Ii)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TV=new z("",{factory:()=>!1});function PD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new de(oe(k({},OD()),{scheduleInRootZone:t})),[{provide:de,useFactory:n},{provide:_o,multi:!0,useFactory:()=>{let r=B(bV,{optional:!0});return()=>r.initialize()}},{provide:_o,multi:!0,useFactory:()=>{let r=B(CV);return()=>{r.initialize()}}},e===!0?{provide:ED,useValue:!0}:[],{provide:ID,useValue:t??MC}]}function xD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=PD({ngZoneFactory:()=>{let i=OD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Po("NgZone_CoalesceEvent"),new de(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return $t([{provide:TV,useValue:!0},{provide:Md,useValue:!1},r])}function OD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var CV=(()=>{class n{constructor(){this.subscription=new Ze,this.initialized=!1,this.zone=B(de),this.pendingTasks=B(No)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{de.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var DV=(()=>{class n{constructor(){this.appRef=B(Ii),this.taskService=B(No),this.ngZone=B(de),this.zonelessEnabled=B(Md),this.disableScheduling=B(ED,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ze,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(id):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(ID,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof am||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?rT:xC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(id+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SV(){return typeof $localize<"u"&&$localize.locale||hd}var gy=new z("",{providedIn:"root",factory:()=>B(gy,ge.Optional|ge.SkipSelf)||SV()});var Dm=new z("");function Vl(n){return!n.moduleRef}function AV(n){let e=Vl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(de);return t.run(()=>{Vl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Cr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Vl(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Dm);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Dm);o.add(s),n.moduleRef.onDestroy(()=>{$l(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return EV(r,t,()=>{let s=e.get(MD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(gy,hd);if(aV(o||hd),Vl(n)){let a=e.get(Ii);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return RV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function RV(n,e){let t=n.injector.get(Ii);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new x(-403,!1);e.push(n)}var Hl=null;function NV(n=[],e){return pt.create({name:e,providers:[{provide:yd,useValue:"platform"},{provide:Dm,useValue:new Set([()=>Hl=null])},...n]})}function MV(n=[]){if(Hl)return Hl;let e=NV(n);return Hl=e,vV(),PV(e),e}function PV(n){n.get(Ym,null)?.forEach(t=>t())}var Oo=(()=>{class n{static{this.__NG_ELEMENT_ID__=xV}}return n})();function xV(n){return OV(Zt(),qe(),(n&16)===16)}function OV(n,e,t){if(_d(n)&&!t){let r=wi(n.index,e);return new rs(r,r)}else if(n.type&175){let r=e[Jn];return new rs(r,e)}return null}var Sm=class{constructor(){}supports(e){return TD(e)}create(e){return new Am(e)}},kV=(n,e)=>e,Am=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<IT(r,i,s)?t:r,a=IT(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,I=y+m;h<=I&&I<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!TD(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,OL(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Rm(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new fd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new fd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Nm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},fd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Nm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function IT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function bT(){return new my([new Sm])}var my=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:bT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||bT()),deps:[[n,new OT,new We]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new x(901,!1)}}return n})();var kD=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(X(Ii))}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Kt({})}}return n})();function FD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=MV(r),s=[PD({}),{provide:Co,useExisting:DV},...t||[]],o=new ld({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return AV({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Ud(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function gc(n,e){Po("NgSignals");let t=c0(n);return e?.equal&&(t[oi].equal=e.equal),t}function Fr(n){let e=Re(null);try{return n()}finally{Re(e)}}var BD=null;function tr(){return BD}function $D(n){BD??=n}var jd=class{};var Ht=new z(""),HD=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>B(VV),providedIn:"platform"})}}return n})();var VV=(()=>{class n extends HD{constructor(){super(),this._doc=B(Ht),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tr().getBaseHref(this._doc)}onPopState(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function qD(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function LD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function as(n){return n&&n[0]!=="?"?"?"+n:n}var $d=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>B(zD),providedIn:"root"})}}return n})(),UV=new z(""),zD=(()=>{class n extends $d{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(Ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qD(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+as(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+as(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+as(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(HD),X(UV,8))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mc=(()=>{class n{constructor(t){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=$V(LD(VD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+as(r))}normalize(t){return n.stripTrailingSlash(BV(this._basePath,VD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+as(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+as(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=as}static{this.joinWithSlash=qD}static{this.stripTrailingSlash=LD}static{this.\u0275fac=function(r){return new(r||n)(X($d))}}static{this.\u0275prov=Q({token:n,factory:()=>jV(),providedIn:"root"})}}return n})();function jV(){return new mc(X($d))}function BV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VD(n){return n.replace(/\/index.html$/,"")}function $V(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function GD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var yy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ko=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new yy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),UD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);UD(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Z(Mo),Z(Nd),Z(my))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function UD(n,e){n.context.$implicit=e.item}var bi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){jD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){jD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Z(Mo),Z(Nd))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),vy=class{constructor(){this.$implicit=null,this.ngIf=null}};function jD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Lt(e)}'.`)}var In=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),WD="browser",HV="server";function _y(n){return n===HV}var Bd=class{};var Iy=class extends jd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},by=class n extends Iy{static makeCurrent(){$D(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=qV();return t==null?null:zV(t)}resetBaseElement(){yc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return GD(document.cookie,e)}},yc=null;function qV(){return yc=yc||document.querySelector("base"),yc?yc.getAttribute("href"):null}function zV(n){return new URL(n,document.baseURI).pathname}var Ty=class{addToWindow(e){_i.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new x(5103,!1);return s},_i.getAllAngularTestabilities=()=>e.getAllTestabilities(),_i.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=_i.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};_i.frameworkStabilizers||(_i.frameworkStabilizers=[]),_i.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?tr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},GV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Cy=new z(""),YD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(X(Cy),X(de))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),qd=class{constructor(e){this._doc=e}},wy="ng-app-id",ZD=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_y(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${wy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(wy),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(wy,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(X(Ht),X(bd),X(Jm,8),X(Ei))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sy=/%COMP%/g,JD="%COMP%",WV=`_nghost-${JD}`,KV=`_ngcontent-${JD}`,QV=!0,YV=new z("",{providedIn:"root",factory:()=>QV});function ZV(n){return KV.replace(Sy,n)}function JV(n){return WV.replace(Sy,n)}function XD(n,e){return e.map(t=>t.replace(Sy,n))}var zd=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=_y(a),this.defaultRenderer=new vc(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yn.ShadowDom&&(r=oe(k({},r),{encapsulation:Yn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Gd?i.applyToHost(t):i instanceof _c&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Yn.Emulated:s=new Gd(c,l,r,this.appId,h,o,a,p);break;case Yn.ShadowDom:return new Dy(c,l,t,r,o,a,this.nonce,p);default:s=new _c(c,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(X(YD),X(ZD),X(bd),X(YV),X(Ht),X(Ei),X(de),X(Jm))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),vc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ey[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(KD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(KD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Ey[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ey[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Dr.DashCase|Dr.Important)?e.style.setProperty(t,r,i&Dr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Dr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=tr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function KD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Dy=class extends vc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=XD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_c=class extends vc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?XD(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gd=class extends _c{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=ZV(l),this.hostAttr=JV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},XV=(()=>{class n extends qd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(X(Ht))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),QD=["alt","control","meta","shift"],eU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},nU=(()=>{class n extends qd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),QD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=eU[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),QD.forEach(o=>{if(o!==i){let a=tU[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(X(Ht))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function eS(n,e){return FD(k({rootComponent:n},rU(e)))}function rU(n){return{appProviders:[...tS,...n?.providers??[]],platformProviders:aU}}function iU(){by.makeCurrent()}function sU(){return new Cr}function oU(){return jC(document),document}var aU=[{provide:Ei,useValue:WD},{provide:Ym,useValue:iU,multi:!0},{provide:Ht,useFactory:oU,deps:[]}];var cU=new z(""),uU=[{provide:pc,useClass:Ty,deps:[]},{provide:dy,useClass:Fd,deps:[de,Ld,pc]},{provide:Fd,useClass:Fd,deps:[de,Ld,pc]}],tS=[{provide:yd,useValue:"root"},{provide:Cr,useFactory:sU,deps:[]},{provide:Cy,useClass:XV,multi:!0,deps:[Ht,de,Ei]},{provide:Cy,useClass:nU,multi:!0,deps:[Ht]},zd,ZD,YD,{provide:yi,useExisting:zd},{provide:Bd,useClass:GV,deps:[]},[]],nS=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:bd,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(X(cU,12))}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Kt({providers:[...tS,...uU],imports:[In,kD]})}}return n})();var rS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(X(Ht))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var he="primary",Fc=Symbol("RouteTitle"),Py=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bo(n){return new Py(n)}function fU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nr(n[t],e[t]))return!1;return!0}function nr(n,e){let t=n?xy(n):void 0,r=e?xy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!dS(n[i],e[i]))return!1;return!0}function xy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function hS(n){return n.length>0?n[n.length-1]:null}function Ti(n){return Ig(n)?n:os(n)?it(Promise.resolve(n)):ue(n)}var gU={exact:pS,subset:gS},fS={exact:mU,subset:yU,ignored:()=>!0};function iS(n,e,t){return gU[t.paths](n.root,e.root,t.matrixParams)&&fS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function mU(n,e){return nr(n,e)}function pS(n,e,t){if(!us(n.segments,e.segments)||!Qd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!pS(n.children[r],e.children[r],t))return!1;return!0}function yU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dS(n[t],e[t]))}function gS(n,e,t){return mS(n,e,e.segments,t)}function mS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!us(i,t)||e.hasChildren()||!Qd(i,t,r))}else if(n.segments.length===t.length){if(!us(n.segments,t)||!Qd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!gS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!us(n.segments,i)||!Qd(n.segments,i,r)||!n.children[he]?!1:mS(n.children[he],e,s,r)}}function Qd(n,e,t){return e.every((r,i)=>fS[t](n[i].parameters,r.parameters))}var Vr=class{constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){return wU.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yd(this)}},cs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bo(this.parameters),this._parameterMap}toString(){return vS(this)}};function vU(n,e){return us(n,e)&&n.every((t,r)=>nr(t.parameters,e[r].parameters))}function us(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _U(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var sv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new Dc,providedIn:"root"})}}return n})(),Dc=class{parse(e){let t=new ky(e);return new Vr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wc(e.root,!0)}`,r=bU(e.queryParams),i=typeof e.fragment=="string"?`#${EU(e.fragment)}`:"";return`${t}${r}${i}`}},wU=new Dc;function Yd(n){return n.segments.map(e=>vS(e)).join("/")}function wc(n,e){if(!n.hasChildren())return Yd(n);if(e){let t=n.children[he]?wc(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==he&&r.push(`${i}:${wc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_U(n,(r,i)=>i===he?[wc(n.children[he],!1)]:[`${i}:${wc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${Yd(n)}/${t[0]}`:`${Yd(n)}/(${t.join("//")})`}}function yS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wd(n){return yS(n).replace(/%3B/gi,";")}function EU(n){return encodeURI(n)}function Oy(n){return yS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zd(n){return decodeURIComponent(n)}function sS(n){return Zd(n.replace(/\+/g,"%20"))}function vS(n){return`${Oy(n.path)}${IU(n.parameters)}`}function IU(n){return Object.entries(n).map(([e,t])=>`;${Oy(e)}=${Oy(t)}`).join("")}function bU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Wd(t)}=${Wd(i)}`).join("&"):`${Wd(t)}=${Wd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var TU=/^[^\/()?;#]+/;function Ay(n){let e=n.match(TU);return e?e[0]:""}var CU=/^[^\/()?;=#]+/;function DU(n){let e=n.match(CU);return e?e[0]:""}var SU=/^[^=?&#]+/;function AU(n){let e=n.match(SU);return e?e[0]:""}var RU=/^[^&#]+/;function NU(n){let e=n.match(RU);return e?e[0]:""}var ky=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new xe(e,t)),r}parseSegment(){let e=Ay(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new cs(Zd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=DU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ay(this.remaining);i&&(r=i,this.capture(r))}e[Zd(t)]=Zd(r)}parseQueryParam(e){let t=AU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=NU(this.remaining);o&&(r=o,this.capture(r))}let i=sS(t),s=sS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ay(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new x(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=he);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[he]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}};function _S(n){return n.segments.length>0?new xe([],{[he]:n}):n}function wS(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=wS(i);if(r===he&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new xe(n.segments,e);return MU(t)}function MU(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new xe(n.segments.concat(e.segments),e.children)}return n}function Sc(n){return n instanceof Vr}function PU(n,e,t=null,r=null){let i=ES(n);return IS(i,e,t,r)}function ES(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new xe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=_S(r);return e??i}function IS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ry(i,i,i,t,r);let s=xU(e);if(s.toRoot())return Ry(i,i,new xe([],{}),t,r);let o=OU(s,i,n),a=o.processChildren?bc(o.segmentGroup,o.index,s.commands):TS(o.segmentGroup,o.index,s.commands);return Ry(i,o.segmentGroup,a,t,r)}function Jd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ac(n){return typeof n=="object"&&n!=null&&n.outlets}function Ry(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=bS(n,e,t);let a=_S(wS(o));return new Vr(a,s,i)}function bS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=bS(s,e,t)}),new xe(n.segments,r)}var Xd=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jd(r[0]))throw new x(4003,!1);let i=r.find(Ac);if(i&&i!==hS(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Xd(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Xd(t,e,r)}var Vo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function OU(n,e,t){if(n.isAbsolute)return new Vo(e,!0,0);if(!t)return new Vo(e,!1,NaN);if(t.parent===null)return new Vo(t,!0,0);let r=Jd(n.commands[0])?0:1,i=t.segments.length-1+r;return kU(t,i,n.numberOfDoubleDots)}function kU(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new Vo(r,!1,i-s)}function FU(n){return Ac(n[0])?n[0].outlets:{[he]:n}}function TS(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return bc(n,e,t);let r=LU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new xe(n.segments.slice(0,r.pathIndex),{});return s.children[he]=new xe(n.segments.slice(r.pathIndex),n.children),bc(s,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?Fy(n,e,t):r.match?bc(n,0,i):Fy(n,e,t)}function bc(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=FU(t),i={};if(Object.keys(r).some(s=>s!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let s=bc(n.children[he],e,t);return new xe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=TS(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new xe(n.segments,i)}}function LU(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Ac(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!aS(c,l,o))return s;r+=2}else{if(!aS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ac(s)){let c=VU(s.outlets);return new xe(r,c)}if(i===0&&Jd(t[0])){let c=n.segments[e];r.push(new cs(c.path,oS(t[0]))),i++;continue}let o=Ac(s)?s.outlets[he]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Jd(a)?(r.push(new cs(o,oS(a))),i+=2):(r.push(new cs(o,{})),i++)}return new xe(r,{})}function VU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Fy(new xe([],{}),0,r))}),e}function oS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function aS(n,e,t){return n==t.path&&nr(e,t.parameters)}var Tc="imperative",bt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(bt||{}),bn=class{constructor(e,t){this.id=e,this.url=t}},Rc=class extends bn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=bt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ls=class extends bn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(nn||{}),Ly=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ly||{}),Lr=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ds=class extends bn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=bt.NavigationSkipped}},Nc=class extends bn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},eh=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class extends bn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jy=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},By=class extends bn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hy=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qy=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zy=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gy=class{constructor(e){this.snapshot=e,this.type=bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wy=class{constructor(e){this.snapshot=e,this.type=bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Mc=class{},$o=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function UU(n,e){return n.providers&&!n._injector&&(n._injector=uy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Fn(n){return n.outlet||he}function jU(n,e){let t=n.filter(r=>Fn(r)===e);return t.push(...n.filter(r=>Fn(r)!==e)),t}function Lc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ky=class{get injector(){return Lc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ah(this.rootInjector),this.attachRef=null}},ah=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ky(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(X(vn))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),th=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Qy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Yy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yy(e,this._root).map(t=>t.value)}};function Qy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Qy(n,t);if(r)return r}return null}function Yy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Yy(n,t);if(r.length)return r.unshift(e),r}return[]}var tn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Lo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var nh=class extends th{constructor(e,t){super(e),this.snapshot=t,ov(this,e)}toString(){return this.snapshot.toString()}};function CS(n){let e=BU(n),t=new It([new cs("",{})]),r=new It({}),i=new It({}),s=new It({}),o=new It(""),a=new Ho(t,r,s,o,i,he,n,e.root);return a.snapshot=e.root,new nh(new tn(a,[]),e)}function BU(n){let e={},t={},r={},i="",s=new Uo([],e,r,i,t,he,n,null,{});return new ih("",new tn(s,[]))}var Ho=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ye(l=>l[Fc]))??ue(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>Bo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>Bo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),n.params),data:k(k({},e.data),n.data),resolve:k(k(k(k({},n.data),e.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&SS(i)&&(r.resolve[Fc]=i.title),r}var Uo=class{get title(){return this.data?.[Fc]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ih=class extends th{constructor(e,t){super(t),this.url=e,ov(this,t)}toString(){return DS(this._root)}};function ov(n,e){e.value._routerState=n,e.children.forEach(t=>ov(n,t))}function DS(n){let e=n.children.length>0?` { ${n.children.map(DS).join(", ")} } `:"";return`${n.value}${e}`}function Ny(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),nr(e.params,t.params)||n.paramsSubject.next(t.params),pU(e.url,t.url)||n.urlSubject.next(t.url),nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zy(n,e){let t=nr(n.params,e.params)&&vU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Zy(n.parent,e.parent))}function SS(n){return typeof n.title=="string"||n.title===null}var av=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=B(ah),this.location=B(Mo),this.changeDetector=B(Oo),this.inputBinder=B(cv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Jy(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Je({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mr]})}}return n})(),Jy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ho?this.route:e===ah?this.childContexts:this.parent.get(e,t)}},cv=new z("");function $U(n,e,t){let r=Pc(n,e._root,t?t._root:void 0);return new nh(r,e)}function Pc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=HU(n,e,t);return new tn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Pc(n,a)),o}}let r=qU(e.value),i=e.children.map(s=>Pc(n,s));return new tn(r,i)}}function HU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Pc(n,r,i);return Pc(n,r)})}function qU(n){return new Ho(new It(n.url),new It(n.params),new It(n.queryParams),new It(n.fragment),new It(n.data),n.outlet,n.component,n)}var xc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},AS="ngNavigationCancelingError";function sh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Sc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=RS(!1,nn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function RS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[AS]=!0,t.cancellationCode=e,t}function zU(n){return NS(n)&&Sc(n.url)}function NS(n){return!!n&&n[AS]}var GU=(n,e,t,r)=>ye(i=>(new Xy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Xy=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ny(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Lo(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Lo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Lo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Lo(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Wy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Ny(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ny(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},oh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jo=class{constructor(e,t){this.component=e,this.route=t}};function WU(n,e,t){let r=n._root,i=e?e._root:null;return Ec(r,i,t,[r.value])}function KU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function zo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ST(n)?n:e.get(n):r}function Ec(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Lo(e);return n.children.forEach(o=>{QU(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Cc(a,t.getContext(o),i)),i}function QU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=YU(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new oh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ec(n,e,a?a.children:null,r,i):Ec(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jo(a.outlet.component,o))}else o&&Cc(e,a,i),i.canActivateChecks.push(new oh(r)),s.component?Ec(n,null,a?a.children:null,r,i):Ec(n,null,t,r,i);return i}function YU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!us(n.url,e.url);case"pathParamsOrQueryParamsChange":return!us(n.url,e.url)||!nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zy(n,e)||!nr(n.queryParams,e.queryParams);case"paramsChange":default:return!Zy(n,e)}}function Cc(n,e,t){let r=Lo(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Cc(o,e.children.getContext(s),t):Cc(o,null,t):Cc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new jo(e.outlet.component,i)):t.canDeactivateChecks.push(new jo(null,i)):t.canDeactivateChecks.push(new jo(null,i))}function Vc(n){return typeof n=="function"}function ZU(n){return typeof n=="boolean"}function JU(n){return n&&Vc(n.canLoad)}function XU(n){return n&&Vc(n.canActivate)}function e2(n){return n&&Vc(n.canActivateChild)}function t2(n){return n&&Vc(n.canDeactivate)}function n2(n){return n&&Vc(n.canMatch)}function MS(n){return n instanceof Ir||n?.name==="EmptyError"}var Kd=Symbol("INITIAL_VALUE");function qo(){return Mn(n=>Pl(n.map(e=>e.pipe(br(1),Ag(Kd)))).pipe(ye(e=>{for(let t of e)if(t!==!0){if(t===Kd)return Kd;if(t===!1||r2(t))return t}return!0}),Nn(e=>e!==Kd),br(1)))}function r2(n){return Sc(n)||n instanceof xc}function i2(n,e){return ht(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ue(oe(k({},t),{guardsResult:!0})):s2(o,r,i,n).pipe(ht(a=>a&&ZU(a)?o2(r,s,n,e):ue(a)),ye(a=>oe(k({},t),{guardsResult:a})))})}function s2(n,e,t,r){return it(n).pipe(ht(i=>d2(i.component,i.route,t,e,r)),Wn(i=>i!==!0,!0))}function o2(n,e,t,r){return it(e).pipe(uo(i=>co(c2(i.route.parent,r),a2(i.route,r),l2(n,i.path,t),u2(n,i.route,t))),Wn(i=>i!==!0,!0))}function a2(n,e){return n!==null&&e&&e(new Gy(n)),ue(!0)}function c2(n,e){return n!==null&&e&&e(new qy(n)),ue(!0)}function u2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ue(!0);let i=r.map(s=>xl(()=>{let o=Lc(e)??t,a=zo(s,o),c=XU(a)?a.canActivate(e,n):Ar(o,()=>a(e,n));return Ti(c).pipe(Wn())}));return ue(i).pipe(qo())}function l2(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>KU(o)).filter(o=>o!==null).map(o=>xl(()=>{let a=o.guards.map(c=>{let l=Lc(o.node)??t,h=zo(c,l),p=e2(h)?h.canActivateChild(r,n):Ar(l,()=>h(r,n));return Ti(p).pipe(Wn())});return ue(a).pipe(qo())}));return ue(s).pipe(qo())}function d2(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ue(!0);let o=s.map(a=>{let c=Lc(e)??i,l=zo(a,c),h=t2(l)?l.canDeactivate(n,e,t,r):Ar(c,()=>l(n,e,t,r));return Ti(h).pipe(Wn())});return ue(o).pipe(qo())}function h2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ue(!0);let s=i.map(o=>{let a=zo(o,n),c=JU(a)?a.canLoad(e,t):Ar(n,()=>a(e,t));return Ti(c)});return ue(s).pipe(qo(),PS(r))}function PS(n){return pg(ft(e=>{if(typeof e!="boolean")throw sh(n,e)}),ye(e=>e===!0))}function f2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ue(!0);let s=i.map(o=>{let a=zo(o,n),c=n2(a)?a.canMatch(e,t):Ar(n,()=>a(e,t));return Ti(c)});return ue(s).pipe(qo(),PS(r))}var Oc=class{constructor(e){this.segmentGroup=e||null}},kc=class extends Error{constructor(e){super(),this.urlTree=e}};function Fo(n){return ao(new Oc(n))}function p2(n){return ao(new x(4e3,!1))}function g2(n){return ao(RS(!1,nn.GuardRejected))}var ev=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ue(r);if(i.numberOfChildren>1||!i.children[he])return p2(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:I,title:A}=i,R=Ar(s,()=>a({params:y,data:I,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(R instanceof Vr)throw new kc(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new kc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Vr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new xe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},tv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m2(n,e,t,r,i){let s=xS(n,e,t);return s.matched?(r=UU(e,r),f2(r,e,t,i).pipe(ye(o=>o===!0?s:k({},tv)))):ue(s)}function xS(n,e,t){if(e.path==="**")return y2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?k({},tv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||fU)(t,n,e);if(!i)return k({},tv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?k(k({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function y2(n){return{matched:!0,parameters:n.length>0?hS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function cS(n,e,t,r){return t.length>0&&w2(n,t,r)?{segmentGroup:new xe(e,_2(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&E2(n,t,r)?{segmentGroup:new xe(n.segments,v2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function v2(n,e,t,r){let i={};for(let s of t)if(ch(n,e,s)&&!r[Fn(s)]){let o=new xe([],{});i[Fn(s)]=o}return k(k({},r),i)}function _2(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&Fn(r)!==he){let i=new xe([],{});t[Fn(r)]=i}return t}function w2(n,e,t){return t.some(r=>ch(n,e,r)&&Fn(r)!==he)}function E2(n,e,t){return t.some(r=>ch(n,e,r))}function ch(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function I2(n,e,t){return e.length===0&&!n.children[t]}var nv=class{};function b2(n,e,t,r,i,s,o="emptyOnly"){return new rv(n,e,t,r,i,o,s).recognize()}var T2=31,rv=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new ev(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new x(4002,`'${e.segmentGroup}'`)}recognize(){let e=cS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ye(({children:t,rootSnapshot:r})=>{let i=new tn(r,t),s=new ih("",i),o=PU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Uo([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(ye(r=>({children:r,rootSnapshot:t})),li(r=>{if(r instanceof kc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Oc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ye(o=>o instanceof tn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return it(s).pipe(uo(o=>{let a=r.children[o],c=jU(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Sg((o,a)=>(o.push(...a),o)),di(null),Dg(),ht(o=>{if(o===null)return Fo(r);let a=OS(o);return C2(a),ue(a)}))}processSegment(e,t,r,i,s,o,a){return it(t).pipe(uo(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(li(l=>{if(l instanceof Oc)return ue(null);throw l}))),Wn(c=>!!c),li(c=>{if(MS(c))return I2(r,i,s)?ue(new nv):Fo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Fn(r)!==o&&(o===he||!ch(i,s,r))?Fo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Fo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=xS(t,i,s);if(!c)return Fo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>T2&&(this.allowRedirects=!1));let y=new Uo(s,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,uS(i),Fn(i),i.component??i._loadedComponent??null,i,lS(i)),I=rh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(I.params),y.data=Object.freeze(I.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(ht(R=>this.processSegment(e,r,t,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=m2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Mn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Mn(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,I=new Uo(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,uS(r),Fn(r),r.component??r._loadedComponent??null,r,lS(r)),A=rh(I,o,this.paramsInheritanceStrategy);I.params=Object.freeze(A.params),I.data=Object.freeze(A.data);let{segmentGroup:R,slicedSegments:P}=cS(t,m,y,l);if(P.length===0&&R.hasChildren())return this.processChildren(h,l,R,I).pipe(ye(U=>new tn(I,U)));if(l.length===0&&P.length===0)return ue(new tn(I,[]));let V=Fn(r)===s;return this.processSegment(h,l,R,P,V?he:s,!0,I).pipe(ye(U=>new tn(I,U instanceof tn?[U]:[])))}))):Fo(t)))}getChildConfig(e,t,r){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):h2(e,t,r,this.urlSerializer).pipe(ht(i=>i?this.configLoader.loadChildren(e,t).pipe(ft(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):g2(t))):ue({routes:[],injector:e})}};function C2(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function D2(n){let e=n.value.routeConfig;return e&&e.path===""}function OS(n){let e=[],t=new Set;for(let r of n){if(!D2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=OS(r.children);e.push(new tn(r.value,i))}return e.filter(r=>!t.has(r))}function uS(n){return n.data||{}}function lS(n){return n.resolve||{}}function S2(n,e,t,r,i,s){return ht(o=>b2(n,e,t,r,o.extractedUrl,i,s).pipe(ye(({state:a,tree:c})=>oe(k({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function A2(n,e){return ht(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ue(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of kS(c))o.add(l);let a=0;return it(o).pipe(uo(c=>s.has(c)?R2(c,r,n,e):(c.data=rh(c,c.parent,n).resolve,ue(void 0))),ft(()=>a++),lo(1),ht(c=>a===o.size?ue(t):Wt))})}function kS(n){let e=n.children.map(t=>kS(t)).flat();return[n,...e]}function R2(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!SS(i)&&(s[Fc]=i.title),N2(s,n,e,r).pipe(ye(o=>(n._resolvedData=o,n.data=rh(n,n.parent,t).resolve,null)))}function N2(n,e,t,r){let i=xy(n);if(i.length===0)return ue({});let s={};return it(i).pipe(ht(o=>M2(n[o],e,t,r).pipe(Wn(),ft(a=>{if(a instanceof xc)throw sh(new Dc,a);s[o]=a}))),lo(1),Cg(s),li(o=>MS(o)?Wt:ao(o)))}function M2(n,e,t,r){let i=Lc(e)??r,s=zo(n,i),o=s.resolve?s.resolve(e,t):Ar(i,()=>s(e,t));return Ti(o)}function My(n){return Mn(e=>{let t=n(e);return t?it(t).pipe(ye(()=>e)):ue(e)})}var FS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[Fc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>B(P2),providedIn:"root"})}}return n})(),P2=(()=>{class n extends FS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(X(rS))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uv=new z("",{providedIn:"root",factory:()=>({})}),x2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Qt({type:n,selectors:[["ng-component"]],standalone:!0,features:[En],decls:1,vars:0,template:function(r,i){r&1&&Xe(0,"router-outlet")},dependencies:[av],encapsulation:2})}}return n})();function lv(n){let e=n.children&&n.children.map(lv),t=e?oe(k({},n),{children:e}):k({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=x2),t}var dv=new z(""),O2=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(py)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ti(t.loadComponent()).pipe(ye(LS),ft(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Xa(()=>{this.componentLoaders.delete(t)})),i=new ro(r,()=>new Et).pipe(no());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=k2(r,this.compiler,t,this.onLoadEndListener).pipe(Xa(()=>{this.childrenLoaders.delete(r)})),o=new ro(s,()=>new Et).pipe(no());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k2(n,e,t,r){return Ti(n.loadChildren()).pipe(ye(LS),ht(i=>i instanceof cc||Array.isArray(i)?ue(i):it(e.compileModuleAsync(i))),ye(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(dv,[],{optional:!0,self:!0}).flat()),{routes:o.map(lv),injector:s}}))}function F2(n){return n&&typeof n=="object"&&"default"in n}function LS(n){return F2(n)?n.default:n}var hv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>B(L2),providedIn:"root"})}}return n})(),L2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),V2=new z("");var U2=new z(""),j2=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Et,this.transitionAbortSubject=new Et,this.configLoader=B(O2),this.environmentInjector=B(vn),this.urlSerializer=B(sv),this.rootContexts=B(ah),this.location=B(mc),this.inputBindingEnabled=B(cv,{optional:!0})!==null,this.titleStrategy=B(FS),this.options=B(uv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(hv),this.createViewTransition=B(V2,{optional:!0}),this.navigationErrorHandler=B(U2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let t=i=>this.events.next(new $y(i)),r=i=>this.events.next(new Hy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(oe(k(k({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new It({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Tc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Nn(s=>s.id!==0),ye(s=>oe(k({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Mn(s=>{let o=!1,a=!1;return ue(s).pipe(Mn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",nn.SupersededByNewNavigation),Wt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?oe(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ds(c.id,this.urlSerializer.serialize(c.rawUrl),p,Ly.IgnoredSameUrlNavigation)),c.resolve(!1),Wt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ue(c).pipe(Mn(p=>{let m=this.transitions?.getValue();return this.events.next(new Rc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Wt:Promise.resolve(p)}),S2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ft(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=oe(k({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new eh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:I,extras:A}=c,R=new Rc(p,this.urlSerializer.serialize(m),y,I);this.events.next(R);let P=CS(this.rootComponentType).snapshot;return this.currentTransition=s=oe(k({},c),{targetSnapshot:P,urlAfterRedirects:m,extras:oe(k({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ue(s)}else{let p="";return this.events.next(new ds(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Ly.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Wt}}),ft(c=>{let l=new Vy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ye(c=>(this.currentTransition=s=oe(k({},c),{guards:WU(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),i2(this.environmentInjector,c=>this.events.next(c)),ft(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw sh(this.urlSerializer,c.guardsResult);let l=new Uy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Nn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",nn.GuardRejected),!1)),My(c=>{if(c.guards.canActivateChecks.length)return ue(c).pipe(ft(l=>{let h=new jy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Mn(l=>{let h=!1;return ue(l).pipe(A2(this.paramsInheritanceStrategy,this.environmentInjector),ft({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",nn.NoDataFromResolver)}}))}),ft(l=>{let h=new By(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),My(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(ft(m=>{h.component=m}),ye(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Pl(l(c.targetSnapshot.root)).pipe(di(null),br(1))}),My(()=>this.afterPreactivation()),Mn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?it(h).pipe(ye(()=>s)):ue(s)}),ye(c=>{let l=$U(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=oe(k({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),ft(()=>{this.events.next(new Mc)}),GU(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),br(1),ft({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ls(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Rg(this.transitionAbortSubject.pipe(ft(c=>{throw c}))),Xa(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",nn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),li(c=>{if(a=!0,NS(c))this.events.next(new Lr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),zU(c)?this.events.next(new $o(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Nc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=Ar(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof xc){let{message:p,cancellationCode:m}=sh(this.urlSerializer,h);this.events.next(new Lr(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new $o(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Wt}))}))}cancelNavigationTransition(t,r,i){let s=new Lr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B2(n){return n!==Tc}var $2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>B(H2),providedIn:"root"})}}return n})(),iv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},H2=(()=>{class n extends iv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>B(q2),providedIn:"root"})}}return n})(),q2=(()=>{class n extends VS{constructor(){super(...arguments),this.location=B(mc),this.urlSerializer=B(sv),this.options=B(uv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(hv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=CS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Rc)this.stateMemento=this.createStateMemento();else if(t instanceof ds)this.rawUrlTree=r.initialUrl;else if(t instanceof eh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Mc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Lr&&(t.code===nn.GuardRejected||t.code===nn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Nc?this.restoreHistory(r,!0):t instanceof ls&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Vr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=k(k({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=k(k({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ic=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ic||{});function z2(n,e){n.events.pipe(Nn(t=>t instanceof ls||t instanceof Lr||t instanceof Nc||t instanceof ds),ye(t=>t instanceof ls||t instanceof ds?Ic.COMPLETE:(t instanceof Lr?t.code===nn.Redirect||t.code===nn.SupersededByNewNavigation:!1)?Ic.REDIRECTING:Ic.FAILED),Nn(t=>t!==Ic.REDIRECTING),br(1)).subscribe(()=>{e()})}function G2(n){throw n}var W2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},K2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(kd),this.stateManager=B(VS),this.options=B(uv,{optional:!0})||{},this.pendingTasks=B(No),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(j2),this.urlSerializer=B(sv),this.location=B(mc),this.urlHandlingStrategy=B(hv),this._events=new Et,this.errorHandler=this.options.errorHandler||G2,this.navigated=!1,this.routeReuseStrategy=B($2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(dv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(cv,{optional:!0}),this.eventsSubscription=new Ze,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Lr&&r.code!==nn.Redirect&&r.code!==nn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ls)this.navigated=!0;else if(r instanceof $o){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||B2(i.source)},o);this.scheduleNavigation(a,Tc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Y2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Tc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=k({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(lv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=ES(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return IS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Sc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Tc,null,r)}navigate(t,r={skipLocationChange:!1}){return Q2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=k({},W2):r===!1?i=k({},K2):i=r,Sc(t))return iS(this.currentUrlTree,t,i);let s=this.parseUrl(t);return iS(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return z2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new x(4008,!1)}function Y2(n){return!(n instanceof Mc)&&!(n instanceof $o)}var Z2=new z("");function US(n,...e){return $t([{provide:dv,multi:!0,useValue:n},[],{provide:Ho,useFactory:J2,deps:[rr]},{provide:fy,multi:!0,useFactory:X2},e.map(t=>t.\u0275providers)])}function J2(n){return n.routerState.root}function X2(){let n=B(pt);return e=>{let t=n.get(Ii);if(e!==t.components[0])return;let r=n.get(rr),i=n.get(ej);n.get(tj)===1&&r.initialNavigation(),n.get(nj,null,ge.Optional)?.setUpPreloading(),n.get(Z2,null,ge.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ej=new z("",{factory:()=>new Et}),tj=new z("",{providedIn:"root",factory:()=>1});var nj=new z("");var BS=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new pv;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let I=l<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},pv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ij=function(n){let e=BS(n);return $S.encodeByteArray(e,!0)},Uc=function(n){return ij(n).replace(/\./g,"")},mv=function(n){try{return $S.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var oj=()=>sj().__FIREBASE_DEFAULTS__,aj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&mv(n[1]);return e&&JSON.parse(e)},dh=()=>{try{return oj()||aj()||cj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yv=n=>{var e,t;return(t=(e=dh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hh=n=>{let e=yv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},vv=()=>{var n;return(n=dh())===null||n===void 0?void 0:n.config},_v=n=>{var e;return(e=dh())===null||e===void 0?void 0:e[`_${n}`]};var lh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function fh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Uc(JSON.stringify(t)),Uc(JSON.stringify(o)),""].join(".")}function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function uj(){var n;let e=(n=dh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zS(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WS(){let n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KS(){return!uj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jc(){try{return typeof indexedDB=="object"}catch{return!1}}function ph(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function QS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var lj="FirebaseError",Tt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}},rn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Tt(i,a,r)}};function dj(n,e){return n.replace(hj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var hj=/\{\$([^}]+)}/g;function YS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function hs(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(jS(s)&&jS(o)){if(!hs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jS(n){return n!==null&&typeof n=="object"}function Bc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Go(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Wo(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ZS(n,e){let t=new gv(n,e);return t.subscribe.bind(t)}var gv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=fv),i.error===void 0&&(i.error=fv),i.complete===void 0&&(i.complete=fv);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function fj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fv(){}var gJ=4*60*60*1e3;function Ue(n){return n&&n._delegate?n._delegate:n}var ct=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fs="[DEFAULT]";var wv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new lh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gj(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pj(n){return n===fs?void 0:n}function gj(n){return n.instantiationMode==="EAGER"}var gh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new wv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var mj=[],Ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ie||{}),yj={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},vj=Ie.INFO,_j={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},wj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=_j[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ci=class{constructor(e){this.name=e,this._logLevel=vj,this._logHandler=wj,this._userLogHandler=null,mj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var Ej=(n,e)=>e.some(t=>n instanceof t),JS,XS;function Ij(){return JS||(JS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bj(){return XS||(XS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var eA=new WeakMap,Iv=new WeakMap,tA=new WeakMap,Ev=new WeakMap,Tv=new WeakMap;function Tj(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ln(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&eA.set(t,n)}).catch(()=>{}),Tv.set(e,n),e}function Cj(n){if(Iv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Iv.set(n,e)}var bv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Iv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ln(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nA(n){bv=n(bv)}function Dj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(mh(this),e,...t);return tA.set(r,e.sort?e.sort():[e]),Ln(r)}:bj().includes(n)?function(...e){return n.apply(mh(this),e),Ln(eA.get(this))}:function(...e){return Ln(n.apply(mh(this),e))}}function Sj(n){return typeof n=="function"?Dj(n):(n instanceof IDBTransaction&&Cj(n),Ej(n,Ij())?new Proxy(n,bv):n)}function Ln(n){if(n instanceof IDBRequest)return Tj(n);if(Ev.has(n))return Ev.get(n);let e=Sj(n);return e!==n&&(Ev.set(n,e),Tv.set(e,n)),e}var mh=n=>Tv.get(n);function ps(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Ln(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ln(o.result),c.oldVersion,c.newVersion,Ln(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function yh(n,{blocked:e}={}){let t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Ln(t).then(()=>{})}var Aj=["get","getKey","getAll","getAllKeys","count"],Rj=["put","add","delete","clear"],Cv=new Map;function rA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Cv.get(e))return Cv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Rj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Aj.includes(t)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Cv.set(e,s),s}nA(n=>oe(k({},n),{get:(e,t,r)=>rA(e,t)||n.get(e,t,r),has:(e,t)=>!!rA(e,t)||n.has(e,t)}));var Sv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Nj(n){let e=n.getComponent();return e?.type==="VERSION"}var Av="@firebase/app",iA="0.10.13";var Ur=new Ci("@firebase/app"),Mj="@firebase/app-compat",Pj="@firebase/analytics-compat",xj="@firebase/analytics",Oj="@firebase/app-check-compat",kj="@firebase/app-check",Fj="@firebase/auth",Lj="@firebase/auth-compat",Vj="@firebase/database",Uj="@firebase/data-connect",jj="@firebase/database-compat",Bj="@firebase/functions",$j="@firebase/functions-compat",Hj="@firebase/installations",qj="@firebase/installations-compat",zj="@firebase/messaging",Gj="@firebase/messaging-compat",Wj="@firebase/performance",Kj="@firebase/performance-compat",Qj="@firebase/remote-config",Yj="@firebase/remote-config-compat",Zj="@firebase/storage",Jj="@firebase/storage-compat",Xj="@firebase/firestore",eB="@firebase/vertexai-preview",tB="@firebase/firestore-compat",nB="firebase",rB="10.14.1";var Rv="[DEFAULT]",iB={[Av]:"fire-core",[Mj]:"fire-core-compat",[xj]:"fire-analytics",[Pj]:"fire-analytics-compat",[kj]:"fire-app-check",[Oj]:"fire-app-check-compat",[Fj]:"fire-auth",[Lj]:"fire-auth-compat",[Vj]:"fire-rtdb",[Uj]:"fire-data-connect",[jj]:"fire-rtdb-compat",[Bj]:"fire-fn",[$j]:"fire-fn-compat",[Hj]:"fire-iid",[qj]:"fire-iid-compat",[zj]:"fire-fcm",[Gj]:"fire-fcm-compat",[Wj]:"fire-perf",[Kj]:"fire-perf-compat",[Qj]:"fire-rc",[Yj]:"fire-rc-compat",[Zj]:"fire-gcs",[Jj]:"fire-gcs-compat",[Xj]:"fire-fst",[tB]:"fire-fst-compat",[eB]:"fire-vertex","fire-js":"fire-js",[nB]:"fire-js-all"};var $c=new Map,sB=new Map,Nv=new Map;function sA(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nt(n){let e=n.name;if(Nv.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;Nv.set(e,n);for(let t of $c.values())sA(t,n);for(let t of sB.values())sA(t,n);return!0}function Tn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n.settings!==void 0}var oB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new rn("app","Firebase",oB);var Mv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}};var ir=rB;function Ov(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Rv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Di.create("bad-app-name",{appName:String(i)});if(t||(t=vv()),!t)throw Di.create("no-options");let s=$c.get(i);if(s){if(hs(t,s.options)&&hs(r,s.config))return s;throw Di.create("duplicate-app",{appName:i})}let o=new gh(i);for(let c of Nv.values())o.addComponent(c);let a=new Mv(t,r,o);return $c.set(i,a),a}function Un(n=Rv){let e=$c.get(n);if(!e&&n===Rv&&vv())return Ov();if(!e)throw Di.create("no-app",{appName:n});return e}function vh(){return Array.from($c.values())}function Me(n,e,t){var r;let i=(r=iB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(a.join(" "));return}Nt(new ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var aB="firebase-heartbeat-database",cB=1,Hc="firebase-heartbeat-store",Dv=null;function uA(){return Dv||(Dv=ps(aB,cB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Di.create("idb-open",{originalErrorMessage:n.message})})),Dv}function uB(n){return v(this,null,function*(){try{let t=(yield uA()).transaction(Hc),r=yield t.objectStore(Hc).get(lA(n));return yield t.done,r}catch(e){if(e instanceof Tt)Ur.warn(e.message);else{let t=Di.create("idb-get",{originalErrorMessage:e?.message});Ur.warn(t.message)}}})}function oA(n,e){return v(this,null,function*(){try{let r=(yield uA()).transaction(Hc,"readwrite");yield r.objectStore(Hc).put(e,lA(n)),yield r.done}catch(t){if(t instanceof Tt)Ur.warn(t.message);else{let r=Di.create("idb-set",{originalErrorMessage:t?.message});Ur.warn(r.message)}}})}function lA(n){return`${n.name}!${n.options.appId}`}var lB=1024,dB=30*24*60*60*1e3,Pv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=aA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=dB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ur.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=aA(),{heartbeatsToSend:r,unsentEntries:i}=hB(this._heartbeatsCache.heartbeats),s=Uc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ur.warn(t),""}})}};function aA(){return new Date().toISOString().substring(0,10)}function hB(n,e=lB){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cA(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var xv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return jc()?ph().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield uB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return oA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return oA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function cA(n){return Uc(JSON.stringify({version:2,heartbeats:n})).length}function fB(n){Nt(new ct("platform-logger",e=>new Sv(e),"PRIVATE")),Nt(new ct("heartbeat",e=>new Pv(e),"PRIVATE")),Me(Av,iA,n),Me(Av,iA,"esm2017"),Me("fire-js","")}fB("");var pB="firebase",gB="10.14.1";Me(pB,gB,"app");var jn=new Sr("ANGULARFIRE2_VERSION"),dA=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function Ai(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var jr=(n,e)=>{let t=e?[e]:vh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Si=class{constructor(){return jr(mB)}},mB="app-check";function Ko(){}var _h=class{zone;delegate;constructor(e,t=wg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},kv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),t.pipe(ft({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},sr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new _h(Zone.current)),this.insideAngular=t.run(()=>new _h(Zone.current,_g)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(X(de))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function yB(n){return wh().ngZone.runOutsideAngular(()=>n())}function gs(n){return wh().ngZone.run(()=>n())}function vB(n){return _B(wh())(n)}function _B(n){return function(t){return t=t.lift(new kv(n.ngZone)),t.pipe(ui(n.outsideAngular),ci(n.insideAngular))}}var wB=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),gs(()=>n.apply(void 0,r))},ze=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=gs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko))),r[s]=wB(r[s],t));let i=yB(()=>n.apply(this,r));if(!e)if(i instanceof De){let s=wh();return i.pipe(ui(s.outsideAngular),ci(s.insideAngular))}else return gs(()=>i);return i instanceof De?i.pipe(vB):i instanceof Promise?gs(()=>new Promise((s,o)=>i.then(a=>gs(()=>s(a)),a=>gs(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:gs(()=>i)};var sn=class{constructor(e){return e}},Bn=class{constructor(){return vh()}};function EB(n){return n&&n.length===1?n[0]:new sn(Un())}var Fv=new z("angularfire2._apps"),IB={provide:sn,useFactory:EB,deps:[[new We,Fv]]},bB={provide:Bn,deps:[[new We,Fv]]};function TB(n){return(e,t)=>{let r=t.get(Ei);Me("angularfire",jn.full,"core"),Me("angularfire",jn.full,"app"),Me("angular",RD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new sn(i)}}function hA(n,...e){return $t([IB,bB,{provide:Fv,useFactory:TB(n),multi:!0,deps:[de,pt,sr,...e]}])}var fA=ze(Ov,!0);function NA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var MA=NA,PA=new rn("auth","Firebase",NA());var Dh=new Ci("@firebase/auth");function CB(n,...e){Dh.logLevel<=Ie.WARN&&Dh.warn(`Auth (${ir}): ${n}`,...e)}function Ih(n,...e){Dh.logLevel<=Ie.ERROR&&Dh.error(`Auth (${ir}): ${n}`,...e)}function ar(n,...e){throw s_(n,...e)}function ms(n,...e){return s_(n,...e)}function xA(n,e,t){let r=Object.assign(Object.assign({},MA()),{[e]:t});return new rn("auth","Firebase",r).create(e,{appName:n.name})}function Hr(n){return xA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PA.create(n,...e)}function J(n,e,...t){if(!n)throw s_(e,...t)}function Br(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ih(e),new Error(e)}function Ni(n,e){n||Br(e)}function jv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DB(){return pA()==="http:"||pA()==="https:"}function pA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function SB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DB()||zS()||"connection"in navigator)?navigator.onLine:!0}function AB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ys=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile=HS()||GS()}get(){return SB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function o_(n,e){Ni(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Sh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var RB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var NB=new ys(3e4,6e4);function qr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function zr(s,o,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return OA(n,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Bc(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return qS()||(y.referrerPolicy="no-referrer"),Sh.fetch()(kA(n,n.config.apiHost,t,p),y)}))})}function OA(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},RB),e);try{let i=new Bv(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Eh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Eh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Eh(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw xA(n,h,l);ar(n,h)}}catch(i){if(i instanceof Tt)throw i;ar(n,"network-request-failed",{message:String(i)})}})}function Zc(s,o,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield zr(n,e,t,r,i);return"mfaPendingCredential"in l&&ar(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function kA(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?o_(n.config,i):`${n.config.apiScheme}://${i}`}function MB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Bv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ms(this.auth,"network-request-failed")),NB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Eh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ms(n,e,r);return i.customData._tokenResponse=t,i}function gA(n){return n!==void 0&&n.enterprise!==void 0}var $v=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function PB(n,e){return v(this,null,function*(){return zr(n,"GET","/v2/recaptchaConfig",qr(n,e))})}function xB(n,e){return v(this,null,function*(){return zr(n,"POST","/v1/accounts:delete",e)})}function FA(n,e){return v(this,null,function*(){return zr(n,"POST","/v1/accounts:lookup",e)})}function qc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function a_(n,e=!1){return v(this,null,function*(){let t=Ue(n),r=yield t.getIdToken(e),i=c_(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qc(Lv(i.auth_time)),issuedAtTime:qc(Lv(i.iat)),expirationTime:qc(Lv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Lv(n){return Number(n)*1e3}function c_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ih("JWT malformed, contained fewer than 3 sections"),null;try{let i=mv(t);return i?JSON.parse(i):(Ih("Failed to decode base64 JWT payload"),null)}catch(i){return Ih("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mA(n){let e=c_(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gc(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Tt&&OB(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function OB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Hv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Wc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ah(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Gc(n,FA(t,{idToken:r}));J(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?LA(s.providerUserInfo):[],a=kB(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function u_(n){return v(this,null,function*(){let e=Ue(n);yield Ah(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function kB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LA(n){return n.map(e=>{var{providerId:t}=e,r=Eg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FB(n,e){return v(this,null,function*(){let t=yield OA(n,{},()=>v(this,null,function*(){let r=Bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=kA(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Sh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function LB(n,e){return v(this,null,function*(){return zr(n,"POST","/v2/accounts:revokeToken",qr(n,e))})}var zc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");let t=mA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield FB(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Br("not implemented")}};function Ri(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Qo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Eg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Gc(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return a_(this,e)}reload(){return u_(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ah(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Vn(this.auth.app))return Promise.reject(Hr(this.auth));let e=yield this.getIdToken();return yield Gc(this,xB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=t.photoURL)!==null&&o!==void 0?o:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=t.createdAt)!==null&&l!==void 0?l:void 0,V=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:$,isAnonymous:Ce,providerData:K,stsTokenManager:b}=t;J(U&&b,e,"internal-error");let _=zc.fromJSON(this.name,b);J(typeof U=="string",e,"internal-error"),Ri(p,e.name),Ri(m,e.name),J(typeof $=="boolean",e,"internal-error"),J(typeof Ce=="boolean",e,"internal-error"),Ri(y,e.name),Ri(I,e.name),Ri(A,e.name),Ri(R,e.name),Ri(P,e.name),Ri(V,e.name);let w=new n({uid:U,auth:e,email:m,emailVerified:$,displayName:p,isAnonymous:Ce,photoURL:I,phoneNumber:y,tenantId:A,stsTokenManager:_,createdAt:P,lastLoginAt:V});return K&&Array.isArray(K)&&(w.providerData=K.map(T=>Object.assign({},T))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new zc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ah(s),s})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];J(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?LA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new zc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var yA=new Map;function $r(n){Ni(n instanceof Function,"Expected a class definition");let e=yA.get(n);return e?(Ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yA.set(n,e),e)}var VB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),qv=VB;function bh(n,e,t){return`firebase:${n}:${e}:${t}`}var Rh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=bh(this.userKey,i.apiKey,s),this.fullPersistenceKey=bh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Qo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n($r(qv),e,r);let i=(yield Promise.all(t.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||$r(qv),o=bh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=Qo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function vA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HA(e))return"Blackberry";if(qA(e))return"Webos";if(UA(e))return"Safari";if((e.includes("chrome/")||jA(e))&&!e.includes("edge/"))return"Chrome";if($A(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function VA(n=vt()){return/firefox\//i.test(n)}function UA(n=vt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jA(n=vt()){return/crios\//i.test(n)}function BA(n=vt()){return/iemobile/i.test(n)}function $A(n=vt()){return/android/i.test(n)}function HA(n=vt()){return/blackberry/i.test(n)}function qA(n=vt()){return/webos/i.test(n)}function l_(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UB(n=vt()){var e;return l_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jB(){return WS()&&document.documentMode===10}function zA(n=vt()){return l_(n)||$A(n)||qA(n)||HA(n)||/windows phone/i.test(n)||BA(n)}function GA(n,e=[]){let t;switch(n){case"Browser":t=vA(vt());break;case"Worker":t=`${vA(vt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ir}/${r}`}var zv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function BB(t){return v(this,arguments,function*(n,e={}){return zr(n,"GET","/v2/passwordPolicy",qr(n,e))})}var $B=6,Gv=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:$B,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Wv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nh(this),this.idTokenSubscription=new Nh(this),this.beforeStateQueue=new zv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$r(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Rh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield FA(this,{idToken:e}),r=yield Qo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Vn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ah(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=AB()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Vn(this.app))return Promise.reject(Hr(this));let t=e?Ue(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Vn(this.app)?Promise.reject(Hr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vn(this.app)?Promise.reject(Hr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence($r(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield BB(this),t=new Gv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield LB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&$r(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=yield Rh.create(this,[$r(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&CB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function _s(n){return Ue(n)}var Nh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZS(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Lh={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HB(n){Lh=n}function WA(n){return Lh.loadJS(n)}function qB(){return Lh.recaptchaEnterpriseScript}function zB(){return Lh.gapiScript}function KA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var GB="recaptcha-enterprise",WB="NO_RECAPTCHA",Kv=class{constructor(e){this.type=GB,this.auth=_s(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(s){return v(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>v(this,null,function*(){PB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new $v(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;gA(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(WB)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&gA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=qB();c.length!==0&&(c+=a),WA(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function _A(n,e,t,r=!1){return v(this,null,function*(){let i=new Kv(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Qv(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield _A(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield _A(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function d_(n,e){let t=Tn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(hs(s,e??{}))return i;ar(i,"already-initialized")}return t.initialize({options:e})}function KB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($r);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function h_(n,e,t){let r=_s(n);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=QA(e),{host:o,port:a}=QB(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||YB()}function QA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QB(n){let e=QA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:wA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:wA(o)}}}function wA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function YB(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Kc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,t){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}};function ZB(n,e){return v(this,null,function*(){return zr(n,"POST","/v1/accounts:signUp",e)})}function JB(n,e){return v(this,null,function*(){return Zc(n,"POST","/v1/accounts:signInWithPassword",qr(n,e))})}function XB(n,e){return v(this,null,function*(){return zr(n,"POST","/v1/accounts:sendOobCode",qr(n,e))})}function e$(n,e){return v(this,null,function*(){return XB(n,e)})}function t$(n,e){return v(this,null,function*(){return Zc(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))})}function n$(n,e){return v(this,null,function*(){return Zc(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))})}var Qc=class n extends Kc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qv(e,t,"signInWithPassword",JB);case"emailLink":return t$(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qv(e,r,"signUpPassword",ZB);case"emailLink":return n$(e,{idToken:t,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Vv(n,e){return v(this,null,function*(){return Zc(n,"POST","/v1/accounts:signInWithIdp",qr(n,e))})}function r$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i$(n){let e=Go(Wo(n)).link,t=e?Go(Wo(e)).deep_link_id:null,r=Go(Wo(n)).deep_link_id;return(r?Go(Wo(r)).link:null)||r||t||e||n}var Mh=class n{constructor(e){var t,r,i,s,o,a;let c=Go(Wo(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=r$((i=c.mode)!==null&&i!==void 0?i:null);J(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=i$(e);try{return new n(t)}catch{return null}}};var YA=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Qc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Mh.parseLink(r);return J(i,"argument-error"),Qc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ph=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Yv=class extends Ph{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function s$(n,e){return v(this,null,function*(){return Zc(n,"POST","/v1/accounts:signUp",qr(n,e))})}var Yo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let s=yield Qo._fromIdTokenResponse(e,r,i),o=EA(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=EA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function EA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Zv=class n extends Tt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function ZA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zv._fromErrorAndOperation(n,s,e,r):s})}function o$(n,e,t=!1){return v(this,null,function*(){let r=yield Gc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Yo._forOperation(n,"link",r)})}function a$(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Vn(r.app))return Promise.reject(Hr(r));let i="reauthenticate";try{let s=yield Gc(n,ZA(r,i,e,n),t);J(s.idToken,r,"internal-error");let o=c_(s.idToken);J(o,r,"internal-error");let{sub:a}=o;return J(n.uid===a,r,"user-mismatch"),Yo._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ar(r,"user-mismatch"),s}})}function JA(n,e,t=!1){return v(this,null,function*(){if(Vn(n.app))return Promise.reject(Hr(n));let r="signIn",i=yield ZA(n,r,e),s=yield Yo._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function f_(n,e){return v(this,null,function*(){return JA(_s(n),e)})}function c$(n,e,t){var r;J(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),J(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(J(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(J(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function XA(n){return v(this,null,function*(){let e=_s(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function p_(n,e,t){return v(this,null,function*(){if(Vn(n.app))return Promise.reject(Hr(n));let r=_s(n),o=yield Qv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",s$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&XA(n),c}),a=yield Yo._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function g_(n,e,t){return Vn(n.app)?Promise.reject(Hr(n)):f_(Ue(n),YA.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&XA(n),r}))}function m_(n,e){return v(this,null,function*(){let t=Ue(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&c$(t.auth,i,e);let{email:s}=yield e$(t.auth,i);s!==n.email&&(yield n.reload())})}function y_(n,e,t,r){return Ue(n).onIdTokenChanged(e,t,r)}function v_(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}function __(n,e,t,r){return Ue(n).onAuthStateChanged(e,t,r)}function w_(n){return Ue(n).signOut()}var xh="__sak";var Oh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xh,"1"),this.storage.removeItem(xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var u$=1e3,l$=10,d$=(()=>{class n extends Oh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);jB()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,l$):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},u$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield si(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield si(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield si(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),eR=d$;var h$=(()=>{class n extends Oh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),E_=h$;function f$(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var p$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,o)})),l=yield f$(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function tR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Jv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=tR("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function or(){return window}function g$(n){or().location.href=n}function nR(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}function m$(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function y$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function v$(){return nR()?self:null}var rR="firebaseLocalStorageDb",_$=1,kh="firebaseLocalStorage",iR="fbase_key",vs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Vh(n,e){return n.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function w$(){let n=indexedDB.deleteDatabase(rR);return new vs(n).toPromise()}function Xv(){let n=indexedDB.open(rR,_$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(kh,{keyPath:iR})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),yield w$(),e(yield Xv()))}))})}function IA(n,e,t){return v(this,null,function*(){let r=Vh(n,!0).put({[iR]:e,value:t});return new vs(r).toPromise()})}function E$(n,e){return v(this,null,function*(){let t=Vh(n,!1).get(e),r=yield new vs(t).toPromise();return r===void 0?null:r.value})}function bA(n,e){let t=Vh(n,!0).delete(e);return new vs(t).toPromise()}var I$=800,b$=3,T$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Xv(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>b$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return nR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=p$._getInstance(v$()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield m$(),!this.activeServiceWorker)return;this.sender=new Jv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||y$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Xv();return yield IA(t,xh,"1"),yield bA(t,xh),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>IA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>E$(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>bA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let o=Vh(s,!1).getAll();return new vs(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),I$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),sR=T$;var cX=KA("rcb"),uX=new ys(3e4,6e4);function C$(n,e){return e?$r(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Yc=class extends Kc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vv(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vv(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vv(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function D$(n){return JA(n.auth,new Yc(n),n.bypassAuthState)}function S$(n){let{auth:e,user:t}=n;return J(t,e,"internal-error"),a$(t,new Yc(n),n.bypassAuthState)}function A$(n){return v(this,null,function*(){let{auth:e,user:t}=n;return J(t,e,"internal-error"),o$(t,new Yc(n),n.bypassAuthState)})}var e_=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D$;case"linkViaPopup":case"linkViaRedirect":return A$;case"reauthViaPopup":case"reauthViaRedirect":return S$;default:ar(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var lX=new ys(2e3,1e4);var R$="pendingRedirect",Th=new Map,t_=class n extends e_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Th.get(this.auth._key());if(!e){try{let r=(yield N$(this.resolver,this.auth))?yield si(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return si(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,si(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function N$(n,e){return v(this,null,function*(){let t=x$(e),r=P$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function M$(n,e){Th.set(n._key(),e)}function P$(n){return $r(n._redirectPersistence)}function x$(n){return bh(R$,n.config.apiKey,n.name)}function O$(n,e,t=!1){return v(this,null,function*(){if(Vn(n.app))return Promise.reject(Hr(n));let r=_s(n),i=C$(r,e),o=yield new t_(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var k$=10*60*1e3,n_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!oR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ms(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k$&&this.cachedEventUids.clear(),this.cachedEventUids.has(TA(e))}saveEventToCache(e){this.cachedEventUids.add(TA(e)),this.lastProcessedEventTime=Date.now()}};function TA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function F$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oR(n);default:return!1}}function L$(t){return v(this,arguments,function*(n,e={}){return zr(n,"GET","/v1/projects",e)})}var V$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U$=/^https?/;function j$(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield L$(n);for(let t of e)try{if(B$(t))return}catch{}ar(n,"unauthorized-domain")})}function B$(n){let e=jv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!U$.test(t))return!1;if(V$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var $$=new ys(3e4,6e4);function CA(){let n=or().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function H$(n){return new Promise((e,t)=>{var r,i,s;function o(){CA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CA(),t(ms(n,"network-request-failed"))},timeout:$$.get()})}if(!((i=(r=or().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=or().gapi)===null||s===void 0)&&s.load)o();else{let a=KA("iframefcb");return or()[a]=()=>{gapi.load?o():t(ms(n,"network-request-failed"))},WA(`${zB()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Ch=null,e})}var Ch=null;function q$(n){return Ch=Ch||H$(n),Ch}var z$=new ys(5e3,15e3),G$="__/auth/iframe",W$="emulator/auth/iframe",K$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y$(n){let e=n.config;J(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?o_(e,W$):`https://${n.config.authDomain}/${G$}`,r={apiKey:e.apiKey,appName:n.name,v:ir},i=Q$.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Bc(r).slice(1)}`}function Z$(n){return v(this,null,function*(){let e=yield q$(n),t=or().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:Y$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K$,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ms(n,"network-request-failed"),a=or().setTimeout(()=>{s(o)},z$.get());function c(){or().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var J$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X$=500,eH=600,tH="_blank",nH="http://localhost",Fh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function rH(n,e,t,r=X$,i=eH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},J$),{width:r.toString(),height:i.toString(),top:s,left:o}),l=vt().toLowerCase();t&&(a=jA(l)?tH:t),VA(l)&&(e=e||nH,c.scrollbars="yes");let h=Object.entries(c).reduce((m,[y,I])=>`${m}${y}=${I},`,"");if(UB(l)&&a!=="_self")return iH(e||"",a),new Fh(null);let p=window.open(e||"",a,h);J(p,n,"popup-blocked");try{p.focus()}catch{}return new Fh(p)}function iH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var sH="__/auth/handler",oH="emulator/auth/handler",aH=encodeURIComponent("fac");function DA(n,e,t,r,i,s){return v(this,null,function*(){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ir,eventId:i};if(e instanceof Ph){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",YS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Yv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${aH}=${encodeURIComponent(c)}`:"";return`${cH(n)}?${Bc(a).slice(1)}${l}`})}function cH({config:n}){return n.emulator?o_(n,oH):`https://${n.authDomain}/${sH}`}var Uv="webStorageSupport",r_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E_,this._completeRedirectFn=O$,this._overrideRedirectResult=M$}_openPopup(e,t,r,i){return v(this,null,function*(){var s;Ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield DA(e,t,r,jv(),i);return rH(e,o,tR())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield DA(e,t,r,jv(),i);return g$(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ni(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield Z$(e),r=new n_(e);return t.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uv,{type:Uv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Uv];o!==void 0&&t(!!o),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zA()||UA()||l_()}},aR=r_;var SA="@firebase/auth",AA="1.7.9";var i_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function uH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lH(n){Nt(new ct("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GA(n)},l=new Wv(r,i,s,c);return KB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nt(new ct("auth-internal",e=>{let t=_s(e.getProvider("auth").getImmediate());return(r=>new i_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(SA,AA,uH(n)),Me(SA,AA,"esm2017")}var dH=5*60,hH=_v("authIdTokenMaxAge")||dH,RA=null,fH=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hH)return;let i=t?.token;RA!==i&&(RA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function I_(n=Un()){let e=Tn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=d_(n,{popupRedirectResolver:aR,persistence:[sR,eR,E_]}),r=_v("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=fH(s.toString());v_(t,o,()=>o(t.currentUser)),y_(t,a=>o(a))}}let i=yv("auth");return i&&h_(t,`http://${i}`),t}function pH(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}HB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ms("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",pH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lH("Browser");var cR="auth",on=class{constructor(e){return e}},ws=class{constructor(){return jr(cR)}};var b_=new z("angularfire2.auth-instances");function nq(n,e){let t=Ai(cR,n,e);return t&&new on(t)}function rq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new on(r)}}var iq={provide:ws,deps:[[new We,b_]]},sq={provide:on,useFactory:nq,deps:[[new We,b_],sn]};function uR(n,...e){return Me("angularfire",jn.full,"auth"),$t([sq,iq,{provide:b_,useFactory:rq(n),multi:!0,deps:[de,pt,sr,Bn,[new We,Si],...e]}])}var Uh=ze(p_,!0);var jh=ze(I_,!0);var lR=ze(__,!0);var Bh=ze(m_,!0);var dR=ze(g_,!0);var hR=ze(w_,!0);var fR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pR={};var Mi,T_;(function(){var n;function e(b,_){function w(){}w.prototype=_.prototype,b.D=_.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(T,C,S){for(var E=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)E[hn-2]=arguments[hn];return _.prototype[C].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,w){w||(w=0);var T=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)T[C]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(C=0;16>C;++C)T[C]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=b.g[0],w=b.g[1],C=b.g[2];var S=b.g[3],E=_+(S^w&(C^S))+T[0]+3614090360&4294967295;_=w+(E<<7&4294967295|E>>>25),E=S+(C^_&(w^C))+T[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=C+(w^S&(_^w))+T[2]+606105819&4294967295,C=S+(E<<17&4294967295|E>>>15),E=w+(_^C&(S^_))+T[3]+3250441966&4294967295,w=C+(E<<22&4294967295|E>>>10),E=_+(S^w&(C^S))+T[4]+4118548399&4294967295,_=w+(E<<7&4294967295|E>>>25),E=S+(C^_&(w^C))+T[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=C+(w^S&(_^w))+T[6]+2821735955&4294967295,C=S+(E<<17&4294967295|E>>>15),E=w+(_^C&(S^_))+T[7]+4249261313&4294967295,w=C+(E<<22&4294967295|E>>>10),E=_+(S^w&(C^S))+T[8]+1770035416&4294967295,_=w+(E<<7&4294967295|E>>>25),E=S+(C^_&(w^C))+T[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=C+(w^S&(_^w))+T[10]+4294925233&4294967295,C=S+(E<<17&4294967295|E>>>15),E=w+(_^C&(S^_))+T[11]+2304563134&4294967295,w=C+(E<<22&4294967295|E>>>10),E=_+(S^w&(C^S))+T[12]+1804603682&4294967295,_=w+(E<<7&4294967295|E>>>25),E=S+(C^_&(w^C))+T[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=C+(w^S&(_^w))+T[14]+2792965006&4294967295,C=S+(E<<17&4294967295|E>>>15),E=w+(_^C&(S^_))+T[15]+1236535329&4294967295,w=C+(E<<22&4294967295|E>>>10),E=_+(C^S&(w^C))+T[1]+4129170786&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^C&(_^w))+T[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=C+(_^w&(S^_))+T[11]+643717713&4294967295,C=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(C^S))+T[0]+3921069994&4294967295,w=C+(E<<20&4294967295|E>>>12),E=_+(C^S&(w^C))+T[5]+3593408605&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^C&(_^w))+T[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=C+(_^w&(S^_))+T[15]+3634488961&4294967295,C=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(C^S))+T[4]+3889429448&4294967295,w=C+(E<<20&4294967295|E>>>12),E=_+(C^S&(w^C))+T[9]+568446438&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^C&(_^w))+T[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=C+(_^w&(S^_))+T[3]+4107603335&4294967295,C=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(C^S))+T[8]+1163531501&4294967295,w=C+(E<<20&4294967295|E>>>12),E=_+(C^S&(w^C))+T[13]+2850285829&4294967295,_=w+(E<<5&4294967295|E>>>27),E=S+(w^C&(_^w))+T[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=C+(_^w&(S^_))+T[7]+1735328473&4294967295,C=S+(E<<14&4294967295|E>>>18),E=w+(S^_&(C^S))+T[12]+2368359562&4294967295,w=C+(E<<20&4294967295|E>>>12),E=_+(w^C^S)+T[5]+4294588738&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^C)+T[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=C+(S^_^w)+T[11]+1839030562&4294967295,C=S+(E<<16&4294967295|E>>>16),E=w+(C^S^_)+T[14]+4259657740&4294967295,w=C+(E<<23&4294967295|E>>>9),E=_+(w^C^S)+T[1]+2763975236&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^C)+T[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=C+(S^_^w)+T[7]+4139469664&4294967295,C=S+(E<<16&4294967295|E>>>16),E=w+(C^S^_)+T[10]+3200236656&4294967295,w=C+(E<<23&4294967295|E>>>9),E=_+(w^C^S)+T[13]+681279174&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^C)+T[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=C+(S^_^w)+T[3]+3572445317&4294967295,C=S+(E<<16&4294967295|E>>>16),E=w+(C^S^_)+T[6]+76029189&4294967295,w=C+(E<<23&4294967295|E>>>9),E=_+(w^C^S)+T[9]+3654602809&4294967295,_=w+(E<<4&4294967295|E>>>28),E=S+(_^w^C)+T[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=C+(S^_^w)+T[15]+530742520&4294967295,C=S+(E<<16&4294967295|E>>>16),E=w+(C^S^_)+T[2]+3299628645&4294967295,w=C+(E<<23&4294967295|E>>>9),E=_+(C^(w|~S))+T[0]+4096336452&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~C))+T[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=C+(_^(S|~w))+T[14]+2878612391&4294967295,C=S+(E<<15&4294967295|E>>>17),E=w+(S^(C|~_))+T[5]+4237533241&4294967295,w=C+(E<<21&4294967295|E>>>11),E=_+(C^(w|~S))+T[12]+1700485571&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~C))+T[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=C+(_^(S|~w))+T[10]+4293915773&4294967295,C=S+(E<<15&4294967295|E>>>17),E=w+(S^(C|~_))+T[1]+2240044497&4294967295,w=C+(E<<21&4294967295|E>>>11),E=_+(C^(w|~S))+T[8]+1873313359&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~C))+T[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=C+(_^(S|~w))+T[6]+2734768916&4294967295,C=S+(E<<15&4294967295|E>>>17),E=w+(S^(C|~_))+T[13]+1309151649&4294967295,w=C+(E<<21&4294967295|E>>>11),E=_+(C^(w|~S))+T[4]+4149444226&4294967295,_=w+(E<<6&4294967295|E>>>26),E=S+(w^(_|~C))+T[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=C+(_^(S|~w))+T[2]+718787259&4294967295,C=S+(E<<15&4294967295|E>>>17),E=w+(S^(C|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(C+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+C&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var w=_-this.blockSize,T=this.B,C=this.h,S=0;S<_;){if(C==0)for(;S<=w;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(T[C++]=b.charCodeAt(S++),C==this.blockSize){i(this,T),C=0;break}}else for(;S<_;)if(T[C++]=b[S++],C==this.blockSize){i(this,T),C=0;break}}this.h=C,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var w=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=w&255,w/=256;for(this.u(b),b=Array(16),_=w=0;4>_;++_)for(var T=0;32>T;T+=8)b[w++]=this.g[_]>>>T&255;return b};function s(b,_){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=_(b)}function o(b,_){this.h=_;for(var w=[],T=!0,C=b.length-1;0<=C;C--){var S=b[C]|0;T&&S==_||(w[C]=S,T=!1)}this.g=w}var a={};function c(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var _=[],w=1,T=0;b>=w;T++)_[T]=b/w|0,w*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return R(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),T=p,C=0;C<b.length;C+=8){var S=Math.min(8,b.length-C),E=parseInt(b.substring(C,C+S),_);8>S?(S=l(Math.pow(_,S)),T=T.j(S).add(l(E))):(T=T.j(w),T=T.add(l(E)))}return T}var p=c(0),m=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(A(this))return-R(this).m();for(var b=0,_=1,w=0;w<this.g.length;w++){var T=this.i(w);b+=(0<=T?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(A(this))return"-"+R(this).toString(b);for(var _=l(Math.pow(b,6)),w=this,T="";;){var C=$(w,_).g;w=P(w,C.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=C,I(w))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function A(b){return b.h==-1}n.l=function(b){return b=P(this,b),A(b)?-1:I(b)?0:1};function R(b){for(var _=b.g.length,w=[],T=0;T<_;T++)w[T]=~b.g[T];return new o(w,~b.h).add(m)}n.abs=function(){return A(this)?R(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],T=0,C=0;C<=_;C++){var S=T+(this.i(C)&65535)+(b.i(C)&65535),E=(S>>>16)+(this.i(C)>>>16)+(b.i(C)>>>16);T=E>>>16,S&=65535,E&=65535,w[C]=E<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function P(b,_){return b.add(R(_))}n.j=function(b){if(I(this)||I(b))return p;if(A(this))return A(b)?R(this).j(R(b)):R(R(this).j(b));if(A(b))return R(this.j(R(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,w=[],T=0;T<2*_;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<b.g.length;C++){var S=this.i(T)>>>16,E=this.i(T)&65535,hn=b.i(C)>>>16,Xr=b.i(C)&65535;w[2*T+2*C]+=E*Xr,V(w,2*T+2*C),w[2*T+2*C+1]+=S*Xr,V(w,2*T+2*C+1),w[2*T+2*C+1]+=E*hn,V(w,2*T+2*C+1),w[2*T+2*C+2]+=S*hn,V(w,2*T+2*C+2)}for(T=0;T<_;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=_;T<2*_;T++)w[T]=0;return new o(w,0)};function V(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function U(b,_){this.g=b,this.h=_}function $(b,_){if(I(_))throw Error("division by zero");if(I(b))return new U(p,p);if(A(b))return _=$(R(b),_),new U(R(_.g),R(_.h));if(A(_))return _=$(b,R(_)),new U(R(_.g),_.h);if(30<b.g.length){if(A(b)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,T=_;0>=T.l(b);)w=Ce(w),T=Ce(T);var C=K(w,1),S=K(T,1);for(T=K(T,2),w=K(w,2);!I(T);){var E=S.add(T);0>=E.l(b)&&(C=C.add(w),S=E),T=K(T,1),w=K(w,1)}return _=P(b,C.j(_)),new U(C,_)}for(C=p;0<=b.l(_);){for(w=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(w),E=S.j(_);A(E)||0<E.l(b);)w-=T,S=l(w),E=S.j(_);I(S)&&(S=m),C=C.add(S),b=P(b,E)}return new U(C,b)}n.A=function(b){return $(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],T=0;T<_;T++)w[T]=this.i(T)&b.i(T);return new o(w,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],T=0;T<_;T++)w[T]=this.i(T)|b.i(T);return new o(w,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],T=0;T<_;T++)w[T]=this.i(T)^b.i(T);return new o(w,this.h^b.h)};function Ce(b){for(var _=b.g.length+1,w=[],T=0;T<_;T++)w[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(w,b.h)}function K(b,_){var w=_>>5;_%=32;for(var T=b.g.length-w,C=[],S=0;S<T;S++)C[S]=0<_?b.i(S+w)>>>_|b.i(S+w+1)<<32-_:b.i(S+w);return new o(C,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,T_=pR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Mi=pR.Integer=o}).apply(typeof fR<"u"?fR:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gr={};var C_,oq,Zo,D_,Jc,qh,S_,A_,R_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var D=u[g];if(!(D in f))break e;f=f[D]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,g=!1,D={next:function(){if(!g&&f<u.length){var N=f++;return{value:d(N,u[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),u.apply(d,D)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function I(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,D,N){for(var F=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)F[Le-2]=arguments[Le];return d.prototype[D].apply(g,F)}}function A(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function R(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let D=u.length||0,N=g.length||0;u.length=D+N;for(let F=0;F<N;F++)u[D+F]=g[F]}else u.push(g)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(u){return/^[\s\xa0]*$/.test(u)}function U(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function $(u){return $[" "](u),u}$[" "]=function(){};var Ce=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function K(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function b(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function _(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)u[f]=g[f];for(let N=0;N<w.length;N++)f=w[N],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function C(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function E(){var u=me;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class hn{constructor(){this.h=this.g=null}add(d,f){let g=Xr.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Xr=new P(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,me=new hn,rt=()=>{let u=a.Promise.resolve(void 0);G=()=>{u.then(fn)}};var fn=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(f){S(f)}var d=Xr;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Y=!1};function Ke(){this.s=this.s,this.C=this.C}Ke.prototype.s=!1,Ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function ei(u,d){if(Be.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(Ce){e:{try{$(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Mp[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ei.aa.h.call(this)}}I(ei,Be);var Mp={2:"touch",3:"pen",4:"mouse"};ei.prototype.h=function(){ei.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),vr=0;function jt(u,d,f,g,D){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++vr,this.da=this.fa=!1}function _r(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ti(u){this.src=u,this.g={},this.h=0}ti.prototype.add=function(u,d,f,g,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var F=xp(u,d,g,D);return-1<F?(d=u[F],f||(d.fa=!1)):(d=new jt(d,this.src,N,!!g,D),d.fa=f,u.push(d)),d};function Pp(u,d){var f=d.type;if(f in u.g){var g=u.g[f],D=Array.prototype.indexOf.call(g,d,void 0),N;(N=0<=D)&&Array.prototype.splice.call(g,D,1),N&&(_r(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function xp(u,d,f,g){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==g)return D}return-1}var Op="closure_lm_"+(1e6*Math.random()|0),kp={};function YI(u,d,f,g,D){if(g&&g.once)return JI(u,d,f,g,D);if(Array.isArray(d)){for(var N=0;N<d.length;N++)YI(u,d[N],f,g,D);return null}return f=Up(f),u&&u[Qe]?u.K(d,f,l(g)?!!g.capture:!!g,D):ZI(u,d,f,!1,g,D)}function ZI(u,d,f,g,D,N){if(!d)throw Error("Invalid event type");var F=l(D)?!!D.capture:!!D,Le=Lp(u);if(Le||(u[Op]=Le=new ti(u)),f=Le.add(d,f,g,F,N),f.proxy)return f;if(g=xx(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)$e||(D=F),D===void 0&&(D=!1),u.addEventListener(d.toString(),g,D);else if(u.attachEvent)u.attachEvent(eb(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function xx(){function u(f){return d.call(u.src,u.listener,f)}let d=Ox;return u}function JI(u,d,f,g,D){if(Array.isArray(d)){for(var N=0;N<d.length;N++)JI(u,d[N],f,g,D);return null}return f=Up(f),u&&u[Qe]?u.L(d,f,l(g)?!!g.capture:!!g,D):ZI(u,d,f,!0,g,D)}function XI(u,d,f,g,D){if(Array.isArray(d))for(var N=0;N<d.length;N++)XI(u,d[N],f,g,D);else g=l(g)?!!g.capture:!!g,f=Up(f),u&&u[Qe]?(u=u.i,d=String(d).toString(),d in u.g&&(N=u.g[d],f=xp(N,f,g,D),-1<f&&(_r(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete u.g[d],u.h--)))):u&&(u=Lp(u))&&(d=u.g[d.toString()],u=-1,d&&(u=xp(d,f,g,D)),(f=-1<u?d[u]:null)&&Fp(f))}function Fp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Qe])Pp(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(eb(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Lp(d))?(Pp(f,u),f.h==0&&(f.src=null,d[Op]=null)):_r(u)}}}function eb(u){return u in kp?kp[u]:kp[u]="on"+u}function Ox(u,d){if(u.da)u=!0;else{d=new ei(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Fp(u),u=f.call(g,d)}return u}function Lp(u){return u=u[Op],u instanceof ti?u:null}var Vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Up(u){return typeof u=="function"?u:(u[Vp]||(u[Vp]=function(d){return u.handleEvent(d)}),u[Vp])}function St(){Ke.call(this),this.i=new ti(this),this.M=this,this.F=null}I(St,Ke),St.prototype[Qe]=!0,St.prototype.removeEventListener=function(u,d,f,g){XI(this,u,d,f,g)};function Ot(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new Be(d,u);else if(d instanceof Be)d.target=d.target||u;else{var D=d;d=new Be(g,u),T(d,D)}if(D=!0,f)for(var N=f.length-1;0<=N;N--){var F=d.g=f[N];D=$u(F,g,!0,d)&&D}if(F=d.g=u,D=$u(F,g,!0,d)&&D,D=$u(F,g,!1,d)&&D,f)for(N=0;N<f.length;N++)F=d.g=f[N],D=$u(F,g,!1,d)&&D}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)_r(f[g]);delete u.g[d],u.h--}}this.F=null},St.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},St.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function $u(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,N=0;N<d.length;++N){var F=d[N];if(F&&!F.da&&F.capture==f){var Le=F.listener,wt=F.ha||F.src;F.fa&&Pp(u.i,F),D=Le.call(wt,g)!==!1&&D}}return D&&!g.defaultPrevented}function tb(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function nb(u){u.g=tb(()=>{u.g=null,u.i&&(u.i=!1,nb(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class kx extends Ke{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:nb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ka(u){Ke.call(this),this.h=u,this.g={}}I(ka,Ke);var rb=[];function ib(u){K(u.g,function(d,f){this.g.hasOwnProperty(f)&&Fp(d)},u),u.g={}}ka.prototype.N=function(){ka.aa.N.call(this),ib(this)},ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jp=a.JSON.stringify,Fx=a.JSON.parse,Lx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Bp(){}Bp.prototype.h=null;function sb(u){return u.h||(u.h=u.i())}function ob(){}var Fa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $p(){Be.call(this,"d")}I($p,Be);function Hp(){Be.call(this,"c")}I(Hp,Be);var $i={},ab=null;function Hu(){return ab=ab||new St}$i.La="serverreachability";function cb(u){Be.call(this,$i.La,u)}I(cb,Be);function La(u){let d=Hu();Ot(d,new cb(d))}$i.STAT_EVENT="statevent";function ub(u,d){Be.call(this,$i.STAT_EVENT,u),this.stat=d}I(ub,Be);function kt(u){let d=Hu();Ot(d,new ub(d,u))}$i.Ma="timingevent";function lb(u,d){Be.call(this,$i.Ma,u),this.size=d}I(lb,Be);function Va(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ua(){this.g=!0}Ua.prototype.xa=function(){this.g=!1};function Vx(u,d,f,g,D,N){u.info(function(){if(u.g)if(N)for(var F="",Le=N.split("&"),wt=0;wt<Le.length;wt++){var Ne=Le[wt].split("=");if(1<Ne.length){var At=Ne[0];Ne=Ne[1];var Rt=At.split("_");F=2<=Rt.length&&Rt[1]=="type"?F+(At+"="+Ne+"&"):F+(At+"=redacted&")}}else F=null;else F=N;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+F})}function Ux(u,d,f,g,D,N,F){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+N+" "+F})}function Ws(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Bx(u,f)+(g?" "+g:"")})}function jx(u,d){u.info(function(){return"TIMEOUT: "+d})}Ua.prototype.info=function(){};function Bx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var F=1;F<D.length;F++)D[F]=""}}}}return jp(f)}catch{return d}}var qu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},db={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qp;function zu(){}I(zu,Bp),zu.prototype.g=function(){return new XMLHttpRequest},zu.prototype.i=function(){return{}},qp=new zu;function ni(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new ka(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hb}function hb(){this.i=null,this.g="",this.h=!1}var fb={},zp={};function Gp(u,d,f){u.L=1,u.v=Qu(wr(d)),u.m=f,u.P=!0,pb(u,null)}function pb(u,d){u.F=Date.now(),Gu(u),u.A=wr(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),Ab(f.i,"t",g),u.C=0,f=u.j.J,u.h=new hb,u.g=Gb(u.j,f?d:null,!u.m),0<u.O&&(u.M=new kx(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(rb[0]=D.toString()),D=rb);for(var N=0;N<D.length;N++){var F=YI(f,D[N],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),La(),Vx(u.i,u.u,u.A,u.l,u.R,u.m)}ni.prototype.ca=function(u){u=u.target;let d=this.M;d&&Er(u)==3?d.j():this.Y(u)},ni.prototype.Y=function(u){try{if(u==this.g)e:{let Rt=Er(this.g);var d=this.g.Ba();let Ys=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||kb(this.g)))){this.J||Rt!=4||d==7||(d==8||0>=Ys?La(3):La(2)),Wp(this);var f=this.g.Z();this.X=f;t:if(gb(this)){var g=kb(this.g);u="";var D=g.length,N=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hi(this),ja(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(N&&d==D-1)});g.length=0,this.h.g+=u,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,Ux(this.i,this.u,this.A,this.l,this.R,Rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,wt=this.g;if((Le=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Le)){var Ne=Le;break t}}Ne=null}if(f=Ne)Ws(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kp(this,f);else{this.o=!1,this.s=3,kt(12),Hi(this),ja(this);break e}}if(this.P){f=!0;let An;for(;!this.J&&this.C<F.length;)if(An=$x(this,F),An==zp){Rt==4&&(this.s=4,kt(14),f=!1),Ws(this.i,this.l,null,"[Incomplete Response]");break}else if(An==fb){this.s=4,kt(15),Ws(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Ws(this.i,this.l,An,null),Kp(this,An);if(gb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||F.length!=0||this.h.h||(this.s=1,kt(16),f=!1),this.o=this.o&&f,!f)Ws(this.i,this.l,F,"[Invalid Chunked Response]"),Hi(this),ja(this);else if(0<F.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),eg(At),At.M=!0,kt(11))}}else Ws(this.i,this.l,F,null),Kp(this,F);Rt==4&&Hi(this),this.o&&!this.J&&(Rt==4?$b(this.j,this):(this.o=!1,Gu(this)))}else sO(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Hi(this),ja(this)}}}catch{}finally{}};function gb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function $x(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?zp:(f=Number(d.substring(f,g)),isNaN(f)?fb:(g+=1,g+f>d.length?zp:(d=d.slice(g,g+f),u.C=g+f,d)))}ni.prototype.cancel=function(){this.J=!0,Hi(this)};function Gu(u){u.S=Date.now()+u.I,mb(u,u.I)}function mb(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Va(m(u.ba,u),d)}function Wp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ni.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(jx(this.i,this.A),this.L!=2&&(La(),kt(17)),Hi(this),this.s=2,ja(this)):mb(this,this.S-u)};function ja(u){u.j.G==0||u.J||$b(u.j,u)}function Hi(u){Wp(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,ib(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Kp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Qp(f.h,u))){if(!u.K&&Qp(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)el(f),Ju(f);else break e;Xp(f),kt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Va(m(f.Za,f),6e3));if(1>=_b(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zi(f,11)}else if((u.K||f.g==u)&&el(f),!V(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let Ne=D[d];if(f.T=Ne[0],Ne=Ne[1],f.G==2)if(Ne[0]=="c"){f.K=Ne[1],f.ia=Ne[2];let At=Ne[3];At!=null&&(f.la=At,f.j.info("VER="+f.la));let Rt=Ne[4];Rt!=null&&(f.Aa=Rt,f.j.info("SVER="+f.Aa));let Ys=Ne[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(g=1.5*Ys,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let An=u.g;if(An){let nl=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nl){var N=g.h;N.g||nl.indexOf("spdy")==-1&&nl.indexOf("quic")==-1&&nl.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Yp(N,N.h),N.h=null))}if(g.D){let tg=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;tg&&(g.ya=tg,He(g.I,g.D,tg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=u;if(g.qa=zb(g,g.J?g.ia:null,g.W),F.K){wb(g.h,F);var Le=F,wt=g.L;wt&&(Le.I=wt),Le.B&&(Wp(Le),Gu(Le)),g.g=F}else jb(g);0<f.i.length&&Xu(f)}else Ne[0]!="stop"&&Ne[0]!="close"||zi(f,7);else f.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?zi(f,7):Jp(f):Ne[0]!="noop"&&f.l&&f.l.ta(Ne),f.v=0)}}La(4)}catch{}}var Hx=class{constructor(u,d){this.g=u,this.map=d}};function yb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _b(u){return u.h?1:u.g?u.g.size:0}function Qp(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Yp(u,d){u.g?u.g.add(d):u.h=d}function wb(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}yb.prototype.cancel=function(){if(this.i=Eb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Eb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return A(u.i)}function qx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function zx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function Ib(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=zx(u),g=qx(u),D=g.length,N=0;N<D;N++)d.call(void 0,g[N],f&&f[N],u)}var bb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gx(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),D=null;if(0<=g){var N=u[f].substring(0,g);D=u[f].substring(g+1)}else N=u[f];d(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function qi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof qi){this.h=u.h,Wu(this,u.j),this.o=u.o,this.g=u.g,Ku(this,u.s),this.l=u.l;var d=u.i,f=new Ha;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Tb(this,f),this.m=u.m}else u&&(d=String(u).match(bb))?(this.h=!1,Wu(this,d[1]||"",!0),this.o=Ba(d[2]||""),this.g=Ba(d[3]||"",!0),Ku(this,d[4]),this.l=Ba(d[5]||"",!0),Tb(this,d[6]||"",!0),this.m=Ba(d[7]||"")):(this.h=!1,this.i=new Ha(null,this.h))}qi.prototype.toString=function(){var u=[],d=this.j;d&&u.push($a(d,Cb,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push($a(d,Cb,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push($a(f,f.charAt(0)=="/"?Qx:Kx,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",$a(f,Zx)),u.join("")};function wr(u){return new qi(u)}function Wu(u,d,f){u.j=f?Ba(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Ku(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Tb(u,d,f){d instanceof Ha?(u.i=d,Jx(u.i,u.h)):(f||(d=$a(d,Yx)),u.i=new Ha(d,u.h))}function He(u,d,f){u.i.set(d,f)}function Qu(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ba(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $a(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,Wx),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cb=/[#\/\?@]/g,Kx=/[#\?:]/g,Qx=/[#\?]/g,Yx=/[#\?@]/g,Zx=/#/g;function Ha(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ri(u){u.g||(u.g=new Map,u.h=0,u.i&&Gx(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ha.prototype,n.add=function(u,d){ri(this),this.i=null,u=Ks(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function Db(u,d){ri(u),d=Ks(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Sb(u,d){return ri(u),d=Ks(u,d),u.g.has(d)}n.forEach=function(u,d){ri(this),this.g.forEach(function(f,g){f.forEach(function(D){u.call(d,D,g,this)},this)},this)},n.na=function(){ri(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=u[g];for(let N=0;N<D.length;N++)f.push(d[g])}return f},n.V=function(u){ri(this);let d=[];if(typeof u=="string")Sb(this,u)&&(d=d.concat(this.g.get(Ks(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return ri(this),this.i=null,u=Ks(this,u),Sb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Ab(u,d,f){Db(u,d),0<f.length&&(u.i=null,u.g.set(Ks(u,d),A(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let N=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var D=N;F[g]!==""&&(D+="="+encodeURIComponent(String(F[g]))),u.push(D)}}return this.i=u.join("&")};function Ks(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function Jx(u,d){d&&!u.j&&(ri(u),u.i=null,u.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(Db(this,g),Ab(this,D,f))},u)),u.j=d}function Xx(u,d){let f=new Ua;if(a.Image){let g=new Image;g.onload=y(ii,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(ii,f,"TestLoadImage: error",!1,d,g),g.onabort=y(ii,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(ii,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function eO(u,d){let f=new Ua,g=new AbortController,D=setTimeout(()=>{g.abort(),ii(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(N=>{clearTimeout(D),N.ok?ii(f,"TestPingServer: ok",!0,d):ii(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),ii(f,"TestPingServer: error",!1,d)})}function ii(u,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function tO(){this.g=new Lx}function nO(u,d,f){let g=f||"";try{Ib(u,function(D,N){let F=D;l(D)&&(F=jp(D)),d.push(g+N+"="+encodeURIComponent(F))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function qa(u){this.l=u.Ub||null,this.j=u.eb||!1}I(qa,Bp),qa.prototype.g=function(){return new Yu(this.l,this.j)},qa.prototype.i=function(u){return function(){return u}}({});function Yu(u,d){St.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Yu,St),n=Yu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Ga(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ga(this)),this.g&&(this.readyState=3,Ga(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?za(this):Ga(this),this.readyState==3&&Rb(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,za(this))},n.Qa=function(u){this.g&&(this.response=u,za(this))},n.ga=function(){this.g&&za(this)};function za(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ga(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Ga(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nb(u){let d="";return K(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Zp(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Nb(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):He(u,d,f))}function Ye(u){St.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ye,St);var rO=/^https?$/i,iO=["POST","PUT"];n=Ye.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qp.g(),this.v=this.o?sb(this.o):sb(qp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(N){Mb(this,N);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let N of g.keys())f.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iO,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,F]of f)this.g.setRequestHeader(N,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ob(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){Mb(this,N)}};function Mb(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Pb(u),Zu(u)}function Pb(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),Zu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zu(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xb(this):this.bb())},n.bb=function(){xb(this)};function xb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)tb(u.Ea,0,u);else if(Ot(u,"readystatechange"),Er(u)==4){u.h=!1;try{let F=u.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var D=String(u.D).match(bb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!rO.test(D?D.toLowerCase():"")}f=g}if(f)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var N=2<Er(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",Pb(u)}}finally{Zu(u)}}}}function Zu(u,d){if(u.g){Ob(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Ot(u,"ready");try{f.onreadystatechange=g}catch{}}}function Ob(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Fx(d)}};function kb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function sO(u){let d={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(V(u[g]))continue;var f=C(u[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[D]||[];d[D]=N,N.push(f)}b(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wa(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function Fb(u){this.Aa=0,this.i=[],this.j=new Ua,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wa("baseRetryDelayMs",5e3,u),this.cb=Wa("retryDelaySeedMs",1e4,u),this.Wa=Wa("forwardChannelMaxRetries",2,u),this.wa=Wa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new yb(u&&u.concurrentRequestLimit),this.Da=new tO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fb.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){kt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=zb(this,null,this.W),Xu(this)};function Jp(u){if(Lb(u),u.G==3){var d=u.U++,f=wr(u.I);if(He(f,"SID",u.K),He(f,"RID",d),He(f,"TYPE","terminate"),Ka(u,f),d=new ni(u,u.j,d),d.L=2,d.v=Qu(wr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Gb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Gu(d)}qb(u)}function Ju(u){u.g&&(eg(u),u.g.cancel(),u.g=null)}function Lb(u){Ju(u),u.u&&(a.clearTimeout(u.u),u.u=null),el(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Xu(u){if(!vb(u.h)&&!u.s){u.s=!0;var d=u.Ga;G||rt(),Y||(G(),Y=!0),me.add(d,u),u.B=0}}function oO(u,d){return _b(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Va(m(u.Ga,u,d),Hb(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new ni(this,this.j,u),N=this.o;if(this.S&&(N?(N=_(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ub(this,D,d),f=wr(this.I),He(f,"RID",u),He(f,"CVER",22),this.D&&He(f,"X-HTTP-Session-Id",this.D),Ka(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(Nb(N)))+"&"+d:this.m&&Zp(f,this.m,N)),Yp(this.h,D),this.Ua&&He(f,"TYPE","init"),this.P?(He(f,"$req",d),He(f,"SID","null"),D.T=!0,Gp(D,f,null)):Gp(D,f,d),this.G=2}}else this.G==3&&(u?Vb(this,u):this.i.length==0||vb(this.h)||Vb(this))};function Vb(u,d){var f;d?f=d.l:f=u.U++;let g=wr(u.I);He(g,"SID",u.K),He(g,"RID",f),He(g,"AID",u.T),Ka(u,g),u.m&&u.o&&Zp(g,u.m,u.o),f=new ni(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Ub(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Yp(u.h,f),Gp(f,g,d)}function Ka(u,d){u.H&&K(u.H,function(f,g){He(d,g,f)}),u.l&&Ib({},function(f,g){He(d,g,f)})}function Ub(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let F=["count="+f];N==-1?0<f?(N=D[0].g,F.push("ofs="+N)):N=0:F.push("ofs="+N);let Le=!0;for(let wt=0;wt<f;wt++){let Ne=D[wt].g,At=D[wt].map;if(Ne-=N,0>Ne)N=Math.max(0,D[wt].g-100),Le=!1;else try{nO(At,F,"req"+Ne+"_")}catch{g&&g(At)}}if(Le){g=F.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function jb(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;G||rt(),Y||(G(),Y=!0),me.add(d,u),u.v=0}}function Xp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Va(m(u.Fa,u),Hb(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Bb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Va(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Ju(this),Bb(this))};function eg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Bb(u){u.g=new ni(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=wr(u.qa);He(d,"RID","rpc"),He(d,"SID",u.K),He(d,"AID",u.T),He(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(d,"TO",u.ja),He(d,"TYPE","xmlhttp"),Ka(u,d),u.m&&u.o&&Zp(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Qu(wr(d)),f.m=null,f.P=!0,pb(f,u)}n.Za=function(){this.C!=null&&(this.C=null,Ju(this),Xp(this),kt(19))};function el(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function $b(u,d){var f=null;if(u.g==d){el(u),eg(u),u.g=null;var g=2}else if(Qp(u.h,d))f=d.D,wb(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=u.B;g=Hu(),Ot(g,new lb(g,f)),Xu(u)}else jb(u);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&oO(u,d)||g==2&&Xp(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),D){case 1:zi(u,5);break;case 4:zi(u,10);break;case 3:zi(u,6);break;default:zi(u,2)}}}function Hb(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function zi(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let D=!g;g=new qi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wu(g,"https"),Qu(g),D?Xx(g.toString(),f):eO(g.toString(),f)}else kt(2);u.G=0,u.l&&u.l.sa(d),qb(u),Lb(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function qb(u){if(u.G=0,u.ka=[],u.l){let d=Eb(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function zb(u,d,f){var g=f instanceof qi?wr(f):new qi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Ku(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var N=new qi(null);g&&Wu(N,g),d&&(N.g=d),D&&Ku(N,D),f&&(N.l=f),g=N}return f=u.D,d=u.ya,f&&d&&He(g,f,d),He(g,"VER",u.la),Ka(u,g),g}function Gb(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ye(new qa({eb:f})):new Ye(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wb(){}n=Wb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function tl(){}tl.prototype.g=function(u,d){return new zt(u,d)};function zt(u,d){St.call(this),this.g=new Fb(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!V(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Qs(this)}I(zt,St),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Jp(this.g)},zt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=jp(u),u=f);d.i.push(new Hx(d.Ya++,u)),d.G==3&&Xu(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,Jp(this.g),delete this.g,zt.aa.N.call(this)};function Kb(u){$p.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}I(Kb,$p);function Qb(){Hp.call(this),this.status=1}I(Qb,Hp);function Qs(u){this.g=u}I(Qs,Wb),Qs.prototype.ua=function(){Ot(this.g,"a")},Qs.prototype.ta=function(u){Ot(this.g,new Kb(u))},Qs.prototype.sa=function(u){Ot(this.g,new Qb)},Qs.prototype.ra=function(){Ot(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,R_=Gr.createWebChannelTransport=function(){return new tl},A_=Gr.getStatEventTarget=function(){return Hu()},S_=Gr.Event=$i,qh=Gr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qu.NO_ERROR=0,qu.TIMEOUT=8,qu.HTTP_ERROR=6,Jc=Gr.ErrorCode=qu,db.COMPLETE="complete",D_=Gr.EventType=db,ob.EventType=Fa,Fa.OPEN="a",Fa.CLOSE="b",Fa.ERROR="c",Fa.MESSAGE="d",St.prototype.listen=St.prototype.K,Zo=Gr.WebChannel=ob,oq=Gr.FetchXmlHttpFactory=qa,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,C_=Gr.XhrIo=Ye}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});var gR="@firebase/firestore";var _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");var va="10.14.0";var Ts=new Ci("@firebase/firestore");function Xc(){return Ts.logLevel}function q(n,...e){if(Ts.logLevel<=Ie.DEBUG){let t=e.map(uE);Ts.debug(`Firestore (${va}): ${n}`,...t)}}function Wr(n,...e){if(Ts.logLevel<=Ie.ERROR){let t=e.map(uE);Ts.error(`Firestore (${va}): ${n}`,...t)}}function ia(n,...e){if(Ts.logLevel<=Ie.WARN){let t=e.map(uE);Ts.warn(`Firestore (${va}): ${n}`,...t)}}function uE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+n;throw Wr(e),new Error(e)}function Oe(n,e){n||re()}function ae(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends Tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $n=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Qh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},O_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_t.UNAUTHENTICATED))}shutdown(){}},k_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},F_=class{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $n,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $n)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new Qh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new _t(e)}},L_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},V_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new L_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}},U_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},j_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Oe(this.o===void 0);let r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new U_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function aq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Yh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=aq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Pe(n,e){return n<e?-1:n>e?1:0}function sa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ct=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ct(0,0))}static max(){return new n(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(),r===void 0?r=e.length-t:r>e.length-t&&re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},et=class n extends Zh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new W(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},cq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cn=class n extends Zh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return cq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(et.fromString(e))}static fromName(e){return new n(et.fromString(e).popFirst(5))}static empty(){return new n(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new et(e.slice()))}};var B_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};B_.UNKNOWN_ID=-1;function uq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Ct(t+1,0):new Ct(t,r));return new Cs(i,ee.empty(),e)}function lq(n){return new Cs(n.readTime,n.key,-1)}var Cs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),ee.empty(),-1)}static max(){return new n(le.max(),ee.empty(),-1)}};function dq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}var hq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mu(n){return v(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==hq)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function fq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yu(n){return n.name==="IndexedDbTransactionError"}var GR=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Nf(n){return n==null}function su(n){return n===0&&1/n==-1/0}function pq(n){return typeof n=="number"&&Number.isInteger(n)&&!su(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var gq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],see=[...gq,"documentOverlays"],mq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yq=mq,vq=[...yq,"indexConfiguration","indexState","indexEntries"];var oee=[...vq,"globals"];function mR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ms(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tt=class n{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ta(this.root,e,this.comparator,!0)}},ta=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ur=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pt=class n{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jh(this.data.getIterator())}getIteratorFrom(e){return new Jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Jh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Cn=class n{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Pt(cn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xh("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var _q=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(n){if(Oe(!!n),typeof n=="string"){let e=0,t=_q.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(n.seconds),nanos:Ge(n.nanos)}}function Ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oi(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}function lE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function dE(n){let e=n.mapValue.fields.__previous_value__;return lE(e)?dE(e):e}function ou(n){let e=Kr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}var H_=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},ef=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ds(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lE(n)?4:QR(n)?9007199254740991:KR(n)?10:11:re()}function hr(n,e){if(n===e)return!0;let t=Ds(n);if(t!==Ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Kr(i.timestampValue),a=Kr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Oi(i.bytesValue).isEqual(Oi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ge(i.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ge(i.integerValue)===Ge(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ge(i.doubleValue),a=Ge(s.doubleValue);return o===a?su(o)===su(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return sa(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(mR(o)!==mR(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!hr(o[c],a[c])))return!1;return!0}(n,e);default:return re()}}function au(n,e){return(n.values||[]).find(t=>hr(t,e))!==void 0}function oa(n,e){if(n===e)return 0;let t=Ds(n),r=Ds(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ge(s.integerValue||s.doubleValue),c=Ge(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return yR(n.timestampValue,e.timestampValue);case 4:return yR(ou(n),ou(e));case 5:return Pe(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Oi(s),c=Oi(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Pe(a[l],c[l]);if(h!==0)return h}return Pe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Pe(Ge(s.latitude),Ge(o.latitude));return a!==0?a:Pe(Ge(s.longitude),Ge(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vR(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,I=(c=m.value)===null||c===void 0?void 0:c.arrayValue,A=Pe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:vR(y,I)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===zh.mapValue&&o===zh.mapValue)return 0;if(s===zh.mapValue)return 1;if(o===zh.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=Pe(c[p],h[p]);if(m!==0)return m;let y=oa(a[c[p]],l[h[p]]);if(y!==0)return y}return Pe(c.length,h.length)}(n.mapValue,e.mapValue);default:throw re()}}function yR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);let t=Kr(n),r=Kr(e),i=Pe(t.seconds,r.seconds);return i!==0?i:Pe(t.nanos,r.nanos)}function vR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=oa(t[i],r[i]);if(s)return s}return Pe(t.length,r.length)}function aa(n){return q_(n)}function q_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Kr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Oi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=q_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${q_(t.fields[o])}`;return i+"}"}(n.mapValue):re()}function z_(n){return!!n&&"integerValue"in n}function hE(n){return!!n&&"arrayValue"in n}function _R(n){return!!n&&"nullValue"in n}function wR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wh(n){return!!n&&"mapValue"in n}function KR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function tu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ms(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var an=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(t)}setAll(e){let t=cn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=tu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ms(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(tu(this.value))}};function YR(n){let e=[];return Ms(n.fields,(t,r)=>{let i=new cn([t]);if(Wh(r)){let s=YR(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Cn(e)}var Hn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),an.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),an.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ca=class{constructor(e,t){this.position=e,this.inclusive=t}};function ER(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=oa(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function IR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}var ua=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function wq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var tf=class{},gt=class n extends tf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new W_(e,t,r):t==="array-contains"?new Y_(e,r):t==="in"?new Z_(e,r):t==="not-in"?new J_(e,r):t==="array-contains-any"?new X_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new K_(e,r):new Q_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(oa(t,this.value)):t!==null&&Ds(this.value)===Ds(t)&&this.matchesComparison(oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fr=class n extends tf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ZR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ZR(n){return n.op==="and"}function JR(n){return Eq(n)&&ZR(n)}function Eq(n){for(let e of n.filters)if(e instanceof fr)return!1;return!0}function G_(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+aa(n.value);if(JR(n))return n.filters.map(e=>G_(e)).join(",");{let e=n.filters.map(t=>G_(t)).join(",");return`${n.op}(${e})`}}function XR(n,e){return n instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)}(n,e):n instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XR(o,i.filters[a]),!0):!1}(n,e):void re()}function eN(n){return n instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${aa(t.value)}`}(n):n instanceof fr?function(t){return t.op.toString()+" {"+t.getFilters().map(eN).join(" ,")+"}"}(n):"Filter"}var W_=class extends gt{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},K_=class extends gt{constructor(e,t){super(e,"in",t),this.keys=tN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Q_=class extends gt{constructor(e,t){super(e,"not-in",t),this.keys=tN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function tN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var Y_=class extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return hE(t)&&au(t.arrayValue,this.value)}},Z_=class extends gt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&au(this.value.arrayValue,t)}},J_=class extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!au(this.value.arrayValue,t)}},X_=class extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!hE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>au(this.value.arrayValue,r))}};var ew=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function bR(n,e=null,t=[],r=[],i=null,s=null,o=null){return new ew(n,e,t,r,i,s,o)}function fE(n){let e=ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>G_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>aa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>aa(r)).join(",")),e.ue=t}return e.ue}function pE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IR(n.startAt,e.startAt)&&IR(n.endAt,e.endAt)}function tw(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var la=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Iq(n,e,t,r,i,s,o,a){return new la(n,e,t,r,i,s,o,a)}function gE(n){return new la(n)}function TR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bq(n){return n.collectionGroup!==null}function nu(n){let e=ae(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pt(cn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ua(s,r))}),t.has(cn.keyField().canonicalString())||e.ce.push(new ua(cn.keyField(),r))}return e.ce}function lr(n){let e=ae(n);return e.le||(e.le=Tq(e,nu(n))),e.le}function Tq(n,e){if(n.limitType==="F")return bR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ua(i.field,s)});let t=n.endAt?new ca(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ca(n.startAt.position,n.startAt.inclusive):null;return bR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function nw(n,e,t){return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mf(n,e){return pE(lr(n),lr(e))&&n.limitType===e.limitType}function nN(n){return`${fE(lr(n))}|lt:${n.limitType}`}function Jo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>eN(i)).join(", ")}]`),Nf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>aa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>aa(i)).join(",")),`Target(${r})`}(lr(n))}; limitType=${n.limitType})`}function Pf(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of nu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=ER(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,nu(r),i)||r.endAt&&!function(o,a,c){let l=ER(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,nu(r),i))}(n,e)}function Cq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rN(n){return(e,t)=>{let r=!1;for(let i of nu(n)){let s=Dq(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Dq(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?oa(c,l):re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var ki=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return WR(this.inner)}size(){return this.innerSize}};var Sq=new tt(ee.comparator);function Qr(){return Sq}var iN=new tt(ee.comparator);function eu(...n){let e=iN;for(let t of n)e=e.insert(t.key,t);return e}function sN(n){let e=iN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Es(){return ru()}function oN(){return ru()}function ru(){return new ki(n=>n.toString(),(n,e)=>n.isEqual(e))}var Aq=new tt(ee.comparator),Rq=new Pt(ee.comparator);function be(...n){let e=Rq;for(let t of n)e=e.add(t);return e}var Nq=new Pt(Pe);function Mq(){return Nq}function mE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function aN(n){return{integerValue:""+n}}function Pq(n,e){return pq(e)?aN(e):mE(n,e)}var da=class{constructor(){this._=void 0}};function xq(n,e,t){return n instanceof ha?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&lE(s)&&(s=dE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ss?uN(n,e):n instanceof As?lN(n,e):function(i,s){let o=cN(i,s),a=CR(o)+CR(i.Pe);return z_(o)&&z_(i.Pe)?aN(a):mE(i.serializer,a)}(n,e)}function Oq(n,e,t){return n instanceof Ss?uN(n,e):n instanceof As?lN(n,e):t}function cN(n,e){return n instanceof fa?function(r){return z_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ha=class extends da{},Ss=class extends da{constructor(e){super(),this.elements=e}};function uN(n,e){let t=dN(e);for(let r of n.elements)t.some(i=>hr(i,r))||t.push(r);return{arrayValue:{values:t}}}var As=class extends da{constructor(e){super(),this.elements=e}};function lN(n,e){let t=dN(e);for(let r of n.elements)t=t.filter(i=>!hr(i,r));return{arrayValue:{values:t}}}var fa=class extends da{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function CR(n){return Ge(n.integerValue||n.doubleValue)}function dN(n){return hE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function kq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ss&&i instanceof Ss||r instanceof As&&i instanceof As?sa(r.elements,i.elements,hr):r instanceof fa&&i instanceof fa?hr(r.Pe,i.Pe):r instanceof ha&&i instanceof ha}(n.transform,e.transform)}var rw=class{constructor(e,t){this.version=e,this.transformResults=t}},Pi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var pa=class{};function hN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nf(n.key,Pi.none()):new Rs(n.key,n.data,Pi.none());{let t=n.data,r=an.empty(),i=new Pt(cn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new pr(n.key,r,new Cn(i.toArray()),Pi.none())}}function Fq(n,e,t){n instanceof Rs?function(i,s,o){let a=i.value.clone(),c=SR(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof pr?function(i,s,o){if(!Kh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=SR(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(fN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function iu(n,e,t,r){return n instanceof Rs?function(s,o,a,c){if(!Kh(s.precondition,o))return a;let l=s.value.clone(),h=AR(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof pr?function(s,o,a,c){if(!Kh(s.precondition,o))return a;let l=AR(s.fieldTransforms,c,o),h=o.data;return h.setAll(fN(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Kh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Lq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=cN(r.transform,i||null);s!=null&&(t===null&&(t=an.empty()),t.set(r.field,s))}return t||null}function DR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sa(r,i,(s,o)=>kq(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Rs=class extends pa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},pr=class extends pa{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function fN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function SR(n,e,t){let r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Oq(o,a,t[i]))}return r}function AR(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,xq(s,o,e))}return r}var nf=class extends pa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},iw=class extends pa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Fq(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=iu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=iu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=oN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=hN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(t,r)=>DR(t,r))&&sa(this.baseMutations,e.baseMutations,(t,r)=>DR(t,r))}},ow=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=function(){return Aq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var aw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var cw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ut,Ae;function Vq(n){switch(n){default:return re();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function pN(n){if(n===void 0)return Wr("GRPC error has no .code"),M.UNKNOWN;switch(n){case ut.OK:return M.OK;case ut.CANCELLED:return M.CANCELLED;case ut.UNKNOWN:return M.UNKNOWN;case ut.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ut.INTERNAL:return M.INTERNAL;case ut.UNAVAILABLE:return M.UNAVAILABLE;case ut.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ut.NOT_FOUND:return M.NOT_FOUND;case ut.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ut.ABORTED:return M.ABORTED;case ut.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ut.DATA_LOSS:return M.DATA_LOSS;default:return re()}}(Ae=ut||(ut={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";var RR=null;function Uq(){return new TextEncoder}var jq=new Mi([4294967295,4294967295],0);function NR(n){let e=Uq().encode(n),t=new T_;return t.update(e),new Uint8Array(t.digest())}function MR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mi([t,r],0),new Mi([i,s],0)]}var uw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Is(`Invalid padding: ${t}`);if(r<0)throw new Is(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Is(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Is(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Mi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Mi.fromNumber(r)));return i.compare(jq)===1&&(i=new Mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=NR(e),[r,i]=MR(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=NR(e),[r,i]=MR(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Is=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var rf=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new tt(Pe),Qr(),be())}},cu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,be(),be(),be())}};var na=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},sf=class{constructor(e,t){this.targetId=e,this.me=t}},of=class{constructor(e,t,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},af=class{constructor(){this.fe=0,this.ge=xR(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),r=be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re()}}),new cu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=xR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},lw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=PR(),this.Qe=new tt(Pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(tw(s))if(r===0){let o=new ee(s.path);this.Ue(t,o,Hn.newNoDocument(o,le.min()))}else Oe(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}RR?.et(function(h,p,m,y,I){var A,R,P,V,U,$;let Ce={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},K=p.unchangedNames;return K&&(Ce.bloomFilter={applied:I===0,hashCount:(A=K?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(V=(P=(R=K?.bits)===null||R===void 0?void 0:R.bitmap)===null||P===void 0?void 0:P.length)!==null&&V!==void 0?V:0,padding:($=(U=K?.bits)===null||U===void 0?void 0:U.padding)!==null&&$!==void 0?$:0,mightContain:b=>{var _;return(_=y?.mightContain(b))!==null&&_!==void 0&&_}}),Ce}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Oi(r).toUint8Array()}catch(c){if(c instanceof Xh)return ia("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new uw(o,i,s)}catch(c){return ia(c instanceof Is?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&tw(a.target)){let c=new ee(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Hn.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new rf(e,t,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=PR(),this.Qe=new tt(Pe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new af,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pt(Pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new af),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function PR(){return new tt(ee.comparator)}function xR(){return new tt(ee.comparator)}var Bq={asc:"ASCENDING",desc:"DESCENDING"},$q={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hq={and:"AND",or:"OR"},dw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function hw(n,e){return n.useProto3Json||Nf(e)?e:{value:e}}function cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qq(n,e){return cf(n,e.toTimestamp())}function dr(n){return Oe(!!n),le.fromTimestamp(function(t){let r=Kr(t);return new Ct(r.seconds,r.nanos)}(n))}function yE(n,e){return fw(n,e).canonicalString()}function fw(n,e){let t=function(i){return new et(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function mN(n){let e=et.fromString(n);return Oe(EN(e)),e}function pw(n,e){return yE(n.databaseId,e.path)}function N_(n,e){let t=mN(e);if(t.get(1)!==n.databaseId.projectId)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(vN(t))}function yN(n,e){return yE(n.databaseId,e)}function zq(n){let e=mN(n);return e.length===4?et.emptyPath():vN(e)}function gw(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vN(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function OR(n,e,t){return{name:pw(n,e),fields:t.value.mapValue.fields}}function Gq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Oe(h===void 0||typeof h=="string"),xt.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),xt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:pN(l.code);return new W(h,l.message||"")}(o);t=new of(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=N_(n,r.document.name),s=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):le.min(),a=new an({mapValue:{fields:r.document.fields}}),c=Hn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new na(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=N_(n,r.document),s=r.readTime?dr(r.readTime):le.min(),o=Hn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new na([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=N_(n,r.document),s=r.removedTargetIds||[];t=new na([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new cw(i,s),a=r.targetId;t=new sf(a,o)}}return t}function Wq(n,e){let t;if(e instanceof Rs)t={update:OR(n,e.key,e.value)};else if(e instanceof nf)t={delete:pw(n,e.key)};else if(e instanceof pr)t={update:OR(n,e.key,e.data),updateMask:nz(e.fieldMask)};else{if(!(e instanceof iw))return re();t={verify:pw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ha)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ss)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof As)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:qq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(n,e.precondition)),t}function Kq(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?dr(i.updateTime):dr(s);return o.isEqual(le.min())&&(o=dr(s)),new rw(o,i.transformResults||[])}(t,e))):[]}function Qq(n,e){return{documents:[yN(n,e.path)]}}function Yq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yN(n,i);let s=function(l){if(l.length!==0)return wN(fr.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Xo(m.field),direction:Xq(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=hw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function Zq(n){let e=zq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Oe(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let m=_N(p);return m instanceof fr&&JR(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(I){return new ua(ea(I.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Nf(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new ca(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new ca(y,m)}(t.endAt)),Iq(e,i,o,s,a,"F",c,l)}function Jq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _N(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ea(t.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ea(t.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ea(t.unaryFilter.field);return gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ea(t.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(n):n.fieldFilter!==void 0?function(t){return gt.create(ea(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fr.create(t.compositeFilter.filters.map(r=>_N(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(t.compositeFilter.op))}(n):re()}function Xq(n){return Bq[n]}function ez(n){return $q[n]}function tz(n){return Hq[n]}function Xo(n){return{fieldPath:n.canonicalString()}}function ea(n){return cn.fromServerFormat(n.fieldPath)}function wN(n){return n instanceof gt?function(t){if(t.op==="=="){if(wR(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if(_R(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wR(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if(_R(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:ez(t.op),value:t.value}}}(n):n instanceof fr?function(t){let r=t.getFilters().map(i=>wN(i));return r.length===1?r[0]:{compositeFilter:{op:tz(t.op),filters:r}}}(n):re()}function nz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function EN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var uu=class n{constructor(e,t,r,i,s=le.min(),o=le.min(),a=xt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var mw=class{constructor(e){this.ct=e}};function rz(n){let e=Zq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nw(e,e.limit,"L"):e}var uf=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),su(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Kr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Oi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?QR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):KR(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):re()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ge(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};uf.vt=new uf;var yw=class{constructor(){this.un=new vw}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Cs.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},vw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pt(et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(et.comparator)).toArray()}};var cee=new Uint8Array(0);var cr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(41943040,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);var lu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var _w=class{constructor(){this.changes=new ki(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ww=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ew=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&iu(r.mutation,i,Cn.empty(),Ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=be()){let i=Es();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=eu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Es();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,be()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Qr(),o=ru(),a=function(){return ru()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof pr)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),iu(h.mutation,l,h.mutation.getFieldMask(),Ct.now())):o.set(l.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new ww(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ru(),i=new tt((o,a)=>o-a),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Cn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||be()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=oN();h.forEach(m=>{if(!s.has(m)){let y=hN(t.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Es()),a=-1,c=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,be())).next(h=>({batchId:a,changes:sN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=eu();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=function(p,m){return new la(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Hn.newInvalidDocument(h)))});let a=eu();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&iu(h.mutation,l,Cn.empty(),Ct.now()),Pf(t,l)&&(a=a.insert(c,l))}),a})}};var Iw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:rz(i.bundledQuery),readTime:dr(i.readTime)}}(t)),O.resolve()}};var bw=class{constructor(){this.overlays=new tt(ee.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Es();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Es(),s=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tt((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Es(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Es(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aw(t,r));let s=this.Ir.get(t);s===void 0&&(s=be(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Tw=class{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var du=class{constructor(){this.Tr=new Pt(lt.Er),this.dr=new Pt(lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new lt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new lt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ee(new et([])),r=new lt(t,e),i=new lt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ee(new et([])),r=new lt(t,e),i=new lt(t,e+1),s=be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new lt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},lt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||Pe(e.wr,t.wr)}static Ar(e,t){return Pe(e.wr,t.wr)||ee.comparator(e.key,t.key)}};var Cw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pt(lt.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new sw(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new lt(t,0),i=new lt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Pe);return t.forEach(i=>{let s=new lt(i,0),o=new lt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ee.isDocumentKey(s)||(s=s.child(""));let o=new lt(new ee(s),0),a=new Pt(Pe);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let s=new lt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new lt(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Dw=class{constructor(e){this.Mr=e,this.docs=function(){return new tt(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Qr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Hn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Qr(),o=t.path,a=new ee(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||dq(lq(h),r)<=0||(i.has(h.key)||Pf(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){re()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Sw(this)}getSize(e){return O.resolve(this.size)}},Sw=class extends _w{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Aw=class{constructor(e){this.persistence=e,this.Nr=new ki(t=>fE(t),pE),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new du,this.targetCount=0,this.kr=lu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new lu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var Rw=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new GR(0),this.Kr=!1,this.Kr=!0,this.$r=new Tw,this.referenceDelegate=e(this),this.Ur=new Aw(this),this.indexManager=new yw,this.remoteDocumentCache=function(i){return new Dw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mw(t),this.Gr=new Iw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Cw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new Nw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Nw=class extends $_{constructor(e){super(),this.currentSequenceNumber=e}},Mw=class n{constructor(e){this.persistence=e,this.Jr=new du,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Pw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=be(),i=be();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var xw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ow=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return KS()?8:fq(vt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new xw;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Xc()<=Ie.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Xc()<=Ie.DEBUG&&q("QueryEngine","Query:",Jo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Xc()<=Ie.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):O.resolve())}Yi(e,t){if(TR(t))return O.resolve(null);let r=lr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=nw(t,null,"F"),r=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,nw(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return TR(t)||i.isEqual(le.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?O.resolve(null):(Xc()<=Ie.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jo(t)),this.rs(e,o,t,uq(i,-1)).next(a=>a))})}ts(e,t){let r=new Pt(rN(e));return t.forEach((i,s)=>{Pf(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Xc()<=Ie.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Cs.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var kw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new tt(Pe),this._s=new ki(s=>fE(s),pE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ew(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function iz(n,e,t,r){return new kw(n,e,t,r)}function IN(n,e){return v(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=be();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function sz(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=O.resolve();return m.forEach(I=>{y=y.next(()=>h.getEntry(c,I)).next(A=>{let R=l.docVersions.get(I);Oe(R!==null),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=be();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function bN(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function oz(n,e){let t=ae(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(xt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,R,P){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(s,y))});let c=Qr(),l=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(az(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(le.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function az(n,e,t){let r=be(),i=be();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Qr();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function cz(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uz(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new uu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Fw(n,e,t){return v(this,null,function*(){let r=ae(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!yu(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function kR(n,e,t){let r=ae(n),i=le.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=ae(c),m=p._s.get(h);return m!==void 0?O.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:le.min(),t?s:be())).next(a=>(lz(r,Cq(e),a),{documents:a,Ts:s})))}function lz(n,e,t){let r=n.us.get(e)||le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var lf=class{constructor(){this.activeTargetIds=Mq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Lw=class{constructor(){this.so=new lf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new lf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vw=class{_o(e){}shutdown(){}};var df=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Gh=null;function M_(){return Gh===null?Gh=function(){return 268435456+Math.round(2147483648*Math.random())}():Gh++,"0x"+Gh.toString(16)}var dz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Uw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Mt="WebChannelConnection",jw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=M_(),c=this.xo(t,r.toUriEncodedString());q("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(q("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ia("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=dz[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=M_();return new Promise((o,a)=>{let c=new C_;c.setWithCredentials(!0),c.listenOnce(D_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Jc.NO_ERROR:let h=c.getResponseJson();q(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Jc.TIMEOUT:q(Mt,`RPC '${e}' ${s} timed out`),a(new W(M.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:let p=c.getStatus();if(q(Mt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let I=function(R){let P=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(P)>=0?P:M.UNKNOWN}(y.status);a(new W(I,y.message))}else a(new W(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new W(M.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{q(Mt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);q(Mt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=M_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=R_(),a=A_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");q(Mt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),m=!1,y=!1,I=new Uw({Io:R=>{y?q(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(q(Mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),q(Mt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),A=(R,P,V)=>{R.listen(P,U=>{try{V(U)}catch($){setTimeout(()=>{throw $},0)}})};return A(p,Zo.EventType.OPEN,()=>{y||(q(Mt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),A(p,Zo.EventType.CLOSE,()=>{y||(y=!0,q(Mt,`RPC '${e}' stream ${i} transport closed`),I.So())}),A(p,Zo.EventType.ERROR,R=>{y||(y=!0,ia(Mt,`RPC '${e}' stream ${i} transport errored:`,R),I.So(new W(M.UNAVAILABLE,"The operation could not be completed")))}),A(p,Zo.EventType.MESSAGE,R=>{var P;if(!y){let V=R.data[0];Oe(!!V);let U=V,$=U.error||((P=U[0])===null||P===void 0?void 0:P.error);if($){q(Mt,`RPC '${e}' stream ${i} received error:`,$);let Ce=$.status,K=function(w){let T=ut[w];if(T!==void 0)return pN(T)}(Ce),b=$.message;K===void 0&&(K=M.INTERNAL,b="Unknown error status: "+Ce+" with message "+$.message),y=!0,I.So(new W(K,b)),p.close()}else q(Mt,`RPC '${e}' stream ${i} received:`,V),I.bo(V)}}),A(a,S_.STAT_EVENT,R=>{R.stat===qh.PROXY?q(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===qh.NOPROXY&&q(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function P_(){return typeof document<"u"?document:null}function xf(n){return new dw(n,!0)}var hf=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ff=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hf(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new W(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Bw=class extends ff{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Gq(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?dr(o.readTime):le.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=gw(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=tw(c)?{documents:Qq(s,c)}:{query:Yq(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gN(s,o.resumeToken);let l=hw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=cf(s,o.snapshotVersion.toTimestamp());let l=hw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Jq(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=gw(this.serializer),t.removeTarget=e,this.a_(t)}},$w=class extends ff{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Kq(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=gw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Wq(this.serializer,r))};this.a_(t)}};var Hw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,fw(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(M.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,fw(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},qw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wr(t),this.D_=!1):q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var zw=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>v(this,null,function*(){Ps(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=ae(c);l.L_.add(4),yield vu(l),l.q_.set("Unknown"),l.L_.delete(4),yield Of(l)})}(this))}))}),this.q_=new qw(r,i)}};function Of(n){return v(this,null,function*(){if(Ps(n))for(let e of n.B_)yield e(!0)})}function vu(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function TN(n,e){let t=ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),EE(t)?wE(t):_a(t).r_()&&_E(t,e))}function vE(n,e){let t=ae(n),r=_a(t);t.N_.delete(e),r.r_()&&CN(t,e),t.N_.size===0&&(r.r_()?r.o_():Ps(t)&&t.q_.set("Unknown"))}function _E(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).A_(e)}function CN(n,e){n.Q_.xe(e),_a(n).R_(e)}function wE(n){n.Q_=new lw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.q_.v_()}function EE(n){return Ps(n)&&!_a(n).n_()&&n.N_.size>0}function Ps(n){return ae(n).L_.size===0}function DN(n){n.Q_=void 0}function hz(n){return v(this,null,function*(){n.q_.set("Online")})}function fz(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{_E(n,e)})})}function pz(n,e){return v(this,null,function*(){DN(n),EE(n)?(n.q_.M_(e),wE(n)):n.q_.set("Unknown")})}function gz(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof of&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pf(n,r)}else if(e instanceof na?n.Q_.Ke(e):e instanceof sf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(le.min()))try{let r=yield bN(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(xt.EMPTY_BYTE_STRING,h.snapshotVersion)),CN(s,c);let p=new uu(h.target,c,l,h.sequenceNumber);_E(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){q("RemoteStore","Failed to raise snapshot:",r),yield pf(n,r)}})}function pf(n,e,t){return v(this,null,function*(){if(!yu(e))throw e;n.L_.add(1),yield vu(n),n.q_.set("Offline"),t||(t=()=>bN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Of(n)}))})}function SN(n,e){return e().catch(t=>pf(n,t,e))}function kf(n){return v(this,null,function*(){let e=ae(n),t=Fi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mz(e);)try{let i=yield cz(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,yz(e,i)}catch(i){yield pf(e,i)}AN(e)&&RN(e)})}function mz(n){return Ps(n)&&n.O_.length<10}function yz(n,e){n.O_.push(e);let t=Fi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function AN(n){return Ps(n)&&!Fi(n).n_()&&n.O_.length>0}function RN(n){Fi(n).start()}function vz(n){return v(this,null,function*(){Fi(n).p_()})}function _z(n){return v(this,null,function*(){let e=Fi(n);for(let t of n.O_)e.m_(t.mutations)})}function wz(n,e,t){return v(this,null,function*(){let r=n.O_.shift(),i=ow.from(r,e,t);yield SN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield kf(n)})}function Ez(n,e){return v(this,null,function*(){e&&Fi(n).V_&&(yield function(r,i){return v(this,null,function*(){if(function(o){return Vq(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Fi(r).s_(),yield SN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield kf(r)}})}(n,e)),AN(n)&&RN(n)})}function FR(n,e){return v(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let r=Ps(t);t.L_.add(3),yield vu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Of(t)})}function Iz(n,e){return v(this,null,function*(){let t=ae(n);e?(t.L_.delete(2),yield Of(t)):e||(t.L_.add(2),yield vu(t),t.q_.set("Unknown"))})}function _a(n){return n.K_||(n.K_=function(t,r,i){let s=ae(t);return s.w_(),new Bw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:hz.bind(null,n),Ro:fz.bind(null,n),mo:pz.bind(null,n),d_:gz.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),EE(n)?wE(n):n.q_.set("Unknown")):(yield n.K_.stop(),DN(n))}))),n.K_}function Fi(n){return n.U_||(n.U_=function(t,r,i){let s=ae(t);return s.w_(),new $w(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vz.bind(null,n),mo:Ez.bind(null,n),f_:_z.bind(null,n),g_:wz.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.U_.s_(),yield kf(n)):(yield n.U_.stop(),n.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Gw=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function IE(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),yu(n))return new W(M.UNAVAILABLE,`${e}: ${n}`);throw n}var gf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=eu(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var mf=class{constructor(){this.W_=new tt(ee.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ga=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,gf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ww=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Kw=class{constructor(){this.queries=LR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ae(t),s=i.queries;i.queries=LR(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new W(M.ABORTED,"Firestore shutting down"))}};function LR(){return new ki(n=>nN(n),Mf)}function NN(n,e){return v(this,null,function*(){let t=ae(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Ww,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=IE(o,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&bE(t)})}function MN(n,e){return v(this,null,function*(){let t=ae(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function bz(n,e){let t=ae(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&bE(t)}function Tz(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function bE(n){n.Y_.forEach(e=>{e.next()})}var Qw,VR;(VR=Qw||(Qw={})).ea="default",VR.Cache="cache";var yf=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qw.Cache}};var vf=class{constructor(e){this.key=e}},_f=class{constructor(e){this.key=e}},Yw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=rN(e),this.Ra=new gf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new mf,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Pf(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?I!==A&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(y?(o=o.add(y),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,I){let A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return A(y)-A(I)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new ga(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new _f(r))}),this.da.forEach(r=>{e.has(r)||t.push(new vf(r))}),t}ba(e){this.Ta=e.Ts,this.da=be();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ga.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Zw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Jw=class{constructor(e){this.key=e,this.va=!1}},Xw=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ki(a=>nN(a),Mf),this.Ma=new Map,this.xa=new Set,this.Oa=new tt(ee.comparator),this.Na=new Map,this.La=new du,this.Ba={},this.ka=new Map,this.qa=lu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Cz(n,e,t=!0){return v(this,null,function*(){let r=LN(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield PN(r,e,t,!0),i})}function Dz(n,e){return v(this,null,function*(){let t=LN(n);yield PN(t,e,!0,!1)})}function PN(n,e,t,r){return v(this,null,function*(){let i=yield uz(n.localStore,lr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Sz(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&TN(n.remoteStore,i),a})}function Sz(n,e,t,r,i){return v(this,null,function*(){n.Ka=(p,m,y)=>function(A,R,P,V){return v(this,null,function*(){let U=R.view.ma(P);U.ns&&(U=yield kR(A.localStore,R.query,!1).then(({documents:b})=>R.view.ma(b,U)));let $=V&&V.targetChanges.get(R.targetId),Ce=V&&V.targetMismatches.get(R.targetId)!=null,K=R.view.applyChanges(U,A.isPrimaryClient,$,Ce);return jR(A,R.targetId,K.wa),K.snapshot})}(n,p,m,y);let s=yield kR(n.localStore,e,!0),o=new Yw(e,s.Ts),a=o.ma(s.documents),c=cu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);jR(n,t,l.wa);let h=new Zw(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Az(n,e,t){return v(this,null,function*(){let r=ae(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Mf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Fw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&vE(r.remoteStore,i.targetId),eE(r,i.targetId)}).catch(mu))):(eE(r,i.targetId),yield Fw(r.localStore,i.targetId,!0))})}function Rz(n,e){return v(this,null,function*(){let t=ae(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vE(t.remoteStore,r.targetId))})}function Nz(n,e,t){return v(this,null,function*(){let r=Lz(n);try{let i=yield function(o,a){let c=ae(o),l=Ct.now(),h=a.reduce((y,I)=>y.add(I.key),be()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Qr(),A=be();return c.cs.getEntries(y,h).next(R=>{I=R,I.forEach((P,V)=>{V.isValidDocument()||(A=A.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(R=>{p=R;let P=[];for(let V of a){let U=Lq(V,p.get(V.key).overlayedDocument);U!=null&&P.push(new pr(V.key,U,YR(U.value.mapValue),Pi.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(R=>{m=R;let P=R.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(y,R.batchId,P)})}).then(()=>({batchId:m.batchId,changes:sN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new tt(Pe)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield _u(r,i.changes),yield kf(r.remoteStore)}catch(i){let s=IE(i,"Failed to persist write");t.reject(s)}})}function xN(n,e){return v(this,null,function*(){let t=ae(n);try{let r=yield oz(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Oe(o.va):i.removedDocuments.size>0&&(Oe(o.va),o.va=!1))}),yield _u(t,r,e)}catch(r){yield mu(r)}})}function UR(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ae(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&bE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mz(n,e,t){return v(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new tt(ee.comparator);o=o.insert(s,Hn.newNoDocument(s,le.min()));let a=be().add(s),c=new rf(le.min(),new Map,new tt(Pe),o,a);yield xN(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),TE(r)}else yield Fw(r.localStore,e,!1).then(()=>eE(r,e,t)).catch(mu)})}function Pz(n,e){return v(this,null,function*(){let t=ae(n),r=e.batch.batchId;try{let i=yield sz(t.localStore,e);kN(t,r,null),ON(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _u(t,i)}catch(i){yield mu(i)}})}function xz(n,e,t){return v(this,null,function*(){let r=ae(n);try{let i=yield function(o,a){let c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Oe(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);kN(r,e,t),ON(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _u(r,i)}catch(i){yield mu(i)}})}function ON(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function kN(n,e,t){let r=ae(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function eE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||FN(n,r)})}function FN(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(vE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),TE(n))}function jR(n,e,t){for(let r of t)r instanceof vf?(n.La.addReference(r.key,e),Oz(n,r)):r instanceof _f?(q("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||FN(n,r.key)):re()}function Oz(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(q("SyncEngine","New document in limbo: "+t),n.xa.add(r),TE(n))}function TE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ee(et.fromString(e)),r=n.qa.next();n.Na.set(r,new Jw(t)),n.Oa=n.Oa.insert(t,r),TN(n.remoteStore,new uu(lr(gE(t.path)),r,"TargetPurposeLimboResolution",GR.oe))}}function _u(n,e,t){return v(this,null,function*(){let r=ae(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Pw.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return v(this,null,function*(){let h=ae(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>O.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!yu(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),I=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(I);h.os=h.os.insert(m,A)}}})}(r.localStore,s))})}function kz(n,e){return v(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let r=yield IN(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new W(M.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _u(t,r.hs)}})}function Fz(n,e){let t=ae(n),r=t.Na.get(e);if(r&&r.va)return be().add(r.key);{let i=be(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function LN(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mz.bind(null,e),e.Ca.d_=bz.bind(null,e.eventManager),e.Ca.$a=Tz.bind(null,e.eventManager),e}function Lz(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xz.bind(null,e),e}var BR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=xf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return iz(this.persistence,new Ow,t.initialUser,this.serializer)}Ga(t){return new Rw(Mw.Zr,this.serializer)}Wa(t){return new Lw}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Vz=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>UR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kz.bind(null,this.syncEngine),yield Iz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Kw}()}createDatastore(t){let r=xf(t.databaseInfo.databaseId),i=function(o){return new jw(o)}(t.databaseInfo);return function(o,a,c,l){return new Hw(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new zw(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>UR(this.syncEngine,r,0),function(){return df.D()?new df:new Vw}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,p){let m=new Xw(s,o,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(s){return v(this,null,function*(){let o=ae(s);q("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield vu(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var wf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var tE=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=Yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>v(this,null,function*(){q("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=IE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function x_(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield IN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function $R(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Uz(n);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>FR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>FR(e.remoteStore,i)),n._onlineComponents=e})}function Uz(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield x_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ia("Error using user provided cache. Falling back to memory cache: "+t),yield x_(n,new BR)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield x_(n,new BR);return n._offlineComponents})}function VN(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield $R(n,n._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield $R(n,new Vz))),n._onlineComponents})}function jz(n){return VN(n).then(e=>e.syncEngine)}function UN(n){return v(this,null,function*(){let e=yield VN(n),t=e.eventManager;return t.onListen=Cz.bind(null,e.syncEngine),t.onUnlisten=Az.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Dz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rz.bind(null,e.syncEngine),t})}function Bz(n,e,t={}){let r=new $n;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,c,l){let h=new wf({next:m=>{h.Za(),o.enqueueAndForget(()=>MN(s,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new W(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new W(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new yf(gE(a.path),h,{includeMetadataChanges:!0,_a:!0});return NN(s,p)}(yield UN(n),n.asyncQueue,e,t,r)})),r.promise}function $z(n,e,t={}){let r=new $n;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,c,l){let h=new wf({next:m=>{h.Za(),o.enqueueAndForget(()=>MN(s,p)),m.fromCache&&c.source==="server"?l.reject(new W(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new yf(a,h,{includeMetadataChanges:!0,_a:!0});return NN(s,p)}(yield UN(n),n.asyncQueue,e,t,r)})),r.promise}function jN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var HR=new Map;function BN(n,e,t){if(!t)throw new W(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Hz(n,e,t,r){if(e===!0&&r===!0)throw new W(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qR(n){if(!ee.isDocumentKey(n))throw new W(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zR(n){if(ee.isDocumentKey(n))throw new W(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re()}function Yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new W(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=CE(n);throw new W(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Ef=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ma=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ef({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ef(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O_;switch(r.type){case"firstParty":return new V_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=HR.get(t);r&&(q("ComponentProvider","Removing Datastore"),HR.delete(t),r.terminate())}(this),Promise.resolve()}};function $N(n,e,t,r={}){var i;let s=(n=Yr(n,ma))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=_t.MOCK_USER;else{a=fh(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new W(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new _t(l)}n._authCredentials=new k_(new Qh(a,c))}}var If=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},qt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},xi=class n extends If{constructor(e,t,r){super(e,t,gE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function HN(n,e,...t){if(n=Ue(n),BN("collection","path",e),n instanceof ma){let r=et.fromString(e,...t);return zR(r),new xi(n,null,r)}{if(!(n instanceof qt||n instanceof xi))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(et.fromString(e,...t));return zR(r),new xi(n.firestore,null,r)}}function qN(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=Yh.newId()),BN("doc","path",e),n instanceof ma){let r=et.fromString(e,...t);return qR(r),new qt(n,null,new ee(r))}{if(!(n instanceof qt||n instanceof xi))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(et.fromString(e,...t));return qR(r),new qt(n.firestore,n instanceof xi?n.converter:null,new ee(r))}}var bf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hf(this,"async_queue_retry"),this.Vu=()=>{let r=P_();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=P_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=P_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new $n;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yu(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Wr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Gw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Ns=class extends ma{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bf(e),this._firestoreClient=void 0,yield e}})}};function zN(n,e){let t=typeof n=="object"?n:Un(),r=typeof n=="string"?n:e||"(default)",i=Tn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=hh("firestore");s&&$N(i,...s)}return i}function DE(n){if(n._terminated)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qz(n),n._firestoreClient}function qz(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new H_(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jN(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new tE(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var hu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(xt.fromBase64String(e))}catch(t){throw new W(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ya=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fu=class{constructor(e){this._methodName=e}};var pu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}};var gu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var zz=/^__.*__$/,nE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rs(e,this.data,t,this.fieldTransforms)}},Tf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new pr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function GN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var rE=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Df(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GN(this.Cu)&&zz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},iE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xf(e)}Qu(e,t,r,i=!1){return new rE({Cu:e,methodName:t,qu:r,path:cn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function WN(n){let e=n._freezeSettings(),t=xf(n._databaseId);return new iE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Gz(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);SE("Data must be an object, but it was:",o,r);let a=KN(r,o),c,l;if(s.merge)c=new Cn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=sE(e,p,t);if(!o.contains(m))throw new W(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YN(h,m)||h.push(m)}c=new Cn(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new nE(new an(a),c,l)}var Cf=class n extends fu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Wz(n,e,t,r){let i=n.Qu(1,e,t);SE("Data must be an object, but it was:",i,r);let s=[],o=an.empty();Ms(r,(c,l)=>{let h=AE(e,c,t);l=Ue(l);let p=i.Nu(h);if(l instanceof Cf)s.push(h);else{let m=Ff(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Cn(s);return new Tf(o,a,i.fieldTransforms)}function Kz(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[sE(e,r,t)],c=[i];if(s.length%2!=0)throw new W(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(sE(e,s[m])),c.push(s[m+1]);let l=[],h=an.empty();for(let m=a.length-1;m>=0;--m)if(!YN(l,a[m])){let y=a[m],I=c[m];I=Ue(I);let A=o.Nu(y);if(I instanceof Cf)l.push(y);else{let R=Ff(I,A);R!=null&&(l.push(y),h.set(y,R))}}let p=new Cn(l);return new Tf(h,p,o.fieldTransforms)}function Ff(n,e){if(QN(n=Ue(n)))return SE("Unsupported field value:",e,n),KN(n,e);if(n instanceof fu)return function(r,i){if(!GN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Ff(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Pq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ct.fromDate(r);return{timestampValue:cf(i.serializer,s)}}if(r instanceof Ct){let s=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cf(i.serializer,s)}}if(r instanceof pu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hu)return{bytesValue:gN(i.serializer,r._byteString)};if(r instanceof qt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return mE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${CE(r)}`)}(n,e)}function KN(n,e){let t={};return WR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(n,(r,i)=>{let s=Ff(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function QN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof pu||n instanceof hu||n instanceof qt||n instanceof fu||n instanceof gu)}function SE(n,e,t){if(!QN(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=CE(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function sE(n,e,t){if((e=Ue(e))instanceof ya)return e._internalPath;if(typeof e=="string")return AE(n,e);throw Df("Field path arguments must be of type string or ",n,!1,void 0,t)}var Qz=new RegExp("[~\\*/\\[\\]]");function AE(n,e,t){if(e.search(Qz)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ya(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Df(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new W(M.INVALID_ARGUMENT,a+n+c)}function YN(n,e){return n.some(t=>t.isEqual(e))}var Sf=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new oE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ZN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},oE=class extends Sf{data(){return super.data()}};function ZN(n,e){return typeof e=="string"?AE(n,e):e instanceof ya?e._internalPath:e._delegate._internalPath}function Yz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new W(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var aE=class{convertValue(e,t="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ms(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ge(o.doubleValue));return new gu(s)}convertGeoPoint(e){return new pu(Ge(e.latitude),Ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=dE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){let t=Kr(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=et.fromString(e);Oe(EN(r));let i=new ef(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(t)||Wr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Zz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var bs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Af=class extends Sf{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ZN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ra=class extends Af{data(e={}){return super.data(e)}},cE=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ra(this._firestore,this._userDataWriter,r.key,r,new bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Jz(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Jz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}function JN(n){n=Yr(n,qt);let e=Yr(n.firestore,Ns);return Bz(DE(e),n._key).then(t=>Xz(e,n,t))}var Rf=class extends aE{constructor(e){super(),this.firestore=e}convertBytes(e){return new hu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}};function XN(n){n=Yr(n,If);let e=Yr(n.firestore,Ns),t=DE(e),r=new Rf(e);return Yz(n._query),$z(t,n._query).then(i=>new cE(e,r,n,i))}function eM(n,e,t){n=Yr(n,qt);let r=Yr(n.firestore,Ns),i=Zz(n.converter,e,t);return nM(r,[Gz(WN(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Pi.none())])}function tM(n,e,t,...r){n=Yr(n,qt);let i=Yr(n.firestore,Ns),s=WN(i),o;return o=typeof(e=Ue(e))=="string"||e instanceof ya?Kz(s,"updateDoc",n._key,e,t,r):Wz(s,"updateDoc",n._key,e),nM(i,[o.toMutation(n._key,Pi.exists(!0))])}function nM(n,e){return function(r,i){let s=new $n;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Nz(yield jz(r),i,s)})),s.promise}(DE(n),e)}function Xz(n,e,t){let r=t.docs.get(e._key),i=new Rf(n);return new Af(n,i,e._key,r,new bs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){va=i})(ir),Nt(new ct("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ns(new F_(r.getProvider("auth-internal")),new j_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new W(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ef(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Me(gR,"4.7.3",e),Me(gR,"4.7.3","esm2017")})();var un=class{constructor(e){return e}},rM="firestore",RE=class{constructor(){return jr(rM)}};var NE=new z("angularfire2.firestore-instances");function eG(n,e){let t=Ai(rM,n,e);return t&&new un(t)}function tG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new un(r)}}var nG={provide:RE,deps:[[new We,NE]]},rG={provide:un,useFactory:eG,deps:[[new We,NE],sn]};function iM(n,...e){return Me("angularfire",jn.full,"fst"),$t([rG,nG,{provide:NE,useFactory:tG(n),multi:!0,deps:[de,pt,sr,Bn,[new We,ws],[new We,Si],...e]}])}var Lf=ze(HN,!0);var Dn=ze(qN,!0);var wa=ze(JN,!0);var Vf=ze(XN,!0);var sM=ze(zN,!0);var wu=ze(eM,!0);var oM=ze(tM,!0);function iG(n,e){if(n&1){let t=yt();L(0,"li")(1,"a",6),Ee("click",function(){ke(t);let i=pe();return Fe(i.navigateTo("/login"))}),ne(2,"Login"),j()()}}function sG(n,e){if(n&1){let t=yt();L(0,"li")(1,"a",7),Ee("click",function(){ke(t);let i=pe();return Fe(i.navigateTo("/registro"))}),ne(2,"Registro"),j()()}}function oG(n,e){if(n&1){let t=yt();L(0,"li")(1,"a",8),Ee("click",function(){ke(t);let i=pe();return Fe(i.navigateTo("/seccion-usuarios"))}),ne(2,"Usuarios"),j()()}}function aG(n,e){if(n&1){let t=yt();L(0,"li")(1,"a",9),Ee("click",function(){ke(t);let i=pe();return Fe(i.cerrarSesion())}),ne(2,"Cerrar Sesi\xF3n"),j()()}}function cG(n,e){n&1&&(L(0,"div",10),Xe(1,"div",11),j())}function uG(n,e){n&1&&(L(0,"div")(1,"h2"),ne(2,"Bienvenido a la Cl\xEDnica XYZ"),j(),L(3,"p"),ne(4,"Seleccione una opci\xF3n para comenzar..."),j()())}var jf=class n{constructor(e,t,r){this.router=e;this.auth=t;this.firestore=r}isAdmin=!1;isLoggedIn=!1;isLoading=!0;ngOnInit(){setTimeout(()=>{this.isLoading=!1},2e3);let e=jh();lR(e,t=>v(this,null,function*(){if(t){this.isLoggedIn=!0;let r=Dn(this.firestore,"administradores",t.uid);(yield wa(r)).exists()&&(this.isAdmin=!0)}else this.isLoggedIn=!1,this.isAdmin=!1}))}navigateTo(e){this.router.navigate([e])}cerrarSesion(){return v(this,null,function*(){try{yield hR(this.auth),this.router.navigate(["/home"])}catch(e){console.error("Error al cerrar sesi\xF3n: ",e)}})}static \u0275fac=function(t){return new(t||n)(Z(rr),Z(on),Z(un))};static \u0275cmp=Qt({type:n,selectors:[["app-home"]],standalone:!0,features:[En],decls:14,vars:6,consts:[[1,"navbar"],[1,"navbar__container"],[1,"navbar__brand"],[1,"navbar__links"],[4,"ngIf"],["class","loading-spinner-container",4,"ngIf"],["routerLink","/login","routerLinkActive","active",1,"navbar__link",3,"click"],["routerLink","/registro","routerLinkActive","active",1,"navbar__link",3,"click"],["routerLink","/seccion-usuarios","routerLinkActive","active",1,"navbar__link",3,"click"],["routerLinkActive","active",1,"navbar__link",3,"click"],[1,"loading-spinner-container"],[1,"loading-spinner"]],template:function(t,r){t&1&&(L(0,"header",0)(1,"div",1)(2,"div",2)(3,"h1"),ne(4,"Cl\xEDnica XYZ"),j()(),L(5,"nav",3)(6,"ul"),je(7,iG,3,0,"li",4)(8,sG,3,0,"li",4)(9,oG,3,0,"li",4)(10,aG,3,0,"li",4),j()()()(),L(11,"main"),je(12,cG,2,0,"div",5)(13,uG,5,0,"div",4),j()),t&2&&(te(7),se("ngIf",!r.isLoggedIn),te(),se("ngIf",!r.isLoggedIn),te(),se("ngIf",r.isAdmin),te(),se("ngIf",r.isLoggedIn),te(2),se("ngIf",r.isLoading),te(),se("ngIf",!r.isLoading))},dependencies:[In,bi],styles:[".navbar[_ngcontent-%COMP%]{background-color:#00796b;color:#fff;padding:1rem}.navbar__container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.navbar__brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.navbar__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;gap:1rem;margin:0;padding:0}.navbar__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .navbar__link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:600;cursor:pointer;transition:color .3s}.navbar__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .navbar__link[_ngcontent-%COMP%]:hover{color:#b2dfdb}main[_ngcontent-%COMP%]{padding:2rem;text-align:center}main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.loading-spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.loading-spinner[_ngcontent-%COMP%]{border:8px solid #f3f3f3;border-top:8px solid #3498db;border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var mM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Z(Or),Z(xr))}}static{this.\u0275dir=Je({type:n})}}return n})(),Jf=(()=>{class n extends mM{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})()}static{this.\u0275dir=Je({type:n,features:[Jt]})}}return n})(),Du=new z("");var lG={provide:Du,useExisting:er(()=>Ui),multi:!0};function dG(){let n=tr()?tr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var hG=new z(""),Ui=(()=>{class n extends mM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(Or),Z(xr),Z(hG,8))}}static{this.\u0275dir=Je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ee("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[kr([lG]),Jt]})}}return n})();function Li(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function yM(n){return n!=null&&typeof n.length=="number"}var FE=new z(""),vM=new z(""),fG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Te=class{static min(e){return pG(e)}static max(e){return gG(e)}static required(e){return _M(e)}static requiredTrue(e){return mG(e)}static email(e){return yG(e)}static minLength(e){return vG(e)}static maxLength(e){return _G(e)}static pattern(e){return wG(e)}static nullValidator(e){return qf(e)}static compose(e){return CM(e)}static composeAsync(e){return SM(e)}};function pG(n){return e=>{if(Li(e.value)||Li(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function gG(n){return e=>{if(Li(e.value)||Li(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function _M(n){return Li(n.value)?{required:!0}:null}function mG(n){return n.value===!0?null:{required:!0}}function yG(n){return Li(n.value)||fG.test(n.value)?null:{email:!0}}function vG(n){return e=>Li(e.value)||!yM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function _G(n){return e=>yM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function wG(n){if(!n)return qf;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Li(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function qf(n){return null}function wM(n){return n!=null}function EM(n){return os(n)?it(n):n}function IM(n){let e={};return n.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function bM(n,e){return e.map(t=>t(n))}function EG(n){return!n.validate}function TM(n){return n.map(e=>EG(e)?e:t=>e.validate(t))}function CM(n){if(!n)return null;let e=n.filter(wM);return e.length==0?null:function(t){return IM(bM(t,e))}}function DM(n){return n!=null?CM(TM(n)):null}function SM(n){if(!n)return null;let e=n.filter(wM);return e.length==0?null:function(t){let r=bM(t,e).map(EM);return Tg(r).pipe(ye(IM))}}function AM(n){return n!=null?SM(TM(n)):null}function aM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RM(n){return n._rawValidators}function NM(n){return n._rawAsyncValidators}function ME(n){return n?Array.isArray(n)?n:[n]:[]}function zf(n,e){return Array.isArray(n)?n.includes(e):n===e}function cM(n,e){let t=ME(e);return ME(n).forEach(i=>{zf(t,i)||t.push(i)}),t}function uM(n,e){return ME(e).filter(t=>!zf(n,t))}var Gf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ba=class extends Gf{get formDirective(){return null}get path(){return null}},Cu=class extends Gf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Wf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},IG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Zte=oe(k({},IG),{"[class.ng-submitted]":"isSubmitted"}),Ca=(()=>{class n extends Wf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(Cu,2))}}static{this.\u0275dir=Je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Od("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Jt]})}}return n})(),Da=(()=>{class n extends Wf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(ba,10))}}static{this.\u0275dir=Je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Od("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Jt]})}}return n})();var Eu="VALID",$f="INVALID",Ea="PENDING",Iu="DISABLED",Vi=class{},Kf=class extends Vi{constructor(e,t){super(),this.value=e,this.source=t}},bu=class extends Vi{constructor(e,t){super(),this.pristine=e,this.source=t}},Tu=class extends Vi{constructor(e,t){super(),this.touched=e,this.source=t}},Ia=class extends Vi{constructor(e,t){super(),this.status=e,this.source=t}},PE=class extends Vi{constructor(e){super(),this.source=e}},xE=class extends Vi{constructor(e){super(),this.source=e}};function LE(n){return(Xf(n)?n.validators:n)||null}function bG(n){return Array.isArray(n)?DM(n):n||null}function VE(n,e){return(Xf(e)?e.asyncValidators:n)||null}function TG(n){return Array.isArray(n)?AM(n):n||null}function Xf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function MM(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new x(1e3,"");if(!r[t])throw new x(1001,"")}function PM(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new x(1002,"")})}var Ta=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=gc(()=>this.statusReactive()),this.statusReactive=fc(void 0),this._pristine=gc(()=>this.pristineReactive()),this.pristineReactive=fc(!0),this._touched=gc(()=>this.touchedReactive()),this.touchedReactive=fc(!1),this._events=new Et,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Fr(this.statusReactive)}set status(e){Fr(()=>this.statusReactive.set(e))}get valid(){return this.status===Eu}get invalid(){return this.status===$f}get pending(){return this.status==Ea}get disabled(){return this.status===Iu}get enabled(){return this.status!==Iu}get pristine(){return Fr(this.pristineReactive)}set pristine(e){Fr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Fr(this.touchedReactive)}set touched(e){Fr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uM(e,this._rawAsyncValidators))}hasValidator(e){return zf(this._rawValidators,e)}hasAsyncValidator(e){return zf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Tu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Tu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new bu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new bu(!0,r))}markAsPending(e={}){this.status=Ea;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ia(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Iu,this.errors=null,this._forEachChild(i=>{i.disable(oe(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kf(this.value,r)),this._events.next(new Ia(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Eu,this._forEachChild(r=>{r.enable(oe(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Eu||this.status===Ea)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kf(this.value,t)),this._events.next(new Ia(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Iu:Eu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ea,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=EM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ia(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Iu:this.errors?$f:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ea)?Ea:this._anyControlsHaveStatus($f)?$f:Eu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new bu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Tu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=TG(this._rawAsyncValidators)}},Qf=class extends Ta{constructor(e,t,r){super(LE(t),VE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){PM(this,!0,e),Object.keys(e).forEach(r=>{MM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var OE=class extends Qf{};var xM=new z("CallSetDisabledState",{providedIn:"root",factory:()=>UE}),UE="always";function CG(n,e){return[...e.path,n]}function lM(n,e,t=UE){jE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),SG(n,e),RG(n,e),AG(n,e),DG(n,e)}function dM(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Zf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Yf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function jE(n,e){let t=RM(n);e.validator!==null?n.setValidators(aM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=NM(n);e.asyncValidator!==null?n.setAsyncValidators(aM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Yf(e._rawValidators,i),Yf(e._rawAsyncValidators,i)}function Zf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=RM(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=NM(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Yf(e._rawValidators,r),Yf(e._rawAsyncValidators,r),t}function SG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OM(n,e)})}function AG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function RG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function NG(n,e){n==null,jE(n,e)}function MG(n,e){return Zf(n,e)}function PG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function xG(n){return Object.getPrototypeOf(n.constructor)===Jf}function OG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ui?t=s:xG(s)?r=s:i=s}),i||r||t||null}function FG(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Hf=class extends Ta{constructor(e=null,t,r){super(LE(t),VE(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(fM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var LG=n=>n instanceof Hf;var Sa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),VG={provide:Du,useExisting:er(()=>Su),multi:!0},Su=(()=>{class n extends Jf{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})()}static{this.\u0275dir=Je({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ee("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[kr([VG]),Jt]})}}return n})();var kM=new z("");var UG={provide:ba,useExisting:er(()=>xs)},xs=(()=>{class n extends ba{get submitted(){return Fr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=gc(()=>this._submittedReactive()),this._submittedReactive=fc(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new at,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return lM(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){dM(t.control||null,t,!1),FG(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),OG(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new PE(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new xE(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(dM(r||null,t),LG(i)&&(lM(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);NG(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&MG(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jE(this.form,this),this._oldForm&&Zf(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(Z(FE,10),Z(vM,10),Z(xM,8))}}static{this.\u0275dir=Je({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Ee("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[kr([UG]),Jt,Mr]})}}return n})();var jG={provide:Cu,useExisting:er(()=>Os)},Os=(()=>{class n extends Cu{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new at,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kG(this,s)}ngOnChanges(t){this._added||this._setUpControl(),PG(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return CG(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Z(ba,13),Z(FE,10),Z(vM,10),Z(Du,10),Z(kM,8))}}static{this.\u0275dir=Je({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[kr([jG]),Jt,Mr]})}}return n})(),BG={provide:Du,useExisting:er(()=>ep),multi:!0};function FM(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function $G(n){return n.split(":")[0]}var ep=(()=>{class n extends Jf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=FM(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=$G(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})()}static{this.\u0275dir=Je({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ee("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[kr([BG]),Jt]})}}return n})(),LM=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(FM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Z(xr),Z(Or),Z(ep,9))}}static{this.\u0275dir=Je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),HG={provide:Du,useExisting:er(()=>VM),multi:!0};function pM(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qG(n){return n.split(":")[0]}var VM=(()=>{class n extends Jf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=qG(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})()}static{this.\u0275dir=Je({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ee("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[kr([HG]),Jt]})}}return n})(),UM=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(pM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(pM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Z(xr),Z(Or),Z(VM,9))}}static{this.\u0275dir=Je({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var zG=(()=>{class n{constructor(){this._validator=qf}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):qf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Je({type:n,features:[Mr]})}}return n})();var GG={provide:FE,useExisting:er(()=>ks),multi:!0};var ks=(()=>{class n extends zG{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ud,this.createValidator=t=>_M}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})()}static{this.\u0275dir=Je({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&xd("required",i._enabled?"":null)},inputs:{required:"required"},features:[kr([GG]),Jt]})}}return n})();var WG=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),kE=class extends Ta{constructor(e,t,r){super(LE(t),VE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){PM(this,!1,e),e.forEach((r,i)=>{MM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function gM(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Aa=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return gM(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Qf(i,s)}record(t,r=null){let i=this._reduceControls(t);return new OE(i,r)}control(t,r,i){let s={};return this.useNonNullable?(gM(r)?s=r:(s.validators=r,s.asyncValidators=i),new Hf(t,oe(k({},s),{nonNullable:!0}))):new Hf(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new kE(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Hf)return t;if(t instanceof Ta)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ra=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kM,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xM,useValue:t.callSetDisabledState??UE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Kt({imports:[WG]})}}return n})();var GM="firebasestorage.googleapis.com",WM="storageBucket",KG=2*60*1e3,QG=10*60*1e3;var nt=class n extends Tt{constructor(e,t,r=0){super($E(e),`Firebase Storage: ${t} (${$E(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $E(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},st=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(st||{});function $E(n){return"storage/"+n}function KE(){let n="An unknown error occurred, please check the error payload for server response.";return new nt(st.UNKNOWN,n)}function YG(n){return new nt(st.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function ZG(n){return new nt(st.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function JG(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nt(st.UNAUTHENTICATED,n)}function XG(){return new nt(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function e4(n){return new nt(st.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function t4(){return new nt(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function n4(){return new nt(st.CANCELED,"User canceled the upload/download.")}function r4(n){return new nt(st.INVALID_URL,"Invalid URL '"+n+"'.")}function i4(n){return new nt(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function s4(){return new nt(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WM+"' property when initializing the app?")}function o4(){return new nt(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function a4(){return new nt(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c4(n){return new nt(st.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function HE(n){return new nt(st.INVALID_ARGUMENT,n)}function KM(){return new nt(st.APP_DELETED,"The Firebase app was deleted.")}function u4(n){return new nt(st.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ru(n,e){return new nt(st.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Au(n){throw new nt(st.INTERNAL_ERROR,"Internal error: "+n)}var qn=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw i4(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l($){$.path_=decodeURIComponent($.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),I={bucket:1,path:3},A=t===GM?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",P=new RegExp(`^https?://${A}/${i}/${R}`,"i"),U=[{regex:a,indices:c,postModify:s},{regex:y,indices:I,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let $=0;$<U.length;$++){let Ce=U[$],K=Ce.regex.exec(e);if(K){let b=K[Ce.indices.bucket],_=K[Ce.indices.path];_||(_=""),r=new n(b,_),Ce.postModify(r);break}}if(r==null)throw r4(e);return r}},qE=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function l4(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,n(y,c())},R)}function m(){s&&clearTimeout(s)}function y(R,...P){if(l){m();return}if(R){m(),h.call(null,R,...P);return}if(c()||o){m(),h.call(null,R,...P);return}r<64&&(r*=2);let U;a===1?(a=2,U=0):U=(r+Math.random())*1e3,p(U)}let I=!1;function A(R){I||(I=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,A(!0)},t),A}function d4(n){n(!1)}function h4(n){return n!==void 0}function f4(n){return typeof n=="object"&&!Array.isArray(n)}function QE(n){return typeof n=="string"||n instanceof String}function jM(n){return YE()&&n instanceof Blob}function YE(){return typeof Blob<"u"}function BM(n,e,t,r){if(r<e)throw HE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw HE(`Invalid value for '${n}'. Expected ${t} or less.`)}function ZE(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function QM(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Ma=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Ma||{});function p4(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var zE=class{constructor(e,t,r,i,s,o,a,c,l,h,p,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,I)=>{this.resolve_=y,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Na(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Ma.NO_ERROR,c=s.getStatus();if(!a||p4(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Ma.ABORT;r(!1,new Na(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Na(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());h4(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=KE();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?KM():n4();o(c)}else{let c=t4();o(c)}};this.canceled_?t(!1,new Na(!1,null,!0)):this.backoffId_=l4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&d4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Na=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function g4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function m4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function y4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function v4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function _4(n,e,t,r,i,s,o=!0){let a=QM(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return y4(l,e),g4(l,t),m4(l,s),v4(l,r),new zE(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function w4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function E4(...n){let e=w4();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(YE())return new Blob(n);throw new nt(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function I4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function b4(n){if(typeof atob>"u")throw c4("base-64");return atob(n)}var gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Nu=class{constructor(e,t){this.data=e,this.contentType=t||null}};function T4(n,e){switch(n){case gr.RAW:return new Nu(YM(e));case gr.BASE64:case gr.BASE64URL:return new Nu(ZM(n,e));case gr.DATA_URL:return new Nu(D4(e),S4(e))}throw KE()}function YM(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function C4(n){let e;try{e=decodeURIComponent(n)}catch{throw Ru(gr.DATA_URL,"Malformed data URL.")}return YM(e)}function ZM(n,e){switch(n){case gr.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ru(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ru(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=b4(e)}catch(i){throw i.message.includes("polyfill")?i:Ru(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var np=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ru(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=A4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function D4(n){let e=new np(n);return e.base64?ZM(gr.BASE64,e.rest):C4(e.rest)}function S4(n){return new np(n).contentType}function A4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var rp=class n{constructor(e,t){let r=0,i="";jM(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(jM(this.data_)){let r=this.data_,i=I4(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(YE()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(E4.apply(null,t))}else{let t=e.map(o=>QE(o)?T4(gr.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function JM(n){let e;try{e=JSON.parse(n)}catch{return null}return f4(e)?e:null}function R4(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function N4(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function XM(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function M4(n,e){return e}var Dt=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||M4}},tp=null;function P4(n){return!QE(n)||n.length<2?n:XM(n)}function eP(){if(tp)return tp;let n=[];n.push(new Dt("bucket")),n.push(new Dt("generation")),n.push(new Dt("metageneration")),n.push(new Dt("name","fullPath",!0));function e(s,o){return P4(o)}let t=new Dt("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new Dt("size");return i.xform=r,n.push(i),n.push(new Dt("timeCreated")),n.push(new Dt("updated")),n.push(new Dt("md5Hash",null,!0)),n.push(new Dt("cacheControl",null,!0)),n.push(new Dt("contentDisposition",null,!0)),n.push(new Dt("contentEncoding",null,!0)),n.push(new Dt("contentLanguage",null,!0)),n.push(new Dt("contentType",null,!0)),n.push(new Dt("metadata","customMetadata",!0)),tp=n,tp}function x4(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new qn(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function O4(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return x4(r,n),r}function tP(n,e,t){let r=JM(e);return r===null?null:O4(n,r,t)}function k4(n,e,t,r){let i=JM(e);if(i===null||!QE(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=n.bucket,p=n.fullPath,m="/b/"+o(h)+"/o/"+o(p),y=ZE(m,t,r),I=QM({alt:"media",token:l});return y+I})[0]}function F4(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var ip=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function nP(n){if(!n)throw KE()}function L4(n,e){function t(r,i){let s=tP(n,i,e);return nP(s!==null),s}return t}function V4(n,e){function t(r,i){let s=tP(n,i,e);return nP(s!==null),k4(s,i,n.host,n._protocol)}return t}function rP(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=XG():i=JG():t.getStatus()===402?i=ZG(n.bucket):t.getStatus()===403?i=e4(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function U4(n){let e=rP(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=YG(n.path)),s.serverResponse=i.serverResponse,s}return t}function j4(n,e,t){let r=e.fullServerUrl(),i=ZE(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new ip(i,s,V4(n,t),o);return a.errorHandler=U4(e),a}function B4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function $4(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=B4(null,e)),r}function H4(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let U="";for(let $=0;$<2;$++)U=U+Math.random().toString().slice(2);return U}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let l=$4(e,r,i),h=F4(l,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+c+"--",y=rp.getBlob(p,r,m);if(y===null)throw o4();let I={name:l.fullPath},A=ZE(s,n.host,n._protocol),R="POST",P=n.maxUploadRetryTime,V=new ip(A,R,L4(n,t),P);return V.urlParams=I,V.headers=o,V.body=y.uploadData(),V.errorHandler=rP(e),V}var rne=256*1024;var $M=null,GE=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ma.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ma.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ma.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Au("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Au("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Au("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Au("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Au("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},WE=class extends GE{initXhr(){this.xhr_.responseType="text"}};function iP(){return $M?$M():new WE}var Pa=class n{constructor(e,t){this._service=e,t instanceof qn?this._location=t:this._location=qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XM(this._location.path)}get storage(){return this._service}get parent(){let e=R4(this._location.path);if(e===null)return null;let t=new qn(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw u4(e)}};function q4(n,e,t){n._throwIfRoot("uploadBytes");let r=H4(n.storage,n._location,eP(),new rp(e,!0),t);return n.storage.makeRequestWithTokens(r,iP).then(i=>({metadata:i,ref:n}))}function z4(n){n._throwIfRoot("getDownloadURL");let e=j4(n.storage,n._location,eP());return n.storage.makeRequestWithTokens(e,iP).then(t=>{if(t===null)throw a4();return t})}function G4(n,e){let t=N4(n._location.path,e),r=new qn(n._location.bucket,t);return new Pa(n.storage,r)}function W4(n){return/^[A-Za-z]+:\/\//.test(n)}function K4(n,e){return new Pa(n,e)}function sP(n,e){if(n instanceof Mu){let t=n;if(t._bucket==null)throw s4();let r=new Pa(t,t._bucket);return e!=null?sP(r,e):r}else return e!==void 0?G4(n,e):n}function Q4(n,e){if(e&&W4(e)){if(n instanceof Mu)return K4(n,e);throw HE("To use ref(service, url), the first argument must be a Storage instance.")}else return sP(n,e)}function HM(n,e){let t=e?.[WM];return t==null?null:qn.makeFromBucketSpec(t,n)}function Y4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:fh(i,n.app.options.projectId))}var Mu=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=GM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KG,this._maxUploadRetryTime=QG,this._requests=new Set,i!=null?this._bucket=qn.makeFromBucketSpec(i,this._host):this._bucket=HM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=HM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pa(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new qE(KM());{let o=_4(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},qM="@firebase/storage",zM="0.13.2";var oP="storage";function aP(n,e,t){return n=Ue(n),q4(n,e,t)}function cP(n){return n=Ue(n),z4(n)}function uP(n,e){return n=Ue(n),Q4(n,e)}function lP(n=Un(),e){n=Ue(n);let r=Tn(n,oP).getImmediate({identifier:e}),i=hh("storage");return i&&dP(r,...i),r}function dP(n,e,t,r={}){Y4(n,e,t,r)}function Z4(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Mu(t,r,i,e,ir)}function J4(){Nt(new ct(oP,Z4,"PUBLIC").setMultipleInstances(!0)),Me(qM,zM,""),Me(qM,zM,"esm2017")}J4();var zn=class{constructor(e){return e}},hP="storage",JE=class{constructor(){return jr(hP)}};var XE=new z("angularfire2.storage-instances");function X4(n,e){let t=Ai(hP,n,e);return t&&new zn(t)}function e3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zn(r)}}var t3={provide:JE,deps:[[new We,XE]]},n3={provide:zn,useFactory:X4,deps:[[new We,XE],sn]};function fP(n,...e){return Me("angularfire",jn.full,"gcs"),$t([n3,t3,{provide:XE,useFactory:e3(n),multi:!0,deps:[de,pt,sr,Bn,[new We,ws],[new We,Si],...e]}])}var Fs=ze(cP,!0);var pP=ze(lP,!0);var Ls=ze(uP,!0);var Pu=ze(aP,!0);function r3(n,e){n&1&&(L(0,"div",2),Xe(1,"div",3),j())}function i3(n,e){if(n&1&&Xe(0,"img",13),n&2){let t=pe().$implicit;ly("alt",t.nombre),se("src",t.imagenPerfil,Cd)}}function s3(n,e){if(n&1){let t=yt();L(0,"button",11),Ee("click",function(){let i=ke(t).$implicit,s=pe(2);return Fe(s.loginConAccesoRapido(i))}),je(1,i3,1,2,"img",12),L(2,"span"),ne(3),j()()}if(n&2){let t=e.$implicit;te(),se("ngIf",t.imagenPerfil),te(2),Xt(t.nombre)}}function o3(n,e){if(n&1){let t=yt();L(0,"div",4)(1,"h2"),ne(2,"Login"),j(),L(3,"form",5),Ee("ngSubmit",function(){ke(t);let i=pe();return Fe(i.login())}),Xe(4,"input",6)(5,"input",7),L(6,"button",8),ne(7,"Login"),j()(),L(8,"div",9),je(9,s3,4,2,"button",10),j()()}if(n&2){let t=pe();te(3),se("formGroup",t.loginForm),te(6),se("ngForOf",t.usuariosAccesoRapido)}}var sp=class n{constructor(e,t,r,i,s){this.fb=e;this.auth=t;this.firestore=r;this.router=i;this.storage=s;this.loginForm=this.fb.group({mail:["",[Te.required,Te.email]],contrasena:["",[Te.required,Te.minLength(6)]]})}loginForm;usuariosAccesoRapido=[{nombre:"Paciente 1",mail:"marimonz@yopmail.com",contrasena:"101010"},{nombre:"Paciente 2",mail:"paciente2@example.com",contrasena:"password2"},{nombre:"Paciente 3",mail:"paciente3@example.com",contrasena:"password3"},{nombre:"Especialista 1",mail:"gusgomez@yopmail.com",contrasena:"101010"},{nombre:"Especialista 2",mail:"especialista2@example.com",contrasena:"password5"},{nombre:"Admin",mail:"admin2@admin2.com",contrasena:"101010"}];isLoading=!0;ngOnInit(){this.cargarUsuariosAccesoRapido(),setTimeout(()=>{this.isLoading=!1},2e3)}cargarUsuariosAccesoRapido(){return v(this,null,function*(){try{for(let e of this.usuariosAccesoRapido){let t=Dn(this.firestore,"usuarios",e.mail),r=yield wa(t);if(r.exists()){let i=r.data();if(i.imagenPerfil){let s=Ls(this.storage,i.imagenPerfil);try{let o=yield Fs(s);e.imagenPerfil=o}catch(o){console.error("Error al obtener la URL de la imagen: ",o),e.imagenPerfil="assets/images/default.jpg"}}else e.imagenPerfil="assets/images/default.jpg"}else console.warn(`No se encontr\xF3 el documento para el usuario con el mail ${e.mail}`),e.imagenPerfil="assets/images/default.jpg"}}catch(e){console.error("Error al cargar usuarios de acceso r\xE1pido: ",e)}})}login(){return v(this,null,function*(){if(this.loginForm.valid){let{mail:e,contrasena:t}=this.loginForm.value;try{let i=(yield dR(this.auth,e,t)).user,s=Dn(this.firestore,"administradores",i.uid);if((yield wa(s)).exists())this.router.navigate(["/home"]);else if(i.emailVerified){let a=Dn(this.firestore,"especialistas",i.uid),c=yield wa(a);if(c.exists()){let l=c.data();l&&l.aprobado?this.router.navigate(["/home"]):alert("Su cuenta a\xFAn no ha sido aprobada por un administrador.")}else this.router.navigate(["/home"])}else alert("Por favor verifique su correo electr\xF3nico antes de iniciar sesi\xF3n.")}catch(r){console.error("Error al iniciar sesi\xF3n: ",r),alert("Error al iniciar sesi\xF3n, verifique sus credenciales e intente nuevamente.")}}else alert("Por favor complete todos los campos correctamente")})}loginConAccesoRapido(e){this.loginForm.setValue({mail:e.mail,contrasena:e.contrasena})}static \u0275fac=function(t){return new(t||n)(Z(Aa),Z(on),Z(un),Z(rr),Z(zn))};static \u0275cmp=Qt({type:n,selectors:[["app-login"]],standalone:!0,features:[En],decls:2,vars:2,consts:[["class","loading-spinner-container",4,"ngIf"],["class","login-container",4,"ngIf"],[1,"loading-spinner-container"],[1,"loading-spinner"],[1,"login-container"],[3,"ngSubmit","formGroup"],["formControlName","mail","type","email","placeholder","Email","required",""],["formControlName","contrasena","type","password","placeholder","Contrase\xF1a","required",""],["type","submit"],[1,"fav-buttons-container"],["class","fav-button",3,"click",4,"ngFor","ngForOf"],[1,"fav-button",3,"click"],[3,"src","alt",4,"ngIf"],[3,"src","alt"]],template:function(t,r){t&1&&je(0,r3,2,0,"div",0)(1,o3,10,2,"div",1),t&2&&(se("ngIf",r.isLoading),te(),se("ngIf",!r.isLoading))},dependencies:[Ra,Sa,Ui,Ca,Da,ks,xs,Os,In,ko,bi],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:auto;background-color:#e0f7fa;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;text-align:center}h2[_ngcontent-%COMP%]{color:#00695c}button[_ngcontent-%COMP%]{margin:10px;padding:10px;background-color:#00695c;color:#fff;border:none;border-radius:5px;cursor:pointer}button[type=submit][_ngcontent-%COMP%]{background-color:#00796b}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#004d40}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:5px}.fav-buttons-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;display:flex;flex-direction:column;gap:10px}.fav-button[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#00796b;color:#fff;border:none;padding:10px;border-radius:50%;cursor:pointer;transition:transform .3s}.fav-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.fav-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin-right:10px}.fav-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.fav-button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{display:inline;margin-left:10px}.loading-spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.loading-spinner[_ngcontent-%COMP%]{border:8px solid #f3f3f3;border-top:8px solid #3498db;border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var fe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(fe||{}),mr="*";function gP(n,e){return{type:fe.Trigger,name:n,definitions:e,options:{}}}function tI(n,e=null){return{type:fe.Animate,styles:e,timings:n}}function mP(n,e=null){return{type:fe.Sequence,steps:n,options:e}}function Vs(n){return{type:fe.Style,styles:n,offset:null}}function nI(n,e,t=null){return{type:fe.Transition,expr:n,animation:e,options:t}}var ji=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},xu=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},op="!";var yP=(()=>{class n{constructor(t){this.zone=t,this.scriptElemId="ngx-catpcha-script",this.windowGrecaptcha="grecaptcha",this.windowGrecaptchaEnterprise="enterprise",this.windowOnLoadCallbackProperty="ngx_captcha_onload_callback",this.windowOnLoadEnterpriseCallbackProperty="ngx_captcha_onload_enterprise_callback",this.globalDomain="recaptcha.net",this.defaultDomain="google.com",this.enterpriseApi="enterprise.js",this.defaultApi="api.js"}registerCaptchaScript(t,r,i,s){if(this.grecaptchaScriptLoaded(t.useEnterprise)){t.useEnterprise?this.zone.run(()=>{i(window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise])}):this.zone.run(()=>{i(window[this.windowGrecaptcha])});return}t.useEnterprise?window[this.getCallbackName(!0)]=()=>this.zone.run(i.bind(this,window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise])):window[this.getCallbackName(!1)]=()=>this.zone.run(i.bind(this,window[this.windowGrecaptcha]));let o=document.createElement("script");o.id=this.scriptElemId,o.innerHTML="",o.src=this.getCaptchaScriptUrl(t,r,s),o.async=!0,o.defer=!0,document.getElementsByTagName("head")[0].appendChild(o)}cleanup(){let t=document.getElementById(this.scriptElemId);t&&t.remove(),window[this.getCallbackName()]=void 0,window[this.windowGrecaptcha]=void 0}grecaptchaScriptLoaded(t){return!window[this.getCallbackName(t)]||!window[this.windowGrecaptcha]?!1:t&&window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise]?!0:!!window[this.windowGrecaptcha].execute}getCallbackName(t){return t?this.windowOnLoadEnterpriseCallbackProperty:this.windowOnLoadCallbackProperty}getLanguageParam(t){return t?`&hl=${t}`:""}getCaptchaScriptUrl(t,r,i){let s=t.useGlobalDomain?this.globalDomain:this.defaultDomain,o=t.useEnterprise?this.enterpriseApi:this.defaultApi,a=this.getCallbackName(t.useEnterprise);return`https://www.${s}/recaptcha/${o}?onload=${a}&render=${r}${this.getLanguageParam(i)}`}}return n.\u0275fac=function(t){return new(t||n)(X(de))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var a3=(()=>{class n{constructor(t,r){this.scriptService=t,this.zone=r}execute(t,r,i,s,o){this.executeAsPromise(t,r,s).then(i).catch(a=>o?o(a):console.error(a))}executeAsPromise(t,r,i){return new Promise((s,o)=>{let a=i||{},c=l=>{this.zone.runOutsideAngular(()=>{try{l.execute(t,{action:r}).then(h=>this.zone.run(()=>s(h)))}catch(h){o(h)}})};this.scriptService.registerCaptchaScript(a,t,c)})}}return n.\u0275fac=function(t){return new(t||n)(X(yP),X(de))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yt({type:n}),n.\u0275inj=Kt({providers:[yP,a3],imports:[In]}),n})();function c3(n,e){n&1&&(L(0,"div",3),Xe(1,"div",4),j())}function u3(n,e){if(n&1){let t=yt();L(0,"div",7)(1,"button",8),Ee("click",function(){ke(t);let i=pe(2);return Fe(i.tipoUsuario="Paciente")}),Xe(2,"div",9),L(3,"span",10),ne(4,"Registrar Paciente"),j()(),L(5,"button",8),Ee("click",function(){ke(t);let i=pe(2);return Fe(i.tipoUsuario="Especialista")}),Xe(6,"div",11),L(7,"span",10),ne(8,"Registrar Especialista"),j()()()}}function l3(n,e){n&1&&(L(0,"div",25)(1,"small"),ne(2,"El nombre es requerido"),j()())}function d3(n,e){n&1&&(L(0,"div",25)(1,"small"),ne(2,"El apellido es requerido"),j()())}function h3(n,e){n&1&&(L(0,"div",25)(1,"small"),ne(2,"La edad debe ser entre 1 y 120 a\xF1os"),j()())}function f3(n,e){n&1&&(L(0,"div",25)(1,"small"),ne(2,"El DNI debe ser un n\xFAmero v\xE1lido de 7 u 8 d\xEDgitos"),j()())}function p3(n,e){n&1&&(L(0,"div",25)(1,"small"),ne(2,"Debe ingresar un email v\xE1lido"),j()())}function g3(n,e){n&1&&(L(0,"div",25)(1,"small"),ne(2,"La contrase\xF1a debe tener al menos 6 caracteres"),j()())}function m3(n,e){if(n&1){let t=yt();L(0,"div"),Xe(1,"input",26),L(2,"input",27),Ee("change",function(i){ke(t);let s=pe(3);return Fe(s.onFileChange(i,"imagenes"))}),j()()}}function y3(n,e){if(n&1&&(L(0,"option",32),ne(1),j()),n&2){let t=e.$implicit;se("value",t),te(),Xt(t)}}function v3(n,e){if(n&1){let t=yt();L(0,"div"),Xe(1,"input",33,0),L(3,"button",30),Ee("click",function(){ke(t);let i=SD(2),s=pe(4);return s.agregarEspecialidad(i.value),Fe(s.mostrarNuevaEspecialidad=!1)}),ne(4,"Guardar Especialidad"),j()()}}function _3(n,e){if(n&1){let t=yt();L(0,"div")(1,"select",28),je(2,y3,2,2,"option",29),j(),L(3,"button",30),Ee("click",function(){ke(t);let i=pe(3);return Fe(i.mostrarNuevaEspecialidad=!0)}),ne(4,"Agregar Nueva Especialidad"),j(),je(5,v3,5,0,"div",2),L(6,"input",31),Ee("change",function(i){ke(t);let s=pe(3);return Fe(s.onFileChange(i,"imagenPerfil"))}),j()()}if(n&2){let t=pe(3);te(2),se("ngForOf",t.especialidades),te(3),se("ngIf",t.mostrarNuevaEspecialidad)}}function w3(n,e){if(n&1&&(L(0,"p",34),ne(1),j()),n&2){let t=pe(3);te(),Xt(t.errorMessage)}}function E3(n,e){if(n&1){let t=yt();L(0,"div",12)(1,"h2"),ne(2),j(),L(3,"form",13),Ee("ngSubmit",function(){ke(t);let i=pe(2);return Fe(i.registrar())}),L(4,"input",14),Ee("blur",function(){let i;ke(t);let s=pe(2);return Fe((i=s.registroForm.get("nombre"))==null?null:i.markAsTouched())}),j(),je(5,l3,3,0,"div",15),L(6,"input",16),Ee("blur",function(){let i;ke(t);let s=pe(2);return Fe((i=s.registroForm.get("apellido"))==null?null:i.markAsTouched())}),j(),je(7,d3,3,0,"div",15),L(8,"input",17),Ee("blur",function(){let i;ke(t);let s=pe(2);return Fe((i=s.registroForm.get("edad"))==null?null:i.markAsTouched())}),j(),je(9,h3,3,0,"div",15),L(10,"input",18),Ee("blur",function(){let i;ke(t);let s=pe(2);return Fe((i=s.registroForm.get("dni"))==null?null:i.markAsTouched())}),j(),je(11,f3,3,0,"div",15),L(12,"input",19),Ee("blur",function(){let i;ke(t);let s=pe(2);return Fe((i=s.registroForm.get("mail"))==null?null:i.markAsTouched())}),j(),je(13,p3,3,0,"div",15),L(14,"input",20),Ee("blur",function(){let i;ke(t);let s=pe(2);return Fe((i=s.registroForm.get("contrasena"))==null?null:i.markAsTouched())}),j(),je(15,g3,3,0,"div",15)(16,m3,3,0,"div",2)(17,_3,7,2,"div",2),L(18,"div",21)(19,"re-captcha",22),Ee("resolved",function(i){ke(t);let s=pe(2);return Fe(s.handleCaptchaResponse(i))}),j()(),L(20,"button",23),ne(21,"Registrar"),j()(),je(22,w3,2,1,"p",24),j()}if(n&2){let t,r,i,s,o,a,c=pe(2);se("@formAnimation",void 0),te(2),xo("Registro de ",c.tipoUsuario,""),te(),se("formGroup",c.registroForm),te(2),se("ngIf",((t=c.registroForm.get("nombre"))==null?null:t.touched)&&((t=c.registroForm.get("nombre"))==null?null:t.invalid)),te(2),se("ngIf",((r=c.registroForm.get("apellido"))==null?null:r.touched)&&((r=c.registroForm.get("apellido"))==null?null:r.invalid)),te(2),se("ngIf",((i=c.registroForm.get("edad"))==null?null:i.touched)&&((i=c.registroForm.get("edad"))==null?null:i.invalid)),te(2),se("ngIf",((s=c.registroForm.get("dni"))==null?null:s.touched)&&((s=c.registroForm.get("dni"))==null?null:s.invalid)),te(2),se("ngIf",((o=c.registroForm.get("mail"))==null?null:o.touched)&&((o=c.registroForm.get("mail"))==null?null:o.invalid)),te(2),se("ngIf",((a=c.registroForm.get("contrasena"))==null?null:a.touched)&&((a=c.registroForm.get("contrasena"))==null?null:a.invalid)),te(),se("ngIf",c.tipoUsuario==="Paciente"),te(),se("ngIf",c.tipoUsuario==="Especialista"),te(2),se("siteKey",c.siteKey),te(3),se("ngIf",c.errorMessage)}}function I3(n,e){if(n&1&&(L(0,"div"),je(1,u3,9,0,"div",5)(2,E3,23,13,"div",6),j()),n&2){let t=pe();te(),se("ngIf",!t.tipoUsuario),te(),se("ngIf",t.tipoUsuario)}}var ap=class n{constructor(e,t,r,i,s){this.fb=e;this.firestore=t;this.auth=r;this.storage=i;this.router=s;this.registroForm=this.fb.group({nombre:["",Te.required],apellido:["",Te.required],edad:["",[Te.required,Te.min(1),Te.max(120)]],dni:["",[Te.required,Te.pattern(/^[0-9]{7,8}$/)]],mail:["",[Te.required,Te.email]],contrasena:["",[Te.required,Te.minLength(6)]],obraSocial:[""],especialidad:["",this.tipoUsuario==="Especialista"?Te.required:[]],imagenes:[null,this.tipoUsuario==="Paciente"?Te.required:[]],imagenPerfil:[null,this.tipoUsuario==="Especialista"?Te.required:[]]})}registroForm;tipoUsuario=null;especialidades=["Cardiolog\xEDa","Pediatr\xEDa","Neurolog\xEDa"];errorMessage="";mostrarNuevaEspecialidad=!1;siteKey="6LeZj30qAAAAAB-KhPqsQ9-bHu-DJxyPTHYoiu8g";recaptchaResponse=null;isLoading=!0;ngOnInit(){setTimeout(()=>{this.isLoading=!1},2e3)}onFileChange(e,t){let r=e.target;r?.files&&r.files.length>0&&this.registroForm.get(t)?.setValue(r.files)}handleCaptchaResponse(e){this.recaptchaResponse=e}registrar(){return v(this,null,function*(){if(this.registroForm.valid&&this.recaptchaResponse){let e=this.registroForm.value;try{let t=yield Uh(this.auth,e.mail,e.contrasena);yield Bh(t.user);let r=[];if(e.imagenes&&e.imagenes.length>0)for(let o=0;o<e.imagenes.length;o++){let a=e.imagenes[o],c=`pacientes/${t.user.uid}/imagenes/${a.name}`,l=Ls(this.storage,c);yield Pu(l,a);let h=yield Fs(l);r.push(h)}let i="";if(this.tipoUsuario==="Especialista"&&e.imagenPerfil&&e.imagenPerfil.length>0){let o=e.imagenPerfil[0],a=`especialistas/${t.user.uid}/imagenPerfil/${o.name}`,c=Ls(this.storage,a);yield Pu(c,o),i=yield Fs(c)}let s=oe(k({},e),{imagenes:r.length>0?r:null,imagenPerfil:i||null});this.tipoUsuario==="Paciente"?(yield wu(Dn(this.firestore,"pacientes",t.user.uid),s),this.errorMessage="Paciente registrado con \xE9xito. Por favor verifique su correo electr\xF3nico.",this.router.navigate(["/home"])):(yield wu(Dn(this.firestore,"especialistas",t.user.uid),oe(k({},s),{aprobado:!1})),this.errorMessage="Especialista registrado con \xE9xito. Por favor verifique su correo electr\xF3nico.",this.router.navigate(["/home"]))}catch(t){console.error("Error al registrar: ",t),this.errorMessage="Hubo un error al registrar, por favor intente nuevamente"}}else this.errorMessage="Por favor complete todos los campos correctamente y valide el reCAPTCHA."})}agregarEspecialidad(e){e&&!this.especialidades.includes(e)&&this.especialidades.push(e)}static \u0275fac=function(t){return new(t||n)(Z(Aa),Z(un),Z(on),Z(zn),Z(rr))};static \u0275cmp=Qt({type:n,selectors:[["app-registro"]],standalone:!0,features:[En],decls:2,vars:2,consts:[["nuevaEspecialidadInput",""],["class","loading-spinner-container",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner-container"],[1,"loading-spinner"],["class","registro-container",4,"ngIf"],["class","registro-form",4,"ngIf"],[1,"registro-container"],[1,"registro-boton",3,"click"],[1,"registro-imagen","registro-paciente"],[1,"registro-texto"],[1,"registro-imagen","registro-especialista"],[1,"registro-form"],[3,"ngSubmit","formGroup"],["formControlName","nombre","placeholder","Nombre","required","",3,"blur"],["class","error",4,"ngIf"],["formControlName","apellido","placeholder","Apellido","required","",3,"blur"],["type","number","formControlName","edad","placeholder","Edad","required","",3,"blur"],["formControlName","dni","placeholder","DNI","required","",3,"blur"],["formControlName","mail","type","email","placeholder","Email","required","",3,"blur"],["formControlName","contrasena","type","password","placeholder","Contrase\xF1a","required","",3,"blur"],[1,"recaptcha-container"],[3,"resolved","siteKey"],["type","submit"],["class","error-message",4,"ngIf"],[1,"error"],["formControlName","obraSocial","placeholder","Obra Social"],["type","file","multiple","","required","",3,"change"],["formControlName","especialidad"],[3,"value",4,"ngFor","ngForOf"],["type","button",3,"click"],["type","file","required","",3,"change"],[3,"value"],["type","text","placeholder","Nueva Especialidad"],[1,"error-message"]],template:function(t,r){t&1&&je(0,c3,2,0,"div",1)(1,I3,3,2,"div",2),t&2&&(se("ngIf",r.isLoading),te(),se("ngIf",!r.isLoading))},dependencies:[Ra,Sa,LM,UM,Ui,Su,ep,Ca,Da,ks,xs,Os,In,ko,bi,vP],styles:['.registro-container[_ngcontent-%COMP%]{max-width:600px;margin:100px auto;text-align:center}.registro-boton[_ngcontent-%COMP%]{width:80%;margin:20px auto;padding:40px;display:flex;align-items:center;justify-content:center;background-color:#e0f7fa;border:none;border-radius:20px;cursor:pointer;box-shadow:0 0 15px #0003;transition:transform .3s ease}.registro-boton[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.registro-imagen[_ngcontent-%COMP%]{height:50px;width:50px;margin-right:10px;background-size:cover;background-position:center}.registro-paciente[_ngcontent-%COMP%]{background-image:url("./media/paciente-FWZFZ44Z.png")}.registro-especialista[_ngcontent-%COMP%]{background-image:url("./media/especialista-E7B4R3S5.png")}.registro-form[_ngcontent-%COMP%]{max-width:600px;margin:auto;background-color:#e0f7fa;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000001a;text-align:center;animation:_ngcontent-%COMP%_fadeIn 1s cubic-bezier(.25,1,.5,1)}h2[_ngcontent-%COMP%]{color:#00695c}button[_ngcontent-%COMP%]{margin:10px;padding:10px;background-color:#00695c;color:#fff;border:none;border-radius:5px;cursor:pointer}button.active[_ngcontent-%COMP%]{background-color:#004d40}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:5px}input[type=file][_ngcontent-%COMP%]{border:none}button[type=submit][_ngcontent-%COMP%]{background-color:#00796b}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#004d40}.error-message[_ngcontent-%COMP%]{color:red;font-weight:700;margin-top:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-30px) scale(.9)}50%{opacity:.5;transform:translateY(-15px) scale(1.05)}to{opacity:1;transform:translateY(0) scale(1)}to{opacity:1;transform:translateY(0)}}.registro-texto[_ngcontent-%COMP%]{font-size:1.5em;color:#004d40;font-weight:700}.error[_ngcontent-%COMP%]{color:red;font-size:.875rem;margin-top:.25rem}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ff0000}.loading-spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.loading-spinner[_ngcontent-%COMP%]{border:8px solid #f3f3f3;border-top:8px solid #3498db;border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],data:{animation:[gP("formAnimation",[nI(":enter",[Vs({opacity:0,transform:"translateY(-20px)"}),tI("300ms ease-out",Vs({opacity:1,transform:"translateY(0)"}))]),nI(":leave",[tI("300ms ease-in",Vs({opacity:0,transform:"translateY(-20px)"}))])])]}})};function b3(n,e){n&1&&(L(0,"div",2),Xe(1,"div",3),j())}function T3(n,e){if(n&1){let t=yt();L(0,"div",8)(1,"h3"),ne(2,"Registrar Nuevo Administrador"),j(),L(3,"form",9),Ee("ngSubmit",function(){ke(t);let i=pe(2);return Fe(i.registrarUsuario())}),Xe(4,"input",10)(5,"input",11)(6,"input",12)(7,"input",13)(8,"input",14)(9,"input",15),L(10,"input",16),Ee("change",function(i){ke(t);let s=pe(2);return Fe(s.onFileChange(i,"imagenPerfil"))}),j(),L(11,"button",17),ne(12,"Registrar Usuario"),j()()()}if(n&2){let t=pe(2);te(3),se("formGroup",t.usuarioForm)}}function C3(n,e){if(n&1&&Xe(0,"img",22),n&2){let t=pe().$implicit;se("src",t.imagenPerfil,Cd)}}function D3(n,e){if(n&1){let t=yt();L(0,"td")(1,"button",23),Ee("click",function(){ke(t);let i=pe().$implicit,s=pe(3);return Fe(s.cambiarEstadoEspecialista(i.id,i.aprobado))}),ne(2),j()()}if(n&2){let t=pe().$implicit;te(2),xo(" ",t.aprobado?"Inhabilitar":"Habilitar"," ")}}function S3(n,e){if(n&1&&(L(0,"tr")(1,"td"),je(2,C3,1,1,"img",20),j(),L(3,"td"),ne(4),j(),L(5,"td"),ne(6),j(),L(7,"td"),ne(8),j(),L(9,"td"),ne(10),j(),L(11,"td"),ne(12),j(),L(13,"td"),ne(14),j(),je(15,D3,3,1,"td",21),j()),n&2){let t=e.$implicit;te(2),se("ngIf",t.imagenPerfil),te(2),Xt(t.nombre),te(2),Xt(t.apellido),te(2),Xt(t.edad),te(2),Xt(t.dni),te(2),Xt(t.mail),te(2),Xt(t.tipo),te(),se("ngIf",t.tipo==="Especialista")}}function A3(n,e){if(n&1&&(L(0,"div",18)(1,"h3"),ne(2,"Listado de Usuarios"),j(),L(3,"table")(4,"thead")(5,"tr")(6,"th"),ne(7,"Imagen"),j(),L(8,"th"),ne(9,"Nombre"),j(),L(10,"th"),ne(11,"Apellido"),j(),L(12,"th"),ne(13,"Edad"),j(),L(14,"th"),ne(15,"DNI"),j(),L(16,"th"),ne(17,"Email"),j(),L(18,"th"),ne(19,"Tipo"),j(),L(20,"th"),ne(21,"Acciones"),j()()(),L(22,"tbody"),je(23,S3,16,8,"tr",19),j()()()),n&2){let t=pe(2);te(23),se("ngForOf",t.usuarios)}}function R3(n,e){if(n&1){let t=yt();L(0,"div",4)(1,"h2"),ne(2,"Gesti\xF3n de Usuarios"),j(),L(3,"button",5),Ee("click",function(){ke(t);let i=pe();return Fe(i.mostrarFormularioNuevoUsuario())}),ne(4,"Registrar Nuevo Administrador"),j(),je(5,T3,13,1,"div",6)(6,A3,24,1,"div",7),j()}if(n&2){let t=pe();te(5),se("ngIf",t.mostrarFormulario),te(),se("ngIf",t.usuarios.length>0)}}var cp=class n{constructor(e,t,r,i,s){this.firestore=e;this.fb=t;this.router=r;this.auth=i;this.storage=s;this.usuarioForm=this.fb.group({nombre:["",Te.required],apellido:["",Te.required],edad:["",[Te.required,Te.min(1),Te.max(120)]],dni:["",[Te.required,Te.pattern(/^[0-9]{7,8}$/)]],mail:["",[Te.required,Te.email]],contrasena:["",[Te.required,Te.minLength(6)]],imagenPerfil:[null,Te.required]})}usuarios=[];usuarioForm;mostrarFormulario=!1;errorMessage;isLoading=!0;ngOnInit(){return v(this,null,function*(){yield this.cargarUsuarios(),this.isLoading=!1})}cargarUsuarios(){return v(this,null,function*(){this.isLoading=!0;let e=yield Vf(Lf(this.firestore,"administradores")),t=yield Vf(Lf(this.firestore,"especialistas")),r=yield Vf(Lf(this.firestore,"pacientes"));this.usuarios=[],e.forEach(i=>{this.usuarios.push(oe(k({id:i.id},i.data()),{tipo:"Administrador"}))}),t.forEach(i=>{this.usuarios.push(oe(k({id:i.id},i.data()),{tipo:"Especialista"}))}),r.forEach(i=>{this.usuarios.push(oe(k({id:i.id},i.data()),{tipo:"Paciente"}))}),this.isLoading=!1})}cambiarEstadoEspecialista(e,t){return v(this,null,function*(){let r=Dn(this.firestore,"especialistas",e);yield oM(r,{aprobado:!t}),yield this.cargarUsuarios()})}mostrarFormularioNuevoUsuario(){this.mostrarFormulario=!0}onFileChange(e,t){let r=e.target;r?.files&&r.files.length>0&&this.usuarioForm.get(t)?.setValue(r.files)}registrarUsuario(){return v(this,null,function*(){if(this.usuarioForm.valid){let e=this.usuarioForm.value;try{let t=yield Uh(this.auth,e.mail,e.contrasena);yield Bh(t.user);let r="";if(e.imagenPerfil&&e.imagenPerfil.length>0){let s=e.imagenPerfil[0],o=`administradores/${t.user.uid}/imagenPerfil/${s.name}`,a=Ls(this.storage,o);yield Pu(a,s),r=yield Fs(a)}let i={nombre:e.nombre,apellido:e.apellido,edad:e.edad,dni:e.dni,mail:e.mail,aprobado:!0,imagenPerfil:r||null};yield wu(Dn(this.firestore,"administradores",t.user.uid),i),this.errorMessage="Usuario registrado con \xE9xito",this.mostrarFormulario=!1,yield this.cargarUsuarios()}catch(t){console.error("Error al registrar: ",t),this.errorMessage="Hubo un error al registrar, por favor intente nuevamente"}}else this.errorMessage="Por favor complete todos los campos correctamente"})}static \u0275fac=function(t){return new(t||n)(Z(un),Z(Aa),Z(rr),Z(on),Z(zn))};static \u0275cmp=Qt({type:n,selectors:[["app-seccion-usuarios"]],standalone:!0,features:[En],decls:2,vars:2,consts:[["class","loading-spinner-container",4,"ngIf"],["class","seccion-usuarios-container",4,"ngIf"],[1,"loading-spinner-container"],[1,"loading-spinner"],[1,"seccion-usuarios-container"],[1,"boton-nuevo-usuario",3,"click"],["class","formulario-container",4,"ngIf"],["class","usuarios-lista",4,"ngIf"],[1,"formulario-container"],[3,"ngSubmit","formGroup"],["formControlName","nombre","placeholder","Nombre","required",""],["formControlName","apellido","placeholder","Apellido","required",""],["type","number","formControlName","edad","placeholder","Edad","required",""],["formControlName","dni","placeholder","DNI","required",""],["formControlName","mail","type","email","placeholder","Email","required",""],["formControlName","contrasena","type","password","placeholder","Contrase\xF1a","required",""],["type","file",3,"change"],["type","submit"],[1,"usuarios-lista"],[4,"ngFor","ngForOf"],["alt","Imagen de perfil","width","50","height","50",3,"src",4,"ngIf"],[4,"ngIf"],["alt","Imagen de perfil","width","50","height","50",3,"src"],[3,"click"]],template:function(t,r){t&1&&je(0,b3,2,0,"div",0)(1,R3,7,2,"div",1),t&2&&(se("ngIf",r.isLoading),te(),se("ngIf",!r.isLoading))},dependencies:[Ra,Sa,Ui,Su,Ca,Da,ks,xs,Os,In,ko,bi],styles:[".seccion-usuarios-container[_ngcontent-%COMP%]{padding:20px}.boton-nuevo-usuario[_ngcontent-%COMP%]{background-color:#00796b;color:#fff;padding:10px;border:none;cursor:pointer;margin-bottom:20px}.formulario-container[_ngcontent-%COMP%]{margin-bottom:20px;background-color:#f0f0f0;padding:20px;border-radius:8px}.usuarios-lista[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.usuarios-lista[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .usuarios-lista[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.usuarios-lista[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#00796b;color:#fff}button[_ngcontent-%COMP%]{background-color:#00796b;color:#fff;border:none;padding:5px 10px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#004d40}img[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover}.loading-spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.loading-spinner[_ngcontent-%COMP%]{border:8px solid #f3f3f3;border-top:8px solid #3498db;border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var _P=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:jf},{path:"registro",component:ap},{path:"login",component:sp},{path:"seccion-usuarios",component:cp}];var IP="@firebase/installations",oI="0.6.9";var bP=1e4,TP=`w:${oI}`,CP="FIS_v2",N3="https://firebaseinstallations.googleapis.com/v1",M3=60*60*1e3,P3="installations",x3="Installations";var O3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},js=new rn(P3,x3,O3);function DP(n){return n instanceof Tt&&n.code.includes("request-failed")}function SP({projectId:n}){return`${N3}/projects/${n}/installations`}function AP(n){return{token:n.token,requestStatus:2,expiresIn:F3(n.expiresIn),creationTime:Date.now()}}function RP(n,e){return v(this,null,function*(){let r=(yield e.json()).error;return js.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function NP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function k3(n,{refreshToken:e}){let t=NP(n);return t.append("Authorization",L3(e)),t}function MP(n){return v(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function F3(n){return Number(n.replace("s","000"))}function L3(n){return`${CP} ${n}`}function V3(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let s=SP(n),o=NP(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let c={fid:t,authVersion:CP,appId:n.appId,sdkVersion:TP},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield MP(()=>fetch(s,l));if(h.ok){let p=yield h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:AP(p.authToken)}}else throw yield RP("Create Installation",h)})}function PP(n){return new Promise(e=>{setTimeout(e,n)})}function U3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var j3=/^[cdef][\w-]{21}$/,sI="";function B3(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=$3(n);return j3.test(t)?t:sI}catch{return sI}}function $3(n){return U3(n).substr(0,22)}function lp(n){return`${n.appName}!${n.appId}`}var xP=new Map;function OP(n,e){let t=lp(n);kP(t,e),H3(t,e)}function kP(n,e){let t=xP.get(n);if(t)for(let r of t)r(e)}function H3(n,e){let t=q3();t&&t.postMessage({key:n,fid:e}),z3()}var Us=null;function q3(){return!Us&&"BroadcastChannel"in self&&(Us=new BroadcastChannel("[Firebase] FID Change"),Us.onmessage=n=>{kP(n.data.key,n.data.fid)}),Us}function z3(){xP.size===0&&Us&&(Us.close(),Us=null)}var G3="firebase-installations-database",W3=1,Bs="firebase-installations-store",rI=null;function aI(){return rI||(rI=ps(G3,W3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Bs)}}})),rI}function up(n,e){return v(this,null,function*(){let t=lp(n),i=(yield aI()).transaction(Bs,"readwrite"),s=i.objectStore(Bs),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&OP(n,e.fid),e})}function FP(n){return v(this,null,function*(){let e=lp(n),r=(yield aI()).transaction(Bs,"readwrite");yield r.objectStore(Bs).delete(e),yield r.done})}function dp(n,e){return v(this,null,function*(){let t=lp(n),i=(yield aI()).transaction(Bs,"readwrite"),s=i.objectStore(Bs),o=yield s.get(t),a=e(o);return a===void 0?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&OP(n,a.fid),a})}function cI(n){return v(this,null,function*(){let e,t=yield dp(n.appConfig,r=>{let i=K3(r),s=Q3(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===sI?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function K3(n){let e=n||{fid:B3(),registrationStatus:0};return LP(e)}function Q3(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(js.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Y3(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z3(n)}:{installationEntry:e}}function Y3(n,e){return v(this,null,function*(){try{let t=yield V3(n,e);return up(n.appConfig,t)}catch(t){throw DP(t)&&t.customData.serverCode===409?yield FP(n.appConfig):yield up(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function Z3(n){return v(this,null,function*(){let e=yield wP(n.appConfig);for(;e.registrationStatus===1;)yield PP(100),e=yield wP(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield cI(n);return r||t}return e})}function wP(n){return dp(n,e=>{if(!e)throw js.create("installation-not-found");return LP(e)})}function LP(n){return J3(n)?{fid:n.fid,registrationStatus:0}:n}function J3(n){return n.registrationStatus===1&&n.registrationTime+bP<Date.now()}function X3(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let s=eW(n,t),o=k3(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let c={installation:{sdkVersion:TP,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield MP(()=>fetch(s,l));if(h.ok){let p=yield h.json();return AP(p)}else throw yield RP("Generate Auth Token",h)})}function eW(n,{fid:e}){return`${SP(n)}/${e}/authTokens:generate`}function uI(n,e=!1){return v(this,null,function*(){let t,r=yield dp(n.appConfig,s=>{if(!VP(s))throw js.create("not-registered");let o=s.authToken;if(!e&&rW(o))return s;if(o.requestStatus===1)return t=tW(n,e),s;{if(!navigator.onLine)throw js.create("app-offline");let a=sW(s);return t=nW(n,a),a}});return t?yield t:r.authToken})}function tW(n,e){return v(this,null,function*(){let t=yield EP(n.appConfig);for(;t.authToken.requestStatus===1;)yield PP(100),t=yield EP(n.appConfig);let r=t.authToken;return r.requestStatus===0?uI(n,e):r})}function EP(n){return dp(n,e=>{if(!VP(e))throw js.create("not-registered");let t=e.authToken;return oW(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function nW(n,e){return v(this,null,function*(){try{let t=yield X3(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield up(n.appConfig,r),t}catch(t){if(DP(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield FP(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield up(n.appConfig,r)}throw t}})}function VP(n){return n!==void 0&&n.registrationStatus===2}function rW(n){return n.requestStatus===2&&!iW(n)}function iW(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+M3}function sW(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function oW(n){return n.requestStatus===1&&n.requestTime+bP<Date.now()}function aW(n){return v(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield cI(e);return r?r.catch(console.error):uI(e).catch(console.error),t.fid})}function cW(n,e=!1){return v(this,null,function*(){let t=n;return yield uW(t),(yield uI(t,e)).token})}function uW(n){return v(this,null,function*(){let{registrationPromise:e}=yield cI(n);e&&(yield e)})}function lW(n){if(!n||!n.options)throw iI("App Configuration");if(!n.name)throw iI("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw iI(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function iI(n){return js.create("missing-app-config-values",{valueName:n})}var UP="installations",dW="installations-internal",hW=n=>{let e=n.getProvider("app").getImmediate(),t=lW(e),r=Tn(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fW=n=>{let e=n.getProvider("app").getImmediate(),t=Tn(e,UP).getImmediate();return{getId:()=>aW(t),getToken:i=>cW(t,i)}};function pW(){Nt(new ct(UP,hW,"PUBLIC")),Nt(new ct(dW,fW,"PRIVATE"))}pW();Me(IP,oI);Me(IP,oI,"esm2017");var gW="/firebase-messaging-sw.js",mW="/firebase-cloud-messaging-push-scope",zP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yW="https://fcmregistrations.googleapis.com/v1",GP="google.c.a.c_id",vW="google.c.a.c_l",_W="google.c.a.ts",wW="google.c.a.e";var hp=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(hp||{});function Zr(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function EW(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var lI="fcm_token_details_db",IW=5,jP="fcm_token_object_Store";function bW(n){return v(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(lI))return null;let e=null;return(yield ps(lI,IW,{upgrade:(r,i,s,o)=>v(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(jP))return;let c=o.objectStore(jP),l=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!l){if(i===2){let h=l;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Zr(h.vapidKey)}}}else if(i===3){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Zr(h.auth),p256dh:Zr(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Zr(h.vapidKey)}}}else if(i===4){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Zr(h.auth),p256dh:Zr(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Zr(h.vapidKey)}}}}})})).close(),yield yh(lI),yield yh("fcm_vapid_details_db"),yield yh("undefined"),TW(e)?e:null})}function TW(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var CW="firebase-messaging-database",DW=1,Ou="firebase-messaging-store",dI=null;function WP(){return dI||(dI=ps(CW,DW,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ou)}}})),dI}function SW(n){return v(this,null,function*(){let e=KP(n),r=yield(yield WP()).transaction(Ou).objectStore(Ou).get(e);if(r)return r;{let i=yield bW(n.appConfig.senderId);if(i)return yield pI(n,i),i}})}function pI(n,e){return v(this,null,function*(){let t=KP(n),i=(yield WP()).transaction(Ou,"readwrite");return yield i.objectStore(Ou).put(e,t),yield i.done,e})}function KP({appConfig:n}){return n.appId}var AW={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ut=new rn("messaging","Messaging",AW);function RW(n,e){return v(this,null,function*(){let t=yield mI(n),r=QP(e),i={method:"POST",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(gI(n.appConfig),i)).json()}catch(o){throw Ut.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Ut.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Ut.create("token-subscribe-no-token");return s.token})}function NW(n,e){return v(this,null,function*(){let t=yield mI(n),r=QP(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${gI(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Ut.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Ut.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Ut.create("token-update-no-token");return s.token})}function MW(n,e){return v(this,null,function*(){let r={method:"DELETE",headers:yield mI(n)};try{let s=yield(yield fetch(`${gI(n.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw Ut.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Ut.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function gI({projectId:n}){return`${yW}/projects/${n}/registrations`}function mI(t){return v(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function QP({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==zP&&(i.web.applicationPubKey=r),i}var PW=7*24*60*60*1e3;function xW(n){return v(this,null,function*(){let e=yield kW(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Zr(e.getKey("auth")),p256dh:Zr(e.getKey("p256dh"))},r=yield SW(n.firebaseDependencies);if(r){if(FW(r.subscriptionOptions,t))return Date.now()>=r.createTime+PW?OW(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield MW(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return BP(n.firebaseDependencies,t)}else return BP(n.firebaseDependencies,t)})}function OW(n,e){return v(this,null,function*(){try{let t=yield NW(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield pI(n.firebaseDependencies,r),t}catch(t){throw t}})}function BP(n,e){return v(this,null,function*(){let r={token:yield RW(n,e),createTime:Date.now(),subscriptionOptions:e};return yield pI(n,r),r.token})}function kW(n,e){return v(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:EW(e)})})}function FW(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}function $P(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return LW(e,n),VW(e,n),UW(e,n),e}function LW(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let s=e.notification.icon;s&&(n.notification.icon=s)}function VW(n,e){e.data&&(n.data=e.data)}function UW(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function jW(n){return typeof n=="object"&&!!n&&GP in n}BW("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function BW(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function $W(n){if(!n||!n.options)throw hI("App Configuration Object");if(!n.name)throw hI("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw hI(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function hI(n){return Ut.create("missing-app-config-values",{valueName:n})}var fI=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=$W(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function HW(n){return v(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(gW,{scope:mW}),n.swRegistration.update().catch(()=>{})}catch(e){throw Ut.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function qW(n,e){return v(this,null,function*(){if(!e&&!n.swRegistration&&(yield HW(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ut.create("invalid-sw-registration");n.swRegistration=e}})}function zW(n,e){return v(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=zP)})}function GW(n,e){return v(this,null,function*(){if(!navigator)throw Ut.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Ut.create("permission-blocked");return yield zW(n,e?.vapidKey),yield qW(n,e?.serviceWorkerRegistration),xW(n)})}function WW(n,e,t){return v(this,null,function*(){let r=KW(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[GP],message_name:t[vW],message_time:t[_W],message_device_time:Math.floor(Date.now()/1e3)})})}function KW(n){switch(n){case hp.NOTIFICATION_CLICKED:return"notification_open";case hp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function QW(n,e){return v(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===hp.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler($P(t)):n.onMessageHandler.next($P(t)));let r=t.data;jW(r)&&r[wW]==="1"&&(yield WW(n,t.messageType,r))})}var HP="@firebase/messaging",qP="0.12.12";var YW=n=>{let e=new fI(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>QW(e,t)),e},ZW=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>GW(e,r)}};function JW(){Nt(new ct("messaging",YW,"PUBLIC")),Nt(new ct("messaging-internal",ZW,"PRIVATE")),Me(HP,qP),Me(HP,qP,"esm2017")}function yI(){return v(this,null,function*(){try{yield ph()}catch{return!1}return typeof window<"u"&&jc()&&QS()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function YP(n=Un()){return yI().then(e=>{if(!e)throw Ut.create("unsupported-browser")},e=>{throw Ut.create("indexed-db-unsupported")}),Tn(Ue(n),"messaging").getImmediate()}JW();var ku=class{constructor(e){return e}},ZP="messaging",vI=class{constructor(){return jr(ZP)}};var JP="__angularfire_symbol__messagingIsSupported",_I="__angularfire_symbol__messagingIsSupportedValue";globalThis[JP]||=yI().then(n=>globalThis[_I]=n).catch(()=>globalThis[_I]=!1);var fp={async:()=>globalThis[JP],sync:()=>{let n=globalThis[_I];if(n===void 0)throw new Error(dA("Messaging"));return n}},wI=new z("angularfire2.messaging-instances");function XW(n,e){if(!fp.sync())return null;let t=Ai(ZP,n,e);return t&&new ku(t)}function e6(n){return(e,t)=>{if(!fp.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new ku(r)}}var t6={provide:vI,deps:[[new We,wI]]},n6={provide:ku,useFactory:XW,deps:[[new We,wI],sn]};function XP(n,...e){return Me("angularfire",jn.full,"fcm"),$t([n6,t6,{provide:Vd,useValue:fp.async,multi:!0},{provide:wI,useFactory:e6(n),multi:!0,deps:[de,pt,sr,Bn,...e]}])}var Gre=fp.async;var ex=ze(YP,!0);var tx={apiKey:"AIzaSyA-vSzED_Up0m30lHEURRtXY_7_VyxFnJw",authDomain:"pruebaapp2-c5b94.firebaseapp.com",projectId:"pruebaapp2-c5b94",storageBucket:"pruebaapp2-c5b94.firebasestorage.app",messagingSenderId:"22619231299",appId:"1:22619231299:web:f68caaa3c2c72d5ba330f6"};function nx(n){return new x(3e3,!1)}function r6(){return new x(3100,!1)}function i6(){return new x(3101,!1)}function s6(n){return new x(3001,!1)}function o6(n){return new x(3003,!1)}function a6(n){return new x(3004,!1)}function c6(n,e){return new x(3005,!1)}function u6(){return new x(3006,!1)}function l6(){return new x(3007,!1)}function d6(n,e){return new x(3008,!1)}function h6(n){return new x(3002,!1)}function f6(n,e,t,r,i){return new x(3010,!1)}function p6(){return new x(3011,!1)}function g6(){return new x(3012,!1)}function m6(){return new x(3200,!1)}function y6(){return new x(3202,!1)}function v6(){return new x(3013,!1)}function _6(n){return new x(3014,!1)}function w6(n){return new x(3015,!1)}function E6(n){return new x(3016,!1)}function I6(n,e){return new x(3404,!1)}function b6(n){return new x(3502,!1)}function T6(n){return new x(3503,!1)}function C6(){return new x(3300,!1)}function D6(n){return new x(3504,!1)}function S6(n){return new x(3301,!1)}function A6(n,e){return new x(3302,!1)}function R6(n){return new x(3303,!1)}function N6(n,e){return new x(3400,!1)}function M6(n){return new x(3401,!1)}function P6(n){return new x(3402,!1)}function x6(n,e){return new x(3505,!1)}function Bi(n){switch(n.length){case 0:return new ji;case 1:return n[0];default:return new xu(n)}}function mx(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),h=l==o,p=h&&a||new Map;c.forEach((m,y)=>{let I=y,A=m;if(y!=="offset")switch(I=n.normalizePropertyName(I,i),A){case op:A=t.get(y);break;case mr:A=r.get(y);break;default:A=n.normalizeStyleValue(y,I,A,i);break}p.set(I,A)}),h||s.push(p),a=p,o=l}),i.length)throw b6(i);return s}function HI(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&EI(t,"start",n)));break;case"done":n.onDone(()=>r(t&&EI(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&EI(t,"destroy",n)));break}}function EI(n,e,t){let r=t.totalTime,i=!!t.disabled,s=qI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function qI(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function dn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function rx(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var O6=typeof document>"u"?null:document.documentElement;function zI(n){let e=n.parentNode||n.host||null;return e===O6?null:e}function k6(n){return n.substring(1,6)=="ebkit"}var $s=null,ix=!1;function F6(n){$s||($s=L6()||{},ix=$s.style?"WebkitAppearance"in $s.style:!1);let e=!0;return $s.style&&!k6(n)&&(e=n in $s.style,!e&&ix&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in $s.style)),e}function L6(){return typeof document<"u"?document.body:null}function yx(n,e){for(;e;){if(e===n)return!0;e=zI(e)}return!1}function vx(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var GI=(()=>{class n{validateStyleProperty(t){return F6(t)}containsElement(t,r){return yx(t,r)}getParentElement(t){return zI(t)}query(t,r,i){return vx(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new ji(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),zs=class{static{this.NOOP=new GI}},Gs=class{};var V6=1e3,_x="{{",U6="}}",wx="ng-enter",SI="ng-leave",pp="ng-trigger",_p=".ng-trigger",sx="ng-animating",AI=".ng-animating";function Jr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:RI(parseFloat(e[1]),e[2])}function RI(n,e){switch(e){case"s":return n*V6;default:return n}}function wp(n,e,t){return n.hasOwnProperty("duration")?n:j6(n,e,t)}function j6(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(nx(n)),{duration:0,delay:0,easing:""};i=RI(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=RI(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(r6()),a=!0),s<0&&(e.push(i6()),a=!0),a&&e.splice(c,0,nx(n))}return{duration:i,delay:s,easing:o}}function B6(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function yr(n,e,t){e.forEach((r,i)=>{let s=WI(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function qs(n,e){e.forEach((t,r)=>{let i=WI(r);n.style[i]=""})}function Fu(n){return Array.isArray(n)?n.length==1?n[0]:mP(n):n}function $6(n,e,t){let r=e.params||{},i=Ex(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(s6(s))})}var NI=new RegExp(`${_x}\\s*(.+?)\\s*${U6}`,"g");function Ex(n){let e=[];if(typeof n=="string"){let t;for(;t=NI.exec(n);)e.push(t[1]);NI.lastIndex=0}return e}function Vu(n,e,t){let r=`${n}`,i=r.replace(NI,(s,o)=>{let a=e[o];return a==null&&(t.push(o6(o)),a=""),a.toString()});return i==r?n:i}var H6=/-+([a-z0-9])/g;function WI(n){return n.replace(H6,(...e)=>e[1].toUpperCase())}function q6(n,e){return n===0||e===0}function z6(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,KI(n,a)))}}return e}function ln(n,e,t){switch(e.type){case fe.Trigger:return n.visitTrigger(e,t);case fe.State:return n.visitState(e,t);case fe.Transition:return n.visitTransition(e,t);case fe.Sequence:return n.visitSequence(e,t);case fe.Group:return n.visitGroup(e,t);case fe.Animate:return n.visitAnimate(e,t);case fe.Keyframes:return n.visitKeyframes(e,t);case fe.Style:return n.visitStyle(e,t);case fe.Reference:return n.visitReference(e,t);case fe.AnimateChild:return n.visitAnimateChild(e,t);case fe.AnimateRef:return n.visitAnimateRef(e,t);case fe.Query:return n.visitQuery(e,t);case fe.Stagger:return n.visitStagger(e,t);default:throw a6(e.type)}}function KI(n,e){return window.getComputedStyle(n)[e]}var G6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Ep=class extends Gs{normalizePropertyName(e,t){return WI(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(G6.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(c6(e,r))}return o+s}};var Ip="*";function W6(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>K6(r,t,e)):t.push(n),t}function K6(n,e,t){if(n[0]==":"){let c=Q6(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(w6(n)),e;let i=r[1],s=r[2],o=r[3];e.push(ox(i,o));let a=i==Ip&&o==Ip;s[0]=="<"&&!a&&e.push(ox(o,i))}function Q6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(E6(n)),"* => *"}}var gp=new Set(["true","1"]),mp=new Set(["false","0"]);function ox(n,e){let t=gp.has(n)||mp.has(n),r=gp.has(e)||mp.has(e);return(i,s)=>{let o=n==Ip||n==i,a=e==Ip||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?gp.has(n):mp.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?gp.has(e):mp.has(e)),o&&a}}var Ix=":self",Y6=new RegExp(`s*${Ix}s*,?`,"g");function bx(n,e,t,r){return new MI(n).build(e,t,r)}var ax="",MI=class{constructor(e){this._driver=e}build(e,t,r){let i=new PI(t);return this._resetContextStyleTimingState(i),ln(this,Fu(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=ax,e.collectedStyles=new Map,e.collectedStyles.set(ax,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(u6()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==fe.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==fe.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(l6())}),{type:fe.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Ex(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(d6(e.name,[...s.values()]))}return{type:fe.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=ln(this,Fu(e.animation),t),i=W6(e.expr,t.errors);return{type:fe.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Hs(e.options)}}visitSequence(e,t){return{type:fe.Sequence,steps:e.steps.map(r=>ln(this,r,t)),options:Hs(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=ln(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:fe.Group,steps:s,options:Hs(e.options)}}visitAnimate(e,t){let r=e9(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Vs({});if(s.type==fe.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=Vs(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:fe.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===mr?r.push(a):t.errors.push(h6(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(_x)>=0){s=!0;break}}}),{type:fe.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),h=l.get(c),p=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(f6(c,h.startTime,h.endTime,s,i)),p=!1),s=h.startTime),p&&l.set(c,{startTime:s,endTime:i}),t.options&&$6(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:fe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(p6()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,h=e.steps.map(P=>{let V=this._makeStyleAst(P,t),U=V.offset!=null?V.offset:X6(V.styles),$=0;return U!=null&&(s++,$=V.offset=U),c=c||$<0||$>1,a=a||$<l,l=$,o.push($),V});c&&t.errors.push(g6()),a&&t.errors.push(m6());let p=e.steps.length,m=0;s>0&&s<p?t.errors.push(y6()):s==0&&(m=i/(p-1));let y=p-1,I=t.currentTime,A=t.currentAnimateTimings,R=A.duration;return h.forEach((P,V)=>{let U=m>0?V==y?1:m*V:o[V],$=U*R;t.currentTime=I+A.delay+$,A.duration=$,this._validateStyleAst(P,t),P.offset=U,r.styles.push(P)}),r}visitReference(e,t){return{type:fe.Reference,animation:ln(this,Fu(e.animation),t),options:Hs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:fe.AnimateChild,options:Hs(e.options)}}visitAnimateRef(e,t){return{type:fe.AnimateRef,animation:this.visitReference(e.animation,t),options:Hs(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=Z6(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,dn(t.collectedStyles,t.currentQuerySelector,new Map);let a=ln(this,Fu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:fe.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Hs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(v6());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:wp(e.timings,t.errors,!0);return{type:fe.Stagger,animation:ln(this,Fu(e.animation),t),timings:r,options:null}}};function Z6(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Ix);return e&&(n=n.replace(Y6,"")),n=n.replace(/@\*/g,_p).replace(/@\w+/g,t=>_p+"-"+t.slice(1)).replace(/:animating/g,AI),[n,e]}function J6(n){return n?k({},n):null}var PI=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function X6(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function e9(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=wp(n,e).duration;return II(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=II(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=wp(t,e);return II(i.duration,i.delay,i.easing)}function Hs(n){return n?(n=k({},n),n.params&&(n.params=J6(n.params))):n={},n}function II(n,e,t){return{duration:n,delay:e,easing:t}}function QI(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Uu=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},t9=1,n9=":enter",r9=new RegExp(n9,"g"),i9=":leave",s9=new RegExp(i9,"g");function Tx(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new xI().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var xI=class{buildKeyframes(e,t,r,i,s,o,a,c,l,h=[]){l=l||new Uu;let p=new OI(e,t,l,i,s,h,[]);p.options=c;let m=c.delay?Jr(c.delay):0;p.currentTimeline.delayNextStep(m),p.currentTimeline.setStyles([o],null,p.errors,c),ln(this,r,p);let y=p.timelines.filter(I=>I.containsAnimation());if(y.length&&a.size){let I;for(let A=y.length-1;A>=0;A--){let R=y[A];if(R.element===t){I=R;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([a],null,p.errors,c)}return y.length?y.map(I=>I.buildKeyframes()):[QI(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Jr(Vu(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Jr(r.duration):null,a=r.delay!=null?Jr(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ln(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==fe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=bp);let o=Jr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ln(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Jr(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),ln(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Vu(r,t.params,t.errors):r;return wp(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==fe.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Jr(i.delay):0;s&&(t.previousNode.type===fe.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=bp);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,h)=>{t.currentQueryIndex=h;let p=t.createSubContext(e.options,l);s&&p.delayNextStep(s),l===t.element&&(c=p.currentTimeline),ln(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let m=p.currentTimeline.currentTime;o=Math.max(o,m)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let p=h.currentTime;ln(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},bp={},OI=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Tp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Jr(r.duration)),r.delay!=null&&(i.delay=Jr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Vu(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=bp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new kI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(r9,"."+this._enterClassName),e=e.replace(s9,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(_6(t)),a}},Tp=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=t9,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||mr),this._currentKeyframe.set(t,mr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=o9(e,this._globalTimelineStyles);for(let[a,c]of o){let l=Vu(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??mr),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((h,p)=>{h===op?e.add(p):h===mr&&t.add(p)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return QI(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},kI=class extends Tp{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",cx(a)),s.push(l);let h=e.length-1;for(let p=1;p<=h;p++){let m=new Map(e[p]),y=m.get("offset"),I=t+y*r;m.set("offset",cx(I/o)),s.push(m)}r=o,t=0,i="",e=s}return QI(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function cx(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function o9(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,mr)}else for(let[s,o]of i)t.set(s,o)}),t}function ux(n,e,t,r,i,s,o,a,c,l,h,p,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:h,totalTime:p,errors:m}}var bI={},Cp=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return a9(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,h){let p=[],m=this.ast.options&&this.ast.options.params||bI,y=a&&a.params||bI,I=this.buildStyles(r,y,p),A=c&&c.params||bI,R=this.buildStyles(i,A,p),P=new Set,V=new Map,U=new Map,$=i==="void",Ce={params:Cx(A,m),delay:this.ast.options?.delay},K=h?[]:Tx(e,t,this.ast.animation,s,o,I,R,Ce,l,p),b=0;return K.forEach(_=>{b=Math.max(_.duration+_.delay,b)}),p.length?ux(t,this._triggerName,r,i,$,I,R,[],[],V,U,b,p):(K.forEach(_=>{let w=_.element,T=dn(V,w,new Set);_.preStyleProps.forEach(S=>T.add(S));let C=dn(U,w,new Set);_.postStyleProps.forEach(S=>C.add(S)),w!==t&&P.add(w)}),ux(t,this._triggerName,r,i,$,I,R,K,[...P.values()],V,U,b))}};function a9(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function Cx(n,e){let t=k({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var FI=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=Cx(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Vu(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function c9(n,e,t){return new LI(n,e,t)}var LI=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new FI(i.style,s,r))}),lx(this.states,"true","1"),lx(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Cp(e,i,this.states))}),this.fallbackTransition=u9(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function u9(n,e,t){let r=[(o,a)=>!0],i={type:fe.Sequence,steps:[],options:null},s={type:fe.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Cp(n,s,e)}function lx(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var l9=new Uu,VI=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=bx(this._driver,t,r,i);if(r.length)throw T6(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=mx(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=Tx(this._driver,t,s,wx,SI,new Map,new Map,r,l9,i),o.forEach(h=>{let p=dn(a,h.element,new Map);h.postStyleProps.forEach(m=>p.set(m,null))})):(i.push(C6()),o=[]),i.length)throw D6(i);a.forEach((h,p)=>{h.forEach((m,y)=>{h.set(y,this._driver.computeStyle(p,y,mr))})});let c=o.map(h=>{let p=a.get(h.element);return this._buildPlayer(h,new Map,p)}),l=Bi(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw S6(e);return t}listen(e,t,r,i){let s=qI(t,"","","");return HI(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},dx="ng-animate-queued",d9=".ng-animate-queued",TI="ng-animate-disabled",h9=".ng-animate-disabled",f9="ng-star-inserted",p9=".ng-star-inserted",g9=[],Dx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},m9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Gn="__ng_removed",ju=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=v9(i),r){let s=e,{value:o}=s,a=Xb(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Lu="void",CI=new ju(Lu),UI=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw A6(r,t);if(r==null||r.length==0)throw R6(t);if(!_9(r))throw N6(r,t);let s=dn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=dn(this._engine.statesByElement,e,new Map);return a.has(t)||(Sn(e,pp),Sn(e,pp+"-"+t),a.set(t,CI)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw M6(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Bu(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Sn(e,pp),Sn(e,pp+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new ju(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=CI),!(l.value===Lu)&&c.value===l.value){if(!I9(c.params,l.params)){let A=[],R=s.matchStyles(c.value,c.params,A),P=s.matchStyles(l.value,l.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{qs(e,R),yr(e,P)})}return}let m=dn(this._engine.playersByElement,e,[]);m.forEach(A=>{A.namespaceId==this.id&&A.triggerName==t&&A.queued&&A.destroy()});let y=s.matchTransition(c.value,l.value,e,l.params),I=!1;if(!y){if(!i)return;y=s.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:l,player:o,isFallbackTransition:I}),I||(Sn(e,dx),o.onStart(()=>{xa(e,dx)})),o.onDone(()=>{let A=this.players.indexOf(o);A>=0&&this.players.splice(A,1);let R=this._engine.playersByElement.get(e);if(R){let P=R.indexOf(o);P>=0&&R.splice(P,1)}}),this.players.push(o),m.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,_p,!0);r.forEach(i=>{if(i[Gn])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let h=this.trigger(e,l,Lu,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Bi(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||CI,h=new ju(Lu),p=new Bu(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Gn];(!s||s===Dx)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Sn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=qI(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,HI(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},jI=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new UI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(yp(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!yp(t))return;let s=t[Gn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sn(e,TI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xa(e,TI))}removeNode(e,t,r){if(yp(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Gn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return yp(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,_p,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,AI,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Bi(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Gn];if(t&&t.setForRemoval){if(e[Gn]=Dx,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(TI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,h9,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Sn(i,f9)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Bi(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw P6(e)}_flushAnimations(e,t){let r=new Uu,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(H=>{h.add(H);let G=this.driver.query(H,d9,!0);for(let Y=0;Y<G.length;Y++)h.add(G[Y])});let p=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=px(m,this.collectedEnterElements),I=new Map,A=0;y.forEach((H,G)=>{let Y=wx+A++;I.set(G,Y),H.forEach(me=>Sn(me,Y))});let R=[],P=new Set,V=new Set;for(let H=0;H<this.collectedLeaveElements.length;H++){let G=this.collectedLeaveElements[H],Y=G[Gn];Y&&Y.setForRemoval&&(R.push(G),P.add(G),Y.hasAnimation?this.driver.query(G,p9,!0).forEach(me=>P.add(me)):V.add(G))}let U=new Map,$=px(m,Array.from(P));$.forEach((H,G)=>{let Y=SI+A++;U.set(G,Y),H.forEach(me=>Sn(me,Y))}),e.push(()=>{y.forEach((H,G)=>{let Y=I.get(G);H.forEach(me=>xa(me,Y))}),$.forEach((H,G)=>{let Y=U.get(G);H.forEach(me=>xa(me,Y))}),R.forEach(H=>{this.processLeaveNode(H)})});let Ce=[],K=[];for(let H=this._namespaceList.length-1;H>=0;H--)this._namespaceList[H].drainQueuedTransitions(t).forEach(Y=>{let me=Y.player,rt=Y.element;if(Ce.push(me),this.collectedEnterElements.length){let Qe=rt[Gn];if(Qe&&Qe.setForMove){if(Qe.previousTriggersValues&&Qe.previousTriggersValues.has(Y.triggerName)){let vr=Qe.previousTriggersValues.get(Y.triggerName),jt=this.statesByElement.get(Y.element);if(jt&&jt.has(Y.triggerName)){let _r=jt.get(Y.triggerName);_r.value=vr,jt.set(Y.triggerName,_r)}}me.destroy();return}}let fn=!p||!this.driver.containsElement(p,rt),Ke=U.get(rt),Be=I.get(rt),$e=this._buildInstruction(Y,r,Be,Ke,fn);if($e.errors&&$e.errors.length){K.push($e);return}if(fn){me.onStart(()=>qs(rt,$e.fromStyles)),me.onDestroy(()=>yr(rt,$e.toStyles)),i.push(me);return}if(Y.isFallbackTransition){me.onStart(()=>qs(rt,$e.fromStyles)),me.onDestroy(()=>yr(rt,$e.toStyles)),i.push(me);return}let ei=[];$e.timelines.forEach(Qe=>{Qe.stretchStartingKeyframe=!0,this.disabledNodes.has(Qe.element)||ei.push(Qe)}),$e.timelines=ei,r.append(rt,$e.timelines);let Mp={instruction:$e,player:me,element:rt};o.push(Mp),$e.queriedElements.forEach(Qe=>dn(a,Qe,[]).push(me)),$e.preStyleProps.forEach((Qe,vr)=>{if(Qe.size){let jt=c.get(vr);jt||c.set(vr,jt=new Set),Qe.forEach((_r,ti)=>jt.add(ti))}}),$e.postStyleProps.forEach((Qe,vr)=>{let jt=l.get(vr);jt||l.set(vr,jt=new Set),Qe.forEach((_r,ti)=>jt.add(ti))})});if(K.length){let H=[];K.forEach(G=>{H.push(x6(G.triggerName,G.errors))}),Ce.forEach(G=>G.destroy()),this.reportError(H)}let b=new Map,_=new Map;o.forEach(H=>{let G=H.element;r.has(G)&&(_.set(G,G),this._beforeAnimationBuild(H.player.namespaceId,H.instruction,b))}),i.forEach(H=>{let G=H.element;this._getPreviousPlayers(G,!1,H.namespaceId,H.triggerName,null).forEach(me=>{dn(b,G,[]).push(me),me.destroy()})});let w=R.filter(H=>gx(H,c,l)),T=new Map;fx(T,this.driver,V,l,mr).forEach(H=>{gx(H,c,l)&&w.push(H)});let S=new Map;y.forEach((H,G)=>{fx(S,this.driver,new Set(H),c,op)}),w.forEach(H=>{let G=T.get(H),Y=S.get(H);T.set(H,new Map([...G?.entries()??[],...Y?.entries()??[]]))});let E=[],hn=[],Xr={};o.forEach(H=>{let{element:G,player:Y,instruction:me}=H;if(r.has(G)){if(h.has(G)){Y.onDestroy(()=>yr(G,me.toStyles)),Y.disabled=!0,Y.overrideTotalTime(me.totalTime),i.push(Y);return}let rt=Xr;if(_.size>1){let Ke=G,Be=[];for(;Ke=Ke.parentNode;){let $e=_.get(Ke);if($e){rt=$e;break}Be.push(Ke)}Be.forEach($e=>_.set($e,rt))}let fn=this._buildAnimation(Y.namespaceId,me,b,s,S,T);if(Y.setRealPlayer(fn),rt===Xr)E.push(Y);else{let Ke=this.playersByElement.get(rt);Ke&&Ke.length&&(Y.parentPlayer=Bi(Ke)),i.push(Y)}}else qs(G,me.fromStyles),Y.onDestroy(()=>yr(G,me.toStyles)),hn.push(Y),h.has(G)&&i.push(Y)}),hn.forEach(H=>{let G=s.get(H.element);if(G&&G.length){let Y=Bi(G);H.setRealPlayer(Y)}}),i.forEach(H=>{H.parentPlayer?H.syncPlayerEvents(H.parentPlayer):H.destroy()});for(let H=0;H<R.length;H++){let G=R[H],Y=G[Gn];if(xa(G,SI),Y&&Y.hasAnimation)continue;let me=[];if(a.size){let fn=a.get(G);fn&&fn.length&&me.push(...fn);let Ke=this.driver.query(G,AI,!0);for(let Be=0;Be<Ke.length;Be++){let $e=a.get(Ke[Be]);$e&&$e.length&&me.push(...$e)}}let rt=me.filter(fn=>!fn.destroyed);rt.length?w9(this,G,rt):this.processLeaveNode(G)}return R.length=0,E.forEach(H=>{this.players.push(H),H.onDone(()=>{H.destroy();let G=this.players.indexOf(H);this.players.splice(G,1)}),H.play()}),E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Lu;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,h=l!==s,p=dn(r,l,[]);this._getPreviousPlayers(l,h,o,a,t.toState).forEach(y=>{let I=y.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),y.destroy(),p.push(y)})}qs(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],h=new Set,p=new Set,m=t.timelines.map(I=>{let A=I.element;h.add(A);let R=A[Gn];if(R&&R.removedBeforeQueried)return new ji(I.duration,I.delay);let P=A!==c,V=E9((r.get(A)||g9).map(b=>b.getRealPlayer())).filter(b=>{let _=b;return _.element?_.element===A:!1}),U=s.get(A),$=o.get(A),Ce=mx(this._normalizer,I.keyframes,U,$),K=this._buildPlayer(I,Ce,V);if(I.subTimeline&&i&&p.add(A),P){let b=new Bu(e,a,A);b.setRealPlayer(K),l.push(b)}return K});l.forEach(I=>{dn(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>y9(this.playersByQueriedElement,I.element,I))}),h.forEach(I=>Sn(I,sx));let y=Bi(m);return y.onDestroy(()=>{h.forEach(I=>xa(I,sx)),yr(c,t.toStyles)}),p.forEach(I=>{dn(i,I,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ji(e.duration,e.delay)}},Bu=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ji,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>HI(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){dn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function y9(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function v9(n){return n??null}function yp(n){return n&&n.nodeType===1}function _9(n){return n=="start"||n=="done"}function hx(n,e){let t=n.style.display;return n.style.display=e??"none",t}function fx(n,e,t,r,i){let s=[];t.forEach(c=>s.push(hx(c)));let o=[];r.forEach((c,l)=>{let h=new Map;c.forEach(p=>{let m=e.computeStyle(l,p,i);h.set(p,m),(!m||m.length==0)&&(l[Gn]=m9,o.push(l))}),n.set(l,h)});let a=0;return t.forEach(c=>hx(c,s[a++])),o}function px(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Sn(n,e){n.classList?.add(e)}function xa(n,e){n.classList?.remove(e)}function w9(n,e,t){Bi(t).onDone(()=>n.processLeaveNode(e))}function E9(n){let e=[];return Sx(n,e),e}function Sx(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof xu?Sx(r.players,e):e.push(r)}}function I9(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function gx(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var Oa=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new jI(e.body,t,r),this._timelineEngine=new VI(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],h=bx(this._driver,s,c,l);if(c.length)throw I6(i,c);l.length&&void 0,a=c9(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=rx(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=rx(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function b9(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=DI(e[0]),e.length>1&&(r=DI(e[e.length-1]))):e instanceof Map&&(t=DI(e)),t||r?new BI(n,t,r):null}var BI=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&yr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(yr(this._element,this._initialStyles),this._endStyles&&(yr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(qs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qs(this._element,this._endStyles),this._endStyles=null),yr(this._element,this._initialStyles),this._state=3)}};function DI(n){let e=null;return n.forEach((t,r)=>{T9(r)&&(e=e||new Map,e.set(r,t))}),e}function T9(n){return n==="display"||n==="position"}var Dp=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:KI(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Sp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return yx(e,t)}getParentElement(e){return zI(e)}query(e,t,r){return vx(e,t,r)}computeStyle(e,t,r){return KI(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,h=o.filter(y=>y instanceof Dp);q6(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((I,A)=>l.set(A,I))});let p=B6(t).map(y=>new Map(y));p=z6(e,p,l);let m=b9(e,p);return new Dp(e,p,c,m)}};var vp="@",Ax="@.disabled",Ap=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==vp&&t==Ax?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},$I=class extends Ap{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==vp?t.charAt(1)=="."&&t==Ax?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==vp){let i=C9(e),s=t.slice(1),o="";return s.charAt(0)!=vp&&([s,o]=D9(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function C9(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function D9(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Rp=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,h=l.get(i);if(!h){let p=()=>l.delete(i);h=new Ap(r,i,this.engine,p),l.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new $I(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var A9=(()=>{class n extends Oa{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(X(Ht),X(zs),X(Gs))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function R9(){return new Ep}function N9(n,e,t){return new Rp(n,e,t)}var Nx=[{provide:Gs,useFactory:R9},{provide:Oa,useClass:A9},{provide:yi,useFactory:N9,deps:[zd,Oa,de]}],Rx=[{provide:zs,useFactory:()=>new Sp},{provide:Zm,useValue:"BrowserAnimations"},...Nx],M9=[{provide:zs,useClass:GI},{provide:Zm,useValue:"NoopAnimations"},...Nx],Mx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?M9:Rx}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Kt({providers:Rx,imports:[nS]})}}return n})();var Px={providers:[xD({eventCoalescing:!0}),US(_P),hA(()=>fA(tx)),uR(()=>jh()),iM(()=>sM()),XP(()=>ex()),fP(()=>pP()),km(Mx)]};var Np=class n{title="tp-clinica";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Qt({type:n,selectors:[["app-root"]],standalone:!0,features:[En],decls:1,vars:0,template:function(t,r){t&1&&Xe(0,"router-outlet")},dependencies:[av]})};eS(Np,Px).catch(n=>console.error(n));
